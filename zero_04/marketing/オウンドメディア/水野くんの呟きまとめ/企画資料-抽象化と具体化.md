mizuno
  16:35
======================================================
======================================================
ふと思った。
「既存のコードをできるだけ使って追加の機能を作る」
というマインドの変更から必要じゃない？
再利用性はあくまでも結果の1つなのだから、
「必要な処理や仕様をコードにしていく」と「既存のDRYな処理を利用すると良いことに気づける」みたいな順番が理想だと思う
:+1:
1

16:39
僕的にこうなってしまったのは、
抽象化しまくるのが良いという時代によるものだと思う。
DDDじゃなかった頃ともでもいうのか。
「リポビタンD専用販売システム」で「リポビタンDの特徴に応じて処理を切り替える」という文脈でも、
全て
「Drink」クラスと「DrinkType」という抽象化されたクラスとそのメソッドだけでプログラムが組み込まれていくような感じ。
ソースコードを見ても、どこにもリポビタンDがいない


mizuno
  16:45
「リポビタンDのα1で300mlタイプの販売個数の上限を30個にバリデーションしたいんだけど」
というPOの会話をもとに
DrinkクラスとDrinkTypeの処理を探して
if type.seibun1 == “az” && type.seibun2 == “lo” && type.parent.include?(“ddd”)
end
という記載を見つけ、設計書をながめて「あぁ、このときがα1になるのね」と理解していくような。
昔の天才たちは抽象化したコードを眺めてうまくいっていたのかもしれないけど、
もうそういう天才たちだけで仕事ができなくなったんじゃないかなーと思う


mizuno
  16:47
Drinkクラスを作るのは全然良い。これ自体は悪いことじゃない。
でもそこから、コードのどこかでは具体化をしないといけないと思う。
じゃないとコードから業務知識が失われると思うんだわ。
def type_alpha?
end
とか
class RipoD < Drink
end
とか。
抽象クラスと具体クラス。
公開するメソッドは抽象的でいいんだけどprivateメソッドは具体的な名前にする



ishigaki
  1分前
でもそこから、コードのどこかでは具体化をしないといけないと思う。
じゃないとコードから業務知識が失われると思うんだわ。
具体的な業務知識はテストコードに書けと言っているのが、 sandi mets のオブジェクト指向実践入門だと思います。
でも、本当にそうできるんだっけ？という根強い違和感が、RSpec書かない、書けないにつながっているのかもと自分を振り返って思った。
そう、サービスクラスでもなんでもいいけれど、プロダクトコードのどこかに具体化された業務知識は書いておきたい。
simple and easy を目指したい。