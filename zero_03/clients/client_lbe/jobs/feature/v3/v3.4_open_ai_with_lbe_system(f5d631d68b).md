v3.4_prompt_composition(f5d631d68b)
---

## 方針
作ってリファクタリング

## 参考
[プロンプト５](https://lbejzeroichi.kibe.la/notes/249)

## ver
### 雑に作る
- ✅v3.4.0 フォームを修正する
- ✅v3.4.1 修正したフォームで、不完全でいいので、合成した問い合わせができること
### 横入り
- ✅for GVS
- ✅paste the placeholders
- ✅AIへのフィードバック
### リファクアリング
- ✅v3.4.2 Form層を取り入れて、[modelの生成、保存]、[プロンプト合成]、[問い合わせ]、保存、などの処理を指示する
- ✅v3.4.3 [model]を修正=> カラムを増やす
- ✅v3.4.4 [問い合わせ]を修正=> call_azure_open_ai から、modelの生成と保存、プロンプト合成、保存を剥がし、問い合わせと副作用に分離する
- ⛔️v3.4.5 [プロンプト合成]をドメインとして作成=> input: 自身の情報, output: request_params
### 全フォームに対応する
- ✅v3.4.6 全てのフォームの内容を受け付ける
- ⛔️v3.4.7 [プロンプト合成]に、全体システムメッセージを固定で追加する
- ⛔️v3.4.8 [プロンプト合成]に、個別システムメッセージを固定で追加する（ヒアリングがない場合、「ヒアリング内容を教えてください」と指示してください、など）
### システムメッセージをyukoさんが修正できるようにする
- ✅v3.4.x AIの回答、AIへのフィードバックを、フォームに追加して、対応する
### システムメッセージをDBで修正できるようにする
- ✨v3.4.x 個別システムメッセージ、全体システムメッセージをDBで修正できるようにする


