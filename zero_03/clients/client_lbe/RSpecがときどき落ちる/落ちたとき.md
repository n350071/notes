```sh
Failures:

  1) Staff::Nowsta::Compensations::Form#import ファイルが渡されているとき 該当するデータが全て存在するとき さらに、一部のemail(ishigaki)がUserとしても存在するとき、 trueが返るが、ishigakiのデータの謝礼金はCSVの値で更新されない
     Failure/Error: _query(sql, @query_options.merge(options))

     ActiveRecord::StatementInvalid:
       Mysql2::Error: Unknown MySQL error
     # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
     # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
     # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
     # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'
     # ------------------
     # --- Caused by: ---
     # Mysql2::Error:
     #   Unknown MySQL error
     #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  2) Staff::Nowsta::Compensations::Form#import ファイルが渡されているとき 該当するデータが一部だけ存在するとき trueが返り、各データの謝礼金がCSVの値で更新されるが、更新されなかったデータの警告が取得できること
     Got 0 failures and 2 other errors:

     2.1) Failure/Error: pjl = create(:program_join_leader, program: program, leader: leader)

          ActiveRecord::RecordNotUnique:
            Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
          # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
          # ./spec/forms/staff/nowsta/compensations/form_spec.rb:106:in `block (5 levels) in <top (required)>'
          # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
          # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
          # -e:1:in `<main>'
          # ------------------
          # --- Caused by: ---
          # Mysql2::Error:
          #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
          #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

     2.2) Failure/Error: _query(sql, @query_options.merge(options))

          ActiveRecord::StatementInvalid:
            Mysql2::Error: SAVEPOINT active_record_1 does not exist
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
          # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
          # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
          # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
          # -e:1:in `<main>'
          # ------------------
          # --- Caused by: ---
          # Mysql2::Error:
          #   SAVEPOINT active_record_1 does not exist
          #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  3) Staff::Programs::Form#options プログラムデータ作成時に表示するoption一覧が取得できること
     Failure/Error: expect(leader_options.size).to eq 2

       expected: 2
            got: 0

       (compared using ==)
     # ./spec/forms/staff/programs/form_spec.rb:16:in `block (3 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  4) Staff::Programs::Form#create (正常にデータが作成されるとき) (参加するリーダー情報がパラメータでのみ渡されているとき) それぞれのデータが作成されること
     Failure/Error: expect(call_create).to eq true

       expected: true
            got: false

       (compared using ==)

       Diff:
       @@ -1 +1 @@
       -true
       +false

     # ./spec/forms/staff/programs/form_spec.rb:61:in `block (5 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  5) Staff::Programs::Form#create (正常にデータが作成されるとき) (参加するリーダー情報がCSVで渡されているとき) 参加するリーダーのデータが作成されること
     Failure/Error: expect(call_create).to eq true

       expected: true
            got: false

       (compared using ==)

       Diff:
       @@ -1 +1 @@
       -true
       +false

     # ./spec/forms/staff/programs/form_spec.rb:113:in `block (5 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  6) Staff::Programs::Form#create (データが作成されないとき) (CSVに存在しないメールアドレスが複数あるとき) データが作成されず、存在しないメールアドレスのエラーメッセージをまとめて取得できること
     Failure/Error: expect(JSON.parse(form.error_messages.first)).to eq(["Leaders not exist.", "not_exist@example.com", "not_exist2@example.com"])

       expected: ["Leaders not exist.", "not_exist@example.com", "not_exist2@example.com"]
            got: ["Leaders not exist.", "l1@example.com", "not_exist@example.com", "l2@example.com", "not_exist2@example.com"]

       (compared using ==)
     # ./spec/forms/staff/programs/form_spec.rb:150:in `block (6 levels) in <top (required)>'
     # ./spec/forms/staff/programs/form_spec.rb:146:in `block (5 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  7) Staff::Programs::Form#update (正常にデータが更新されるとき) (参加するリーダー情報がパラメータでのみ渡されているとき) それぞれのデータが更新されること
     Failure/Error: program = Program.find(params[:id])

     ActiveRecord::RecordNotFound:
       Couldn't find Program with 'id'=0
     # ./app/forms/staff/programs/form.rb:36:in `update'
     # ./spec/forms/staff/programs/form_spec.rb:158:in `block (3 levels) in <top (required)>'
     # ./spec/forms/staff/programs/form_spec.rb:197:in `block (5 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  8) Staff::Programs::Form#update (正常にデータが更新されるとき) (参加するリーダー情報がCSVで渡されているとき) 参加するリーダーのデータが作成されること
     Failure/Error: program = Program.find(params[:id])

     ActiveRecord::RecordNotFound:
       Couldn't find Program with 'id'=0
     # ./app/forms/staff/programs/form.rb:36:in `update'
     # ./spec/forms/staff/programs/form_spec.rb:158:in `block (3 levels) in <top (required)>'
     # ./spec/forms/staff/programs/form_spec.rb:253:in `block (5 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  9) Staff::Programs::Form#update (データが更新されないとき) (CSVに存在しないメールアドレスが複数あるとき) データが作成されず、存在しないメールアドレスのエラーメッセージをまとめて取得できること
     Failure/Error: program = Program.find(params[:id])

     ActiveRecord::RecordNotFound:
       Couldn't find Program with 'id'=0
     # ./app/forms/staff/programs/form.rb:36:in `update'
     # ./spec/forms/staff/programs/form_spec.rb:158:in `block (3 levels) in <top (required)>'
     # ./spec/forms/staff/programs/form_spec.rb:287:in `block (5 levels) in <top (required)>'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
     # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
     # -e:1:in `<main>'

  10) Staff::Programs::Form#update (データが更新されないとき) (kintone_program_idが重複しているとき) データの更新ができること
      Failure/Error: program = Program.find(params[:id])

      ActiveRecord::RecordNotFound:
        Couldn't find Program with 'id'=0
      # ./app/forms/staff/programs/form.rb:36:in `update'
      # ./spec/forms/staff/programs/form_spec.rb:158:in `block (3 levels) in <top (required)>'
      # ./spec/forms/staff/programs/form_spec.rb:313:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  11) Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (正常系)プログラムが１つだけであり、メールアドレスが重複するとき 重複を取り除いたメールアドレスのリストが返ること
      Failure/Error: raise(StandardError, emails_not_exists_on_leaders.unshift("Leaders not exist."))

      StandardError:
        ["Leaders not exist.", "alice_johnson@example.com", "benjamin_wilson@example.com", "christopher_lee@example.com"]
      # ./lib/lbe/nowsta/private/collection.rb:80:in `extract_email_for_bulk_registration_to_a_program'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:48:in `block (3 levels) in <top (required)>'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:67:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  12) Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (正常系)User（スタッフ）として登録のあるメールアドレスが存在するとき Userとして登録のあるメールアドレスを省いたリストが返ること
      Failure/Error: raise(StandardError, emails_not_exists_on_leaders.unshift("Leaders not exist."))

      StandardError:
        ["Leaders not exist.", "benjamin_wilson@example.com", "christopher_lee@example.com"]
      # ./lib/lbe/nowsta/private/collection.rb:80:in `extract_email_for_bulk_registration_to_a_program'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:48:in `block (3 levels) in <top (required)>'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:86:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  13) Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (正常系)User（スタッフ）として登録のあるメールアドレスが存在するとき 同メールアドレスがLeaderとしても登録されている場合 同上
      Failure/Error: raise(StandardError, emails_not_exists_on_leaders.unshift("Leaders not exist."))

      StandardError:
        ["Leaders not exist.", "benjamin_wilson@example.com", "christopher_lee@example.com"]
      # ./lib/lbe/nowsta/private/collection.rb:80:in `extract_email_for_bulk_registration_to_a_program'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:48:in `block (3 levels) in <top (required)>'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:92:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  14) Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (異常系)Leaderとして登録のないメールアドレスが存在するとき 例外のメッセージが正しいこと
      Failure/Error: expect(JSON.parse(exception.message)).to eq expected_errar_message_array

        expected: ["Leaders not exist.", "alice_johnson@example.com", "benjamin_wilson@example.com"]
             got: ["Leaders not exist.", "alice_johnson@example.com", "benjamin_wilson@example.com", "christopher_lee@example.com"]

        (compared using ==)
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:132:in `rescue in block (4 levels) in <top (required)>'
      # ./spec/lib/lbe/nowsta/private/collection_spec.rb:129:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'
      # ------------------
      # --- Caused by: ---
      # StandardError:
      #   ["Leaders not exist.", "alice_johnson@example.com", "benjamin_wilson@example.com", "christopher_lee@example.com"]
      #   ./lib/lbe/nowsta/private/collection.rb:80:in `extract_email_for_bulk_registration_to_a_program'

  15) LeaderMailer#notify_receiving_expense_request 交通費がある場合 リーダーにメールが送信されること
      Got 2 failures from failure aggregation block.
      # ./spec/mailers/leader_mailer_spec.rb:101:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

      15.1) Failure/Error: expect(body).to be_include("extra_receipt.jpg")
              expected `"Dear LbE Global Leaders\n\nWe would like to thank you for your participation in MIT School Program. ...t: \nReceipt: \n\n### Fieldwork Other - 5\nType of Expense: \nAmount Spent: \nReceipt: \n\n\n\n\n\n".include?("extra_receipt.jpg")` to be truthy, got false
            # ./spec/mailers/leader_mailer_spec.rb:117:in `block (5 levels) in <top (required)>'
            # ./spec/mailers/leader_mailer_spec.rb:101:in `block (4 levels) in <top (required)>'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

      15.2) Failure/Error: expect(body).to be_include("No receipt Checked")
              expected `"Dear LbE Global Leaders\n\nWe would like to thank you for your participation in MIT School Program. ...t: \nReceipt: \n\n### Fieldwork Other - 5\nType of Expense: \nAmount Spent: \nReceipt: \n\n\n\n\n\n".include?("No receipt Checked")` to be truthy, got false
            # ./spec/mailers/leader_mailer_spec.rb:118:in `block (5 levels) in <top (required)>'
            # ./spec/mailers/leader_mailer_spec.rb:101:in `block (4 levels) in <top (required)>'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
            # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

  16) AiFeatures::ProgramInstruction#call_azure_open_ai 正常系 message_hearingが設定されているとき 値がセットされること
      Failure/Error:
        create(:ai_features_program_instruction,
          message_hearing: "hello! How are you?",
          message_system: "",
          llm_model_name: "gpt-3.5-turbo",
          temperature: 0.7,
          choice_content: "",
          finish_reason: "",
          usage_total_tokens: 0,
          user: user
        )

      NoMethodError:
        undefined method `each' for nil:NilClass
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/decorator/new_constructor.rb:9:in `new'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/decorator.rb:16:in `send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/decorator.rb:12:in `method_missing'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/configuration.rb:23:in `block in initialize'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/ai_features/program_instruction_spec.rb:44:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  17) Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] 振込先に対応した文字コードで生成されていること
      Failure/Error:
        build(:leader_payments_bank_transfer,
          bank_number: "406",
          branch_number: "103",
          account_type: "1",
          account_number: "123456789",
          account_name: "ｻｶﾓﾄ ﾀﾛｳ",
          amount: 123400,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:38:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:36:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  18) Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] メタ行が作成されること
      Failure/Error:
        build(:leader_payments_bank_transfer,
          bank_number: "406",
          branch_number: "103",
          account_type: "1",
          account_number: "123456789",
          account_name: "ｻｶﾓﾄ ﾀﾛｳ",
          amount: 123400,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:38:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:36:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  19) Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] 振り込み行が作成されること
      Failure/Error:
        build(:leader_payments_bank_transfer,
          bank_number: "406",
          branch_number: "103",
          account_type: "1",
          account_number: "123456789",
          account_name: "ｻｶﾓﾄ ﾀﾛｳ",
          amount: 123400,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:38:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:36:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  20) Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] チェックサム行が作成されること
      Failure/Error:
        build(:leader_payments_bank_transfer,
          bank_number: "406",
          branch_number: "103",
          account_type: "1",
          account_number: "123456789",
          account_name: "ｻｶﾓﾄ ﾀﾛｳ",
          amount: 123400,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:38:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:36:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  21) Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] 最終行が作成されること
      Failure/Error:
        build(:leader_payments_bank_transfer,
          bank_number: "406",
          branch_number: "103",
          account_type: "1",
          account_number: "123456789",
          account_name: "ｻｶﾓﾄ ﾀﾛｳ",
          amount: 123400,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:38:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:36:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  22) Domains::LeaderPayments::BankTransfers::BuildBankCsv#call 想定通りのデータが揃っているとき 各振り込みデータをもとに銀行振り込みCSVが作成されること
      Failure/Error: let!(:csv_meta_info) { create(:leader_payments_bank_transfer_csv_meta_info, transfer_date: "2023/08/15", target_term: target_term) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:147:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  23) Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call [各行のテスト] 振込先に対応した文字コードで生成されていること
      Failure/Error:
        create(:leader_payments_salary,
          leader: create(:leader, name: "Alice Johnson"),
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:47:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:42:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:35:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  24) Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call [各行のテスト] ヘッダー行が作成されること
      Failure/Error:
        create(:leader_payments_salary,
          leader: create(:leader, name: "Alice Johnson"),
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:47:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:42:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:35:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  25) Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call [各行のテスト] 行データが作成されていること
      Failure/Error:
        create(:leader_payments_salary,
          leader: create(:leader, name: "Alice Johnson"),
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:47:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:42:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:35:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  26) Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call 想定通りのデータが揃っているとき 各振り込みデータをもとに銀行振り込みCSVが作成されること
      Failure/Error: create(:leader_payments_salary, leader: create(:leader, name: "坂本 太郎")),

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:118:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:108:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  27) Domains::LeaderPayments::Salaries::CombineExpenses#call 経費データを統合したHashが取得できること
      Failure/Error: let!(:salary) { build(:leader_payments_salary) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/salaries/combine_expenses_spec.rb:37:in `block (3 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/salaries/combine_expenses_spec.rb:36:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  28) Domains::LeaderPayments::Salaries::SeparateExpenses#call 統合した経費データを分離したHashが取得できること
      Failure/Error: let!(:salary) { build(:leader_payments_salary) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/salaries/separate_expenses_spec.rb:37:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  29) Domains::LeaderPayments::Salaries::Totalize#call 全てのデータに金額が入っているとき 給与の合計計算結果が取得されること
      Failure/Error:
        build(:leader_payments_salary,
          net_payment: 32700,
          total_expenses: 8000,
          total_compensation: 30000,
          advanced_compensation: 5000,
          total_deduction_amount: 300,
          total_extra_time_amount: 300,
          withholding_tax: 300,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/salaries/totalize_spec.rb:39:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  30) Domains::LeaderPayments::Salaries::Totalize#call 全てのデータに金額が入っているとき 値がnilのデータが混ざっているとき エラーが起きずに給与の合計計算結果が取得されること
      Failure/Error:
        build(:leader_payments_salary,
          net_payment: 85400,
          total_expenses: 7000,
          total_compensation: 88000,
          advanced_compensation: 10000,
          total_deduction_amount: 500,
          total_extra_time_amount: 1500,
          withholding_tax: 600,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/salaries/totalize_spec.rb:79:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  31) Domains::LeaderPayments::TargetTerms::CreateBankTransfers#call [正常系] (対象期間に、３人のリーダーが１件ずつ給与を持ち、うち２人が共通の銀行口座を持っている場合) 既存の未完了データのみが削除され、３件の銀行振込データと、１件の銀行振込メタデータが作成されること
      Failure/Error: create(:leader, id: 100, bank_info: bank_infos[0]),

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_bank_infos in model LeaderPayments::BankInfo.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/target_terms/create_bank_transfers_spec.rb:30:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  32) Domains::LeaderPayments::TargetTerms::CreateBankTransfers#call [異常系] トランザクション中に例外が発生したとき 失敗の結果が返り、エラー情報が取得できること
      Failure/Error:
        target_term.bank_transfers.uncompleted.each do |bank_transfer|
          bank_transfer.destroy!
        end

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # ./app/models/domains/leader_payments/target_terms/create_bank_transfers.rb:91:in `destroy_uncompled_bank_transfers!'
      # ./app/models/domains/leader_payments/target_terms/create_bank_transfers.rb:25:in `call'
      # ./spec/models/domains/leader_payments/target_terms/create_bank_transfers_spec.rb:134:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  33) Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#generate_body その期間に給与データが存在しないとき リーダーの行がないCSVが生成されること
      Failure/Error: salaries = target_term.salaries.preload_traceability

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # ./app/models/domains/leader_payments/target_terms/create_payslip_csv.rb:69:in `generate_body'
      # ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:64:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:71:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  34) Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#generate_body その期間に給与データが存在するとき 区切り文字付きの数値でCSVが生成されること
      Failure/Error: create(:leader_payments_salary, target_term: target_term)

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:89:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  35) Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#build_leader_row 給与データが計算されていない状態のとき エラーが起きず各値が0の結果が取得できること
      Failure/Error: let!(:bank_transfer_csv_meta_info) { create(:leader_payments_bank_transfer_csv_meta_info, target_term: target_term, transfer_date: "2023/08/15") }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  36) Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#build_leader_row 給与データが計算されているとき 各値が計算されたの結果が取得できること
      Failure/Error: let!(:bank_transfer_csv_meta_info) { create(:leader_payments_bank_transfer_csv_meta_info, target_term: target_term, transfer_date: "2023/08/15") }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  37) Domains::LeaderPayments::TargetTerms::CreateSalaries#call (正常系) (対象期間の最終日から6ヶ月以内のAcceptedなExpenseが存在する場合) リーダー毎に、給与と中間テーブルが作成されること
      Got 0 failures and 2 other errors:

      37.1) Failure/Error: let!(:bob_personal_info) { create(:leaders_personal_info, leader: bob, is_dependent_deduction: true) }

            ActiveRecord::InvalidForeignKey:
              Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
            # ./spec/models/domains/leader_payments/target_terms/create_salaries_spec.rb:28:in `block (5 levels) in <top (required)>'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
            # -e:1:in `<main>'
            # ------------------
            # --- Caused by: ---
            # Mysql2::Error:
            #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
            #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

      37.2) Failure/Error: _query(sql, @query_options.merge(options))

            ActiveRecord::StatementInvalid:
              Mysql2::Error: SAVEPOINT active_record_1 does not exist
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
            # -e:1:in `<main>'
            # ------------------
            # --- Caused by: ---
            # Mysql2::Error:
            #   SAVEPOINT active_record_1 does not exist
            #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  38) Domains::LeaderPayments::TargetTerms::CreateSalaries#call 保存中にエラーが発生したとき エラーの結果が返ること
      Failure/Error:
        _salaries.where(bank_transfer_id: LeaderPayments::BankTransfer.uncompleted)
                 .or(_salaries.where(bank_transfer_id: nil))

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # ./app/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries.rb:38:in `get_uncompleted_salaries'
      # ./app/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries.rb:17:in `call'
      # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/domain_delegate.rb:52:in `block in domain_delegate'
      # ./app/models/domains/leader_payments/target_terms/create_salaries.rb:23:in `call'
      # ./spec/models/domains/leader_payments/target_terms/create_salaries_spec.rb:171:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  39) Domains::LeaderPayments::TargetTerms::DestroyUncompletedSalaries#call [正常系] 振り込みが未完了もしくは振り込みデータがないSalaryデータだけが削除されること
      Failure/Error: let!(:transfer1) { create(:leader_payments_bank_transfer, :uncompleted, target_term: target_term) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries_spec.rb:29:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries_spec.rb:21:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  40) Domains::LeaderPayments::TargetTerms::DestroyUncompletedSalaries#call [異常系] トランザクション中にエラーが発生したとき 処理失敗の結果が返ること
      Failure/Error:
        _salaries.where(bank_transfer_id: LeaderPayments::BankTransfer.uncompleted)
                 .or(_salaries.where(bank_transfer_id: nil))

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
      # ./app/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries.rb:38:in `get_uncompleted_salaries'
      # ./app/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries.rb:17:in `call'
      # ./spec/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries_spec.rb:72:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  41) Domains::Leaders::ImportCsv#call parserが指定されていないとき (正常系) (一部のメールアドレスが、Userとして登録されている状況) (一部のメールアドレスが、すでにLeaderとして登録されている状況) 正常に処理が完了すること
      Failure/Error: let!(:leader) { create(:leader, email: "hichemfel@gmail.com", name: "test", bank_info: bank_info) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table leader_payments_bank_infos in model LeaderPayments::BankInfo.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/leaders/import_csv_spec.rb:57:in `block (7 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  42) Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） (６件中、４件の不正なレコードが含まれているとき) 戻り値に不正なレコードが含まれていること
      Failure/Error: expect(return_hash[:status]).to be true

        expected true
             got false
      # ./spec/models/domains/leaders/import_csv_spec.rb:140:in `block (6 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  43) Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） (６件中、４件の不正なレコードが含まれているとき) 不正なレコード以外は登録されること
      Failure/Error: expect{ subject }.to change{ Leader.count }.by(2)

      ActiveRecord::StatementInvalid:
        Mysql2::Error: SAVEPOINT active_record_1 does not exist
      # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
      # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
      # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
      # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
      # ./spec/models/domains/leaders/import_csv_spec.rb:144:in `block (7 levels) in <top (required)>'
      # ./spec/models/domains/leaders/import_csv_spec.rb:144:in `block (6 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'
      # ------------------
      # --- Caused by: ---
      # Mysql2::Error:
      #   SAVEPOINT active_record_1 does not exist
      #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  44) Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (すべてのemailが存在しないとき) すべて新規に作成され、認証メールが飛ばずに、パスワード等の初期値が設定されていること
      Failure/Error: expect{ subject }.to change{ Leader.count }.by(10)
        expected `Leader.count` to have changed by 10, but was changed by 0
      # ./spec/models/domains/leaders/import_csv_spec.rb:156:in `block (7 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  45) Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (すべてのemailが存在しないとき) 戻り値に不正なレコードが含まれていないこと
      Failure/Error: expect(return_hash[:status]).to be true

        expected true
             got false
      # ./spec/models/domains/leaders/import_csv_spec.rb:188:in `block (7 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  46) Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (一部のemailが存在するとき) 既存のemailの内容に関しては、CSV値で渡された値のみが更新されること
      Got 0 failures and 2 other errors:

      46.1) Failure/Error: before { create(:leaders_personal_info, leader: leaders[0]) }

            ActiveRecord::InvalidForeignKey:
              Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
            # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
            # ./spec/models/domains/leaders/import_csv_spec.rb:202:in `block (7 levels) in <top (required)>'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
            # -e:1:in `<main>'
            # ------------------
            # --- Caused by: ---
            # Mysql2::Error:
            #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
            #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

      46.2) Failure/Error: _query(sql, @query_options.merge(options))

            ActiveRecord::StatementInvalid:
              Mysql2::Error: SAVEPOINT active_record_1 does not exist
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
            # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
            # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
            # -e:1:in `<main>'
            # ------------------
            # --- Caused by: ---
            # Mysql2::Error:
            #   SAVEPOINT active_record_1 does not exist
            #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  47) Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (一部のemailがUserとして存在するとき) Userとして存在するemailは、更新されないこと
      Failure/Error: expect{ subject }.to change{ Leader.count }.by(8)
        expected `Leader.count` to have changed by 8, but was changed by 0
      # ./spec/models/domains/leaders/import_csv_spec.rb:244:in `block (7 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  48) Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が１つだけある場合) (案件が締め処理済みのとき) (管理案件がすでにFinalize済みの場合) 変化しないこと
      Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, revenue_closure_at:, is_revenue_finalized:, program:) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:28:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  49) Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が１つだけある場合) (案件が締め処理済みのとき) (Finalize済みでない場合) 管理案件の売上を確定します
      Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, revenue_closure_at:, is_revenue_finalized:, program:) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:28:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  50) Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が１つだけある場合) (案件がまだ締め処理されていないとき) (Finalize済みでない場合) 締め処理されていないものは、当然Finalizeしないので、変化しないこと
      Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, revenue_closure_at:, is_revenue_finalized:, program:) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:28:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  51) Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が複数ある場合) (案件が締め処理済みのとき) (Finalize済みでない場合) 管理案件の売上を確定します
      Failure/Error: create(:manage_program, :with_must_associations, revenue_closure_at: Time.zone.parse("2020-01-01 00:00:00"), is_revenue_finalized: false, program: programs[0]),

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:71:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  52) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::Fetch#call スプレッドシートから取得できたデータで、レコードが作成・更新されること
      Failure/Error: target = Manage::ProfitSyncAgents::GoogleSheetCredit.find_by!(uniq_condition)

      ActiveRecord::RecordNotFound:
        Couldn't find Manage::ProfitSyncAgents::GoogleSheetCredit with [WHERE `manage_profit_sync_agents_google_sheet_credits`.`fetch_uniq_key` = ?]
      # ./app/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch.rb:77:in `update'
      # ./app/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch.rb:58:in `upsert_by_fetch'
      # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/domain_delegate.rb:52:in `block in domain_delegate'
      # ./app/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch.rb:41:in `block in upsert_all_by_fetch'
      # ./app/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch.rb:40:in `each'
      # ./app/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch.rb:40:in `upsert_all_by_fetch'
      # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/domain_delegate.rb:82:in `block in class_domain_delegate'
      # ./app/models/domains/manage/profit_sync_agents/google_sheet_credits/fetch.rb:52:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/fetch_spec.rb:44:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  53) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch insert処理になるレコードのとき 保存が成功するとき trueが返り、レコードがDBに作成されていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/google_sheet_credits.rb:53:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:39:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  54) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch insert処理になるレコードのとき 保存が失敗するとき falseが返り、エラー情報が入っていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/google_sheet_credits.rb:53:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:52:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  55) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch update処理になるレコードのとき 保存が成功するとき DBの値が更新されていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/google_sheet_credits.rb:53:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:67:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  56) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch update処理になるレコードのとき 保存が失敗するとき falseが返り、エラー情報が入っていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/google_sheet_credits.rb:53:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:67:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  57) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_all_by_fetch 全てのデータがUpsertに成功するとき 処理成功の結果が取得できること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/google_sheet_credits.rb:53:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:164:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  58) Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_all_by_fetch 一部のデータがUpsertに失敗するとき 処理失敗の結果が取得できること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/google_sheet_credits.rb:53:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:182:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  59) Domains::Manage::ProfitSyncAgents::Kintones::Fetch#call 対象案件が1件のとき 未取得のとき キントーン情報が新規に登録されていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/kintones/fetch_spec.rb:40:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  60) Domains::Manage::ProfitSyncAgents::Kintones::Fetch#call 対象案件が1件のとき 取得済のとき キントーン情報が更新されていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/kintones/fetch_spec.rb:40:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  61) Domains::Manage::ProfitSyncAgents::Kintones::Fetch#call 対象案件が3件で、1件は取得済のとき それぞれのデータの保存・更新処理が呼び出されていること
      Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

      ActiveRecord::IrreversibleOrderError:
        Relation has no current order and table has no primary key to be used as default order
      # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/kintones/fetch_spec.rb:112:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  62) Domains::Manage::ProfitSyncAgents::LbeSystems::Fetch#call fetch済みの案件があるとき kintone_idの入っている案件を取得(update)すること
      Failure/Error: let!(:lbe_system_0) { create(:manage_profit_sync_agents_lbe_system, program_id: program_fetched_0.id, kintone_code: "0000", profit_sync_agent: profit_sync_agent) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/lbe_systems/fetch_spec.rb:36:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  63) Domains::Manage::ProfitSyncAgents::LbeSystems::Fetch#call プログラムのkintone_codeが変わったとき 更新されること
      Failure/Error: let!(:lbe_system) { create(:manage_profit_sync_agents_lbe_system, program:, kintone_code:, profit_sync_agent:) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/lbe_systems/fetch_spec.rb:61:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  64) Domains::Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequests::Fetch 新規作成と更新処理 #call APIクライアントから戻ってきた振込依頼書データを使って、既存のものは更新、新規のものは作成すること
      Failure/Error:
        create(:manage_profit_sync_agents_money_forward_ex_report_transfer_request,
          profit_sync_agent: profit_sync_agent,
          number: "1", report_id: "0001", form_transfer_amount: "1,001"
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:59:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  65) Domains::Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequests::Fetch 取得内容の確認のテスト #call approvedの場合 取得内容が正しいこと
      Failure/Error: @report_ids ||= profit_sync_agent.money_forward_ex_report_transfer_requests.pluck(:report_id)

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:71:in `report_ids'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:62:in `find_or_initialize_mf_by'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:55:in `create_or_update'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:45:in `block in call'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:44:in `each'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:44:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:88:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:126:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  66) Domains::Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequests::Fetch 取得内容の確認のテスト #call unsubmittedの場合 取得したものには、nullが入っていることがあるが、空白にして保存しておけること
      Failure/Error: @report_ids ||= profit_sync_agent.money_forward_ex_report_transfer_requests.pluck(:report_id)

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:71:in `report_ids'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:62:in `find_or_initialize_mf_by'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:55:in `create_or_update'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:45:in `block in call'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:44:in `each'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch.rb:44:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:88:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:172:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  67) Domains::Manage::ProfitSyncAgents::MoneyForwardExpenses::Fetch 新規作成と更新処理 #call APIクライアントから戻ってきたExpensesについて、既存のものは更新、新規のものは作成する
      Failure/Error:
        create(:manage_profit_sync_agents_money_forward_expense,
          profit_sync_agent: profit_sync_agent,
          number: "1", id: "0001", amount: "1001", mf_id: "1"
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch_spec.rb:65:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  68) Domains::Manage::ProfitSyncAgents::MoneyForwardExpenses::Fetch 取得内容の確認のテスト #call 取得内容が正しいこと
      Failure/Error: @mf_ids ||= profit_sync_agent.money_forward_expenses.pluck(:mf_id)

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
      # ./app/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch.rb:78:in `mf_ids'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch.rb:69:in `find_or_initialize_mf_by'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch.rb:62:in `create_or_update'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch.rb:53:in `block in call'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch.rb:52:in `each'
      # ./app/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch.rb:52:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch_spec.rb:92:in `block (4 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch_spec.rb:134:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  69) Domains::Manage::ProfitSyncAgents::SyncAgent#call 【開発中】draft Agentがないとき 【開発中】ダミーデータを入れること
      Failure/Error: expect { subject }.to change { Manage::Agent.count }.by(1)
        expected `Manage::Agent.count` to have changed by 1, but was changed by 0
      # ./spec/models/domains/manage/profit_sync_agents/sync_agent_spec.rb:26:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  70) Domains::Manage::ProfitSyncAgents::SyncAgent#call 【開発中】draft Agentがあるとき 【開発中】ダミーデータが増えないこと
      Failure/Error: expect(Manage::Agent.count).to eq(1)

        expected: 1
             got: 0

        (compared using ==)
      # ./spec/models/domains/manage/profit_sync_agents/sync_agent_spec.rb:37:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  71) Domains::Manage::ProfitSyncAgents::SyncClient#call 【開発中】draft Clientがないとき 【開発中】ダミーデータを入れること
      Failure/Error: client.save

      ActiveModel::MissingAttributeError:
        missing attribute: id
      # ./app/models/domains/manage/profit_sync_agents/sync_client.rb:21:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/sync_client_spec.rb:20:in `block (3 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/sync_client_spec.rb:26:in `block (6 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/sync_client_spec.rb:26:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'
      # ------------------
      # --- Caused by: ---
      # ActiveModel::MissingAttributeError:
      #   missing attribute: id
      #   ./app/models/domains/manage/profit_sync_agents/sync_client.rb:21:in `call'

  72) Domains::Manage::ProfitSyncAgents::SyncClient#call 【開発中】draft Clientがあるとき 【開発中】ダミーデータが増えないこと
      Failure/Error: expect(Manage::Client.count).to eq(1)

        expected: 1
             got: 0

        (compared using ==)
      # ./spec/models/domains/manage/profit_sync_agents/sync_client_spec.rb:35:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  73) Domains::Manage::ProfitSyncAgents::SyncEmployee#call 【開発中】draft Employeeがないとき 【開発中】ダミーデータを入れること
      Failure/Error: employee.team = Manage::Team.find_by(name: "Dummy Team")

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_teams in model Manage::Team.
      # ./app/models/domains/manage/profit_sync_agents/sync_employee.rb:21:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/sync_employee_spec.rb:20:in `block (3 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/sync_employee_spec.rb:28:in `block (6 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/sync_employee_spec.rb:28:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  74) Domains::Manage::ProfitSyncAgents::SyncEmployee#call 【開発中】draft Employeeがあるとき 【開発中】ダミーデータが増えないこと
      Failure/Error: let!(:employee) { create(:manage_employee, name: "Dummy Employee", user: user, team: team) }

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_teams in model Manage::Team.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_employee_spec.rb:37:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  75) Domains::Manage::ProfitSyncAgents::SyncProgramContributionLevel#call 【開発中】draft ダミー貢献度がないとき 【開発中】ダミーデータを入れること
      Failure/Error: contribution_level.save

      ActiveModel::MissingAttributeError:
        missing attribute: id
      # ./app/models/domains/manage/profit_sync_agents/sync_program_contribution_level.rb:21:in `call'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_contribution_level_spec.rb:20:in `block (3 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_contribution_level_spec.rb:26:in `block (6 levels) in <top (required)>'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_contribution_level_spec.rb:26:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'
      # ------------------
      # --- Caused by: ---
      # ActiveModel::MissingAttributeError:
      #   missing attribute: id
      #   ./app/models/domains/manage/profit_sync_agents/sync_program_contribution_level.rb:21:in `call'

  76) Domains::Manage::ProfitSyncAgents::SyncProgramContributionLevel#call 【開発中】draft ダミー貢献度があるとき 【開発中】ダミーデータが増えないこと
      Failure/Error: expect(Manage::ProgramContributionLevel.count).to eq(1)

        expected: 1
             got: 0

        (compared using ==)
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_contribution_level_spec.rb:37:in `block (5 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  77) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostCredit#call [未同期のクレジットカードデータ] フェッチされていたデータから売上原価が作成されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
          kintone_code: "11234",
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_credit_spec.rb:23:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  78) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostCredit#call [同期済のクレジットカードデータ] 対象の売上原価が更新されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
          kintone_code: "11234",
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_credit_spec.rb:23:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  79) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call 振込依頼書のステータス status: "approved", expected: 1 approvedのものだけが同期対象になること
      Failure/Error:
        create(:manage_program, :with_must_associations,
          kintone_code: "12326",
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb:23:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  80) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call 振込依頼書のステータス status: "unsubmitted", expected: 0 approvedのものだけが同期対象になること
      Failure/Error:
        create(:manage_program, :with_must_associations,
          kintone_code: "12326",
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb:23:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  81) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call [未同期の振込依頼書] fetchされていたデータから売上原価が作成されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
          kintone_code: "12326",
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb:23:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  82) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call [同期済の振込依頼] 対象の売上原価が更新されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
          kintone_code: "12326",
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb:23:in `block (3 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  83) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき 親であるManage::Programがfinalize処理されたときの挙動について 新規作成 作成されないこと
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  84) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき 親であるManage::Programがfinalize処理されたときの挙動について 既存更新 更新されないこと
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  85) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system スタブ化したテストの、スタブを解除したとき メソッドに反応すること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  86) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 存在していた売上原価は更新され、存在していなかった売上原価は作成されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  87) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 更新内容の確認 内容が更新されること(例としてGL謝礼金を使います)
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  88) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GL謝礼金が更新されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  89) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GL食費が正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  90) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLローカル交通費が正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  91) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLその他交通費が正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  92) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLフィールドワーク交通費が正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  93) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLフィールドワークその他が正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  94) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLインターネットが正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  95) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLチャーターバスが正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  96) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GL地域外交通費が正しい値になっていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  97) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 既存の売上原価レコードの元になったLbEシステム案件のkintone_codeが変更されたとき 既存の売上原価レコードのひも付き先の案件が変わること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  98) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき その同期対象の案件と、そのコピー案件に対して、複数のLbeSystemが該当するとき １つのManage::Programに対して、勘定科目名が同じ売上原価が２つずつ作成されること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  99) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期内容の確認 同期対象の項目が全て同期されていること
      Failure/Error:
        create(:manage_program, :with_must_associations,
        name: "X高校",
        kintone_code: "kintone_code_01",
        program: program,
        )

      ActiveRecord::UnknownPrimaryKey:
        Unknown primary key for table manage_clients in model Manage::Client.
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
      # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
      # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
      # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
      # -e:1:in `<main>'

  100) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "8999", expected: true 経費科目コードが9000~9999のときは、同期されないこと
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  101) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "9000", expected: false 経費科目コードが9000~9999のときは、同期されないこと
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  102) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "9999", expected: false 経費科目コードが9000~9999のときは、同期されないこと
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  103) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "10000", expected: true 経費科目コードが9000~9999のときは、同期されないこと
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  104) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "", expected: true 経費科目コードが9000~9999のときは、同期されないこと
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  105) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致しないとき 同期されないこと
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  106) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき テスト前提の確認
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  107) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき project_codeが変更されたとき LbEシステムの案件に、kintone_codeを登録していなかったとき 既存のMF経費明細のひも付き先プロジェクトが変わったと認識するが、ひも付き先を特別な管理案件に変更すること
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  108) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき project_codeが変更されたとき LbEシステムの案件に、kintone_codeを登録していたとき 既存のMF経費明細のひも付き先プロジェクトが変わったと認識し、管理案件を変更すること
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  109) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき mf_idが変更されたとき mf_idが異なれば、別のMF経費明細と認識されるため、新規の売上原価が作成されること
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  110) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき MoneyForwardの振込依頼書が存在するとき 同期対象案件のkintone_codeと合致する振込依頼書の経費が、売上原価として計上されること
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  111) Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき Creditの経費が存在するとき 同期対象案件のkintone_codeと合致するCreditの経費が、売上原価として計上されること
       Failure/Error:
         create(:manage_program, :with_must_associations,
         name: "X高校",
         kintone_code: "kintone_code_01",
         program: program,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:26:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  112) Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了していない場合 新規に作成される場合 作成される
       Failure/Error: create(:manage_program, :with_must_associations, is_revenue_finalized: false, kintone_code: "1000")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:27:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  113) Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了していない場合 既存のデータがある場合 更新される
       Failure/Error: create(:manage_program, :with_must_associations, is_revenue_finalized: false, kintone_code: "1000")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:27:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  114) Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了している場合 新規に作成される場合 作成されない
       Failure/Error: create(:manage_program, :with_must_associations, is_revenue_finalized: false, kintone_code: "1000")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:27:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  115) Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了している場合 既存のデータがある場合 更新されない
       Failure/Error: create(:manage_program, :with_must_associations, is_revenue_finalized: false, kintone_code: "1000")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:27:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  116) Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call １つの案件に、２人の従業員・貢献度が紐づく場合 従業員・貢献度と、案件が関連すること
       Failure/Error: create(:manage_employee, name: "織田信長", user: users[0], team: team),

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:115:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  117) Domains::Manage::ProfitSyncAgents::SyncProgram#call 更新対象のテスト 対象案件が4件で、うち既存データが2件のとき 既存の１件は更新され、残りの２件は新規作成される、finalizeされたものは更新されない
       Failure/Error: create(:manage_profit_sync_agents_lbe_system, kintone_code: "1000", program: programs[0], profit_sync_agent:),

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_spec.rb:41:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  118) Domains::Manage::ProfitSyncAgents::SyncProgram#call 更新対象のテスト original_programを持つ、つまり、複製されたプログラムであるとき original_programだけが作成され、copied_programは無視される
       Failure/Error: let!(:kintone) { create(:manage_profit_sync_agents_kintone, kintone_code:, earnings: 1000, participant_count: 10, profit_sync_agent: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_spec.rb:101:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  119) Domains::Manage::ProfitSyncAgents::SyncProgram#call 内容のテスト 対象の案件が１つのとき 正しくデータが作成される
       Failure/Error: create(:manage_profit_sync_agents_lbe_system, kintone_code: "1000", program: program, profit_sync_agent: profit_sync_agent)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/manage/profit_sync_agents/sync_program_spec.rb:140:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  120) Domains::Manage::ProfitSyncAgents::SyncTeam#call 【開発中】draft Teamがないとき 【開発中】ダミーデータを入れること
       Failure/Error: team.save

       ActiveModel::MissingAttributeError:
         missing attribute: id
       # ./app/models/domains/manage/profit_sync_agents/sync_team.rb:21:in `call'
       # ./spec/models/domains/manage/profit_sync_agents/sync_team_spec.rb:20:in `block (3 levels) in <top (required)>'
       # ./spec/models/domains/manage/profit_sync_agents/sync_team_spec.rb:26:in `block (6 levels) in <top (required)>'
       # ./spec/models/domains/manage/profit_sync_agents/sync_team_spec.rb:26:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'
       # ------------------
       # --- Caused by: ---
       # ActiveModel::MissingAttributeError:
       #   missing attribute: id
       #   ./app/models/domains/manage/profit_sync_agents/sync_team.rb:21:in `call'

  121) Domains::Manage::ProfitSyncAgents::SyncTeam#call 【開発中】draft Teamがあるとき 【開発中】ダミーデータが増えないこと
       Failure/Error: expect(Manage::Team.count).to eq(1)

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/domains/manage/profit_sync_agents/sync_team_spec.rb:35:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  122) Domains::Programs::AllExpensesFrozenToApplyBatch (正常系) 検索結果に対して、all_expenses_frozen_to_applyが呼ばれること
       Failure/Error: DEFAULT_FAILURE_NOTIFIER = lambda { |failure, _opts| raise failure }
         Exactly one instance should have received the following message(s) but didn't: all_expenses_frozen_to_apply
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  123) Domains::Programs::AllExpensesFrozenToApplyBatch (異常系) all_expenses_frozen_to_apply が失敗するProgramが含まれている場合 それらProgramのログが出力されて、処理としてはfalseを返すこと
       Failure/Error: is_expected.to be false

         expected false
              got true
       # ./spec/models/domains/programs/all_expenses_frozen_to_apply_batch_spec.rb:68:in `block (5 levels) in <top (required)>'
       # ./spec/models/domains/programs/all_expenses_frozen_to_apply_batch_spec.rb:64:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  124) Domains::Programs::ManageExpensesStatus#frozen_to_apply (処理が成功するとき) 全ての経費データが申請不可状態に変更されること
       Got 0 failures and 2 other errors:

       124.1) Failure/Error: program_join_leader = create(:program_join_leader, program: program, leader: leader)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:41:in `block (4 levels) in <top (required)>'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:39:in `each'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:39:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       124.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  125) Domains::Programs::ManageExpensesStatus#frozen_to_apply (処理が失敗するとき) falseが返ること
       Got 0 failures and 2 other errors:

       125.1) Failure/Error: program_join_leader = create(:program_join_leader, program: program, leader: leader)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:41:in `block (4 levels) in <top (required)>'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:39:in `each'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:39:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       125.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  126) Domains::Programs::ManageExpensesStatus#accept (処理が成功するとき) 全ての経費データが承認状態に変更されること
       Got 0 failures and 2 other errors:

       126.1) Failure/Error: program_join_leader = create(:program_join_leader, program: program, leader: leader)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:84:in `block (4 levels) in <top (required)>'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:82:in `each'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:82:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       126.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  127) Domains::Programs::ManageExpensesStatus#accept (処理が失敗するとき) falseが返ること
       Got 0 failures and 2 other errors:

       127.1) Failure/Error: program_join_leader = create(:program_join_leader, program: program, leader: leader)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:84:in `block (4 levels) in <top (required)>'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:82:in `each'
              # ./spec/models/domains/programs/manage_expenses_status_spec.rb:82:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       127.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  128) Domains::Programs::OutputCsv#call (プログラムが存在するとき) CSVが取得できること
       Got 0 failures and 2 other errors:

       128.1) Failure/Error: join_leader1_2 = create(:program_join_leader, program: program1, leader: leader2)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/domains/programs/output_csv_spec.rb:123:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       128.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  129) Domains::Programs::OutputCsv#build_row (経費申請が承認済で全ての経費が登録されているとき) 全ての値が入力されたCSVのデータを返すこと
       Got 23 failures from failure aggregation block.
       # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

       129.1) Failure/Error: expect(row[11]).to eq 100

                expected: 100
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:222:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.2) Failure/Error: expect(row[12]).to eq "1番目のルートです"

                expected: "1番目のルートです"
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:223:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.3) Failure/Error: expect(row[13]).to eq 200

                expected: 200
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:224:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.4) Failure/Error: expect(row[14]).to eq "2番目のルートです"

                expected: "2番目のルートです"
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:225:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.5) Failure/Error: expect(row[15]).to eq 300

                expected: 300
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:226:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.6) Failure/Error: expect(row[16]).to eq "3番目のルートです"

                expected: "3番目のルートです"
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:227:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.7) Failure/Error: expect(row[17]).to eq 400

                expected: 400
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:228:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.8) Failure/Error: expect(row[18]).to eq "4番目のルートです"

                expected: "4番目のルートです"
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:229:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.9) Failure/Error: expect(row[19]).to eq 500

                expected: 500
                     got: nil

                (compared using ==)
              # ./spec/models/domains/programs/output_csv_spec.rb:230:in `block (5 levels) in <top (required)>'
              # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.10) Failure/Error: expect(row[20]).to eq "5番目のルートです"

                 expected: "5番目のルートです"
                      got: nil

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:231:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.11) Failure/Error: expect(row[21]).to eq 1000

                 expected: 1000
                      got: 100

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:234:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.12) Failure/Error: expect(row[23]).to eq 2000

                 expected: 2000
                      got: 200

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:236:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.13) Failure/Error: expect(row[25]).to eq 3000

                 expected: 3000
                      got: 300

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:238:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.14) Failure/Error: expect(row[27]).to eq 10000

                 expected: 10000
                      got: 1000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:242:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.15) Failure/Error: expect(row[29]).to eq 20000

                 expected: 20000
                      got: 2000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:244:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.16) Failure/Error: expect(row[31]).to eq 30000

                 expected: 30000
                      got: 3000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:246:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.17) Failure/Error: expect(row[33]).to eq 40000

                 expected: 40000
                      got: 4000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:248:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.18) Failure/Error: expect(row[35]).to eq 50000

                 expected: 50000
                      got: 5000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:250:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.19) Failure/Error: expect(row[37]).to eq 100000

                 expected: 100000
                      got: 10000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:254:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.20) Failure/Error: expect(row[39]).to eq 200000

                 expected: 200000
                      got: 20000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:256:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.21) Failure/Error: expect(row[41]).to eq 300000

                 expected: 300000
                      got: 30000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:258:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.22) Failure/Error: expect(row[43]).to eq 400000

                 expected: 400000
                      got: 40000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:260:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       129.23) Failure/Error: expect(row[45]).to eq 500000

                 expected: 500000
                      got: 50000

                 (compared using ==)
               # ./spec/models/domains/programs/output_csv_spec.rb:262:in `block (5 levels) in <top (required)>'
               # ./spec/models/domains/programs/output_csv_spec.rb:202:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

  130) Domains::Programs::OutputKintoneCsv#call (プログラムが存在するとき) 内容のあるCSVが取得できること
       Got 0 failures and 2 other errors:

       130.1) Failure/Error: join_leader1_2 = create(:program_join_leader, program: program1, leader: leader2)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/domains/programs/output_kintone_csv_spec.rb:77:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       130.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  131) Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされていないとき) trueが返ること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, program:, revenue_closure_at: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/programs/revenue_open_spec.rb:41:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  132) Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされていないとき) 解除すべき収益情報の確定日時がnilになり、finalie処理も解錠されること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, program:, revenue_closure_at: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/programs/revenue_open_spec.rb:41:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  133) Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされているとき) trueが返ること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, program:, revenue_closure_at: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/programs/revenue_open_spec.rb:41:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  134) Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされているとき) 解除すべき収益情報の確定日時がnilになり、finalie処理も解錠されること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, program:, revenue_closure_at: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/programs/revenue_open_spec.rb:41:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  135) Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (異常系) (処理が途中で失敗するとき) （ロールバックされることで）１つもデータが変わらないこと
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, program:, revenue_closure_at: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/programs/revenue_open_spec.rb:41:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  136) Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (異常系) (処理が途中で失敗するとき) falseが返し、エラーメッセージが返ること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, program:, revenue_closure_at: ) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/domains/programs/revenue_open_spec.rb:41:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  137) Domains::Programs::RevenueOpen#call (収益情報が確定されていないとき) 変更されていないこと
       Failure/Error: expect { subject }.to_not change { program.reload.updated_at }

       ActiveRecord::RecordNotFound:
         Couldn't find Program with 'id'=0
       # /usr/local/bundle/gems/activestorage-7.0.4.2/lib/active_storage/attached/model.rb:237:in `reload'
       # ./spec/models/domains/programs/revenue_open_spec.rb:106:in `block (5 levels) in <top (required)>'
       # ./spec/models/domains/programs/revenue_open_spec.rb:106:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  138) Image [restriction] .public_images 公開画像だけが取得できること
       Failure/Error: expect(images.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/image_spec.rb:42:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  139) Image [restriction] .only_upload_user アップロードした人だけが見れる画像が取得できること
       Failure/Error: expect(images.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/image_spec.rb:50:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  140) Image [restriction] .only_super_user スーパーユーザだけが見れる画像が取得できること
       Failure/Error: expect(images.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/image_spec.rb:58:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  141) LeaderPayments::BankInfo#valid? 重複がある場合 is expected to equal false
       Failure/Error: it { is_expected.to be false }

         expected false
              got true
       # ./spec/models/leader_payments/bank_info_spec.rb:30:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  142) LeaderPayments::BankTransferCsvMetaInfo#valid? csv_row1_stringsは、12列の文字列をカンマ区切りで連結した文字列であるとき
       Failure/Error: let!(:bank_transfer_csv_meta_info){ build(:leader_payments_bank_transfer_csv_meta_info, csv_row1_strings: csv_row1_strings) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:36:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  143) LeaderPayments::BankTransferCsvMetaInfo#valid? csv_row1_stringsは、12列の文字列をカンマ区切りで連結した文字列でないとき
       Failure/Error: let!(:bank_transfer_csv_meta_info){ build(:leader_payments_bank_transfer_csv_meta_info, csv_row1_strings: csv_row1_strings) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:43:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  144) LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-01-01", expected_date: "101"
       Failure/Error: let!(:bank_transfer_csv_meta_info){ build(:leader_payments_bank_transfer_csv_meta_info, transfer_date: transfer_date) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:54:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  145) LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-01-21", expected_date: "121"
       Failure/Error: let!(:bank_transfer_csv_meta_info){ build(:leader_payments_bank_transfer_csv_meta_info, transfer_date: transfer_date) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:54:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  146) LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-12-01", expected_date: "1201"
       Failure/Error: let!(:bank_transfer_csv_meta_info){ build(:leader_payments_bank_transfer_csv_meta_info, transfer_date: transfer_date) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:54:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  147) LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-12-15", expected_date: "1215"
       Failure/Error: let!(:bank_transfer_csv_meta_info){ build(:leader_payments_bank_transfer_csv_meta_info, transfer_date: transfer_date) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:54:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  148) LeaderPayments::BankTransfer.completed 完了したデータだけが取得できること
       Failure/Error: let!(:completed_bt) { create(:leader_payments_bank_transfer, :completed) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:31:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  149) LeaderPayments::BankTransfer.uncompleted 未完了のデータだけが取得できること
       Failure/Error: let!(:completed_bt) { create(:leader_payments_bank_transfer, :completed) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:42:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  150) LeaderPayments::BankTransfer#valid? completed_at, completed_userがnilの場合
       Failure/Error: let!(:bank_transfer){ build(:leader_payments_bank_transfer, :uncompleted) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:60:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  151) LeaderPayments::BankTransfer#complete! 振り込みが未完了のとき 時刻の指定がないとき 現在時刻で完了になること
       Failure/Error: let!(:bank_transfer){ create(:leader_payments_bank_transfer, completed_at: nil, completed_user: nil) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:82:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  152) LeaderPayments::BankTransfer#complete! 振り込みが未完了のとき 時刻の指定があるとき 指定した時刻で完了になること
       Failure/Error: let!(:bank_transfer){ create(:leader_payments_bank_transfer, completed_at: nil, completed_user: nil) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:82:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  153) LeaderPayments::BankTransfer#complete! 振り込みが未完了のとき ユーザが存在しないとき ActiveRecord::RecordInvalidが発生すること
       Failure/Error: let!(:bank_transfer){ create(:leader_payments_bank_transfer, completed_at: nil, completed_user: nil) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:82:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  154) LeaderPayments::BankTransfer#complete! 振り込みが完了済のとき force オプションを付けていないとき 更新がされないこと
       Failure/Error: let!(:bank_transfer)  { create(:leader_payments_bank_transfer, completed_at: already_completed_at, completed_user: already_completed_user) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:112:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  155) LeaderPayments::BankTransfer#complete! 振り込みが完了済のとき force オプションが付いているとき 完了状態が更新されること
       Failure/Error: let!(:bank_transfer)  { create(:leader_payments_bank_transfer, completed_at: already_completed_at, completed_user: already_completed_user) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:112:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  156) LeaderPayments::BankTransfer#uncomplete! 未完了状態になること
       Failure/Error: let!(:bank_transfer)  { create(:leader_payments_bank_transfer, completed_at: "2023/07/15 13:00:00", completed_user: completed_user) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:139:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  157) LeaderPayments::BankTransfer#completed? params: {:completed_at=>nil, :completed_user=>nil}, expected: false
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:163:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  158) LeaderPayments::BankTransfer#completed? params: {:completed_at=>nil, :completed_user=>user}, expected: false
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:163:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  159) LeaderPayments::BankTransfer#completed? params: {:completed_at=>"2023/10/15", :completed_user=>nil}, expected: true
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:163:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  160) LeaderPayments::BankTransfer#completed? params: {:completed_at=>"2023/10/15", :completed_user=>user}, expected: true
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:163:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  161) LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>nil, :completed_user=>nil}, expected: true
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:181:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  162) LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>nil, :completed_user=>user}, expected: true
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:181:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  163) LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>"2023/10/15", :completed_user=>nil}, expected: false
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:181:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  164) LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>"2023/10/15", :completed_user=>user}, expected: false
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, **params) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:181:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  165) LeaderPayments::BankTransfer#created_metadata JSONが正しい仕様で入力されているとき JSONがHashで取得できること
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, created_metadata_json: created_metadata_json) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:187:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  166) LeaderPayments::BankTransfer#created_metadata JSONが形式ではない値で入力されているとき 空ハッシュが取得されること
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, created_metadata_json: created_metadata_json) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/bank_transfer_spec.rb:187:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  167) LeaderPayments::SalaryExpenseRelation#valid? expenseが重複している場合 エラーになること
       Failure/Error: before { create(:leader_payments_salary_expense_relation, expense: expense) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:5:in `association'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:33:in `association'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/association.rb:19:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_expense_relation_spec.rb:29:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  168) LeaderPayments::SalaryExpenseRelation#valid? expenseが重複していない場合 エラーにならないこと
       Failure/Error: let!(:salary_expense_relation){ build(:leader_payments_salary_expense_relation, expense: expense) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:5:in `association'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:33:in `association'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/association.rb:19:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_expense_relation_spec.rb:38:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  169) LeaderPayments::Salary#set_net_payment_from_self 振込額が計算され、自身に設定されること
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation: 87000,
           advanced_compensation: 37000,
           total_expenses: 15000,
           total_extra_time_amount: 20000,
           total_deduction_amount: 5000,
           withholding_tax: 1000,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:37:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  170) LeaderPayments::Salary#set_and_build_combine_expenses (正常系) それぞれの合計値が更新され、経費データの紐付け情報もビルドされていること
       Failure/Error: let!(:salary){ build(:leader_payments_salary) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:57:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  171) LeaderPayments::Salary#set_withholding_tax_from_self 源泉徴収の控除があるとき 控除ありの源泉徴収額が計算されて設定されること
       Failure/Error: let!(:salary) { build(:leader_payments_salary, total_compensation: 88000, total_extra_time_amount: 0, total_deduction_amount: 0, withholding_tax: 0) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:98:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  172) LeaderPayments::Salary#set_withholding_tax_from_self 源泉徴収の控除がないとき 源泉徴収額が計算されて設定されること
       Failure/Error: let!(:salary) { build(:leader_payments_salary, total_compensation: 88000, total_extra_time_amount: 0, total_deduction_amount: 0, withholding_tax: 0) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:98:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  173) LeaderPayments::Salary#gross_payment total_compensation: 120000, total_extra_time_amount: 5000, total_deduction_amount: 3000, total_expenses: 10000, expected: 132000
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation:,
           total_extra_time_amount:,
           total_deduction_amount:,
           total_expenses:
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:134:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  174) LeaderPayments::Salary#gross_payment total_compensation: 7000, total_extra_time_amount: 0, total_deduction_amount: 9000, total_expenses: 0, expected: -2000
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation:,
           total_extra_time_amount:,
           total_deduction_amount:,
           total_expenses:
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:134:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  175) LeaderPayments::Salary#gross_payment total_compensation: 0, total_extra_time_amount: 0, total_deduction_amount: 0, total_expenses: 0, expected: 0
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation:,
           total_extra_time_amount:,
           total_deduction_amount:,
           total_expenses:
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:134:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  176) LeaderPayments::Salary#source_amount_for_withholding_tax total_compensation: 10000, total_extra_time_amount: 1000, total_deduction_amount: 2000, total_expenses: 5000, expected: 9000
       Failure/Error:
         build(:leader_payments_salary,
           # 総支給額 - 総経費 が計算元になるためこれらの値だけでテストする
           total_compensation:,
           total_extra_time_amount:,
           total_deduction_amount:,
           total_expenses:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:160:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  177) LeaderPayments::Salary#source_amount_for_withholding_tax total_compensation: 0, total_extra_time_amount: 0, total_deduction_amount: 2000, total_expenses: 3000, expected: -2000
       Failure/Error:
         build(:leader_payments_salary,
           # 総支給額 - 総経費 が計算元になるためこれらの値だけでテストする
           total_compensation:,
           total_extra_time_amount:,
           total_deduction_amount:,
           total_expenses:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:160:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  178) LeaderPayments::Salary#whole_payment total_compensation: 10000, total_expenses: 1000, total_extra_time_amount: 2000, expected: 13000
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation:,
           total_expenses:,
           total_extra_time_amount:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:186:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  179) LeaderPayments::Salary#whole_payment total_compensation: 30000, total_expenses: 0, total_extra_time_amount: 2000, expected: 32000
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation:,
           total_expenses:,
           total_extra_time_amount:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:186:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  180) LeaderPayments::Salary#whole_payment total_compensation: 0, total_expenses: 0, total_extra_time_amount: 0, expected: 0
       Failure/Error:
         build(:leader_payments_salary,
           total_compensation:,
           total_expenses:,
           total_extra_time_amount:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:186:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  181) LeaderPayments::Salary#take_away_payment advanced_compensation: 7000, withholding_tax: 130, total_deduction_amount: 1000, expected: 8130
       Failure/Error:
         build(:leader_payments_salary,
           advanced_compensation:,
           withholding_tax:,
           total_deduction_amount:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:209:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  182) LeaderPayments::Salary#take_away_payment advanced_compensation: 10000, withholding_tax: 0, total_deduction_amount: 2000, expected: 12000
       Failure/Error:
         build(:leader_payments_salary,
           advanced_compensation:,
           withholding_tax:,
           total_deduction_amount:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:209:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  183) LeaderPayments::Salary#take_away_payment advanced_compensation: 0, withholding_tax: 0, total_deduction_amount: 0, expected: 0
       Failure/Error:
         build(:leader_payments_salary,
           advanced_compensation:,
           withholding_tax:,
           total_deduction_amount:,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/salary_spec.rb:209:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  184) LeaderPayments::TargetTerm#valid? first_dateが重複する場合 エラーになること
       Failure/Error: is_expected.to be false

         expected false
              got true
       # ./spec/models/leader_payments/target_term_spec.rb:30:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  185) LeaderPayments::TargetTerm#aggregate_expenses_by_leader リーダー毎に、経費を集計したものが返ること
       Got 0 failures and 2 other errors:

       185.1) Failure/Error: create(:program_join_leader, program: programs[1], leader: leader[0]), #1

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/leader_payments/target_term_spec.rb:92:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       185.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  186) LeaderPayments::TargetTerm#programs 対象期間に紐づく経費が存在する場合 対象期間に紐づく経費のプログラムの一覧が返ること
       Failure/Error: let!(:salary) { create(:leader_payments_salary, target_term: target_term) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/leader_payments/target_term_spec.rb:119:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  187) LeaderPayments::TargetTerm#programs 対象期間に紐づく経費が存在しない場合 空の配列が返ること
       Failure/Error: expenses.map(&:program_join_leader).map(&:program)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # ./app/models/leader_payments/target_term.rb:53:in `map'
       # ./app/models/leader_payments/target_term.rb:53:in `programs'
       # ./spec/models/leader_payments/target_term_spec.rb:116:in `block (3 levels) in <top (required)>'
       # ./spec/models/leader_payments/target_term_spec.rb:130:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  188) Leader.by_visa_expiration_date ビザの有効期限日がdateの人を取得する
       Got 0 failures and 2 other errors:

       188.1) Failure/Error: create(:leaders_personal_info, leader: leaders[0], visa_expiration_date: Time.zone.parse("2023/06/19").to_date),

              ActiveRecord::InvalidForeignKey:
                Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/leader_spec.rb:79:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       188.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  189) Leader.by_graduated_date ビザの有効期限日がdateの人を取得する
       Got 0 failures and 2 other errors:

       189.1) Failure/Error: create(:leaders_personal_info, leader: leaders[0], graduation_date: Time.zone.parse("2023/06/19").to_date),

              ActiveRecord::InvalidForeignKey:
                Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/leader_spec.rb:97:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       189.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  190) Leader.active is_activeがtrueの人を取得する
       Failure/Error: expect(subject).to match_array([active_leader, default_leader])

         expected collection contained:  [#<Leader id: 0, email: "lekisha.barrows@harris-smith.name", created_at: "2024-02-26 17:47:09.3850500...", name: "Alvin Kiehn", is_initial_system_password: [FILTERED], bank_info_id: nil, is_active: true>]
         actual collection contained:    []
         the missing elements were:      [#<Leader id: 0, email: "lekisha.barrows@harris-smith.name", created_at: "2024-02-26 17:47:09.3850500...", name: "Alvin Kiehn", is_initial_system_password: [FILTERED], bank_info_id: nil, is_active: true>]
       # ./spec/models/leader_spec.rb:116:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  191) Leader.select_options_for_email_with_active is_activeがtrueの人をemailをラベルとした、{ label:, value: }が返ってくること
       Failure/Error:
         expect(subject).to match_array([
           { label: "active@example.com", value: active_leader.id },
           { label: "default@example.com", value: default_leader.id },
         ])

         expected collection contained:  [{:label=>"active@example.com", :value=>0}, {:label=>"default@example.com", :value=>0}]
         actual collection contained:    []
         the missing elements were:      [{:label=>"active@example.com", :value=>0}, {:label=>"default@example.com", :value=>0}]
       # ./spec/models/leader_spec.rb:128:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  192) Manage::ProfitSyncAgent 準Singleton(シングルトン) .instance レコードがあるとき 常に同じIDのインスタンスを返すこと
       Failure/Error: expect(instance.id).to equal(Manage::ProfitSyncAgent.instance.id)

         expected #<Integer:589> => 294
              got #<NilClass:4> => nil

         Compared using equal?, which compares object identity,
         but expected and actual are not the same object. Use
         `expect(actual).to eq(expected)` if you don't care about
         object identity in this example.
       # ./spec/models/manage/profit_sync_agent_spec.rb:37:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  193) Manage::ProfitSyncAgent 準Singleton(シングルトン) #save 既存のデータがないとき is expected to change `Manage::ProfitSyncAgent.count` by 1
       Failure/Error: it { expect { subject }.to change { Manage::ProfitSyncAgent.count }.by(1) }
         expected `Manage::ProfitSyncAgent.count` to have changed by 1, but was changed by 0
       # ./spec/models/manage/profit_sync_agent_spec.rb:44:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  194) Manage::ProfitSyncAgent 準Singleton(シングルトン) #save 既存のデータがあるとき エラーになること
       Got 0 failures and 2 other errors:

       194.1) Failure/Error: subject { Manage::ProfitSyncAgent.new.save }

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0' for key 'manage_profit_sync_agents.index_manage_profit_sync_agents_on_singleton_guard'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # ./spec/models/manage/profit_sync_agent_spec.rb:42:in `block (4 levels) in <top (required)>'
              # ./spec/models/manage/profit_sync_agent_spec.rb:49:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0' for key 'manage_profit_sync_agents.index_manage_profit_sync_agents_on_singleton_guard'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       194.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  195) Manage::ProfitSyncAgent 同期処理 #run (正常系) fetchとsync, finalizeを呼び出し、最終更新日時を更新すること
       Failure/Error: expect(subject).to be true

         expected true
              got false
       # ./spec/models/manage/profit_sync_agent_spec.rb:86:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  196) Manage::ProfitSyncAgent#target_kintone_codes LbeSystem(案件)がある場合 LbeSystem(案件)のkintone_codeを返すこと
       Failure/Error: let!(:lbe_systems) { create_list(:manage_profit_sync_agents_lbe_system, 3, :with_program, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
       # ./spec/models/manage/profit_sync_agent_spec.rb:131:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  197) Manage::ProfitSyncAgent#target_kintone_codes LbeSystem(案件)がない場合 空配列を返すこと
       Failure/Error: lbe_systems.map(&:kintone_code)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # ./app/models/manage/profit_sync_agent.rb:92:in `map'
       # ./app/models/manage/profit_sync_agent.rb:92:in `target_kintone_codes'
       # ./spec/models/manage/profit_sync_agent_spec.rb:127:in `block (3 levels) in <top (required)>'
       # ./spec/models/manage/profit_sync_agent_spec.rb:138:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  198) Manage::ProfitSyncAgent#target_programs LbeSystem(案件)がある場合 LbeSystem(案件)を返すこと
       Failure/Error: let!(:lbe_systems) { create_list(:manage_profit_sync_agents_lbe_system, 3, :with_program, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
       # ./spec/models/manage/profit_sync_agent_spec.rb:148:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  199) Manage::ProfitSyncAgent#target_programs LbeSystem(案件)がない場合 空配列を返すこと
       Failure/Error: expect(subject).to eq []

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # ./spec/models/manage/profit_sync_agent_spec.rb:155:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  200) Manage::ProfitSyncAgents::Kintone#get_fetched_charge_and_ratio 配列が返る
       Failure/Error:
         create(:manage_profit_sync_agents_kintone, profit_sync_agent: profit_sync_agent,
           id: 1,
           kintone_code: "P0001",
           charge_main:  "織田信長",
           charge_sub01: "徳川家康",
           charge_sub02: "羽柴秀吉",
           charge_sub03: "柴田勝家",
           charge_sub04: "明智光秀",
           charge_ratio_main:  "8",
           charge_ratio_sub01: "6",

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/kintone_spec.rb:36:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  201) Manage::ProfitSyncAgents::LbeSystem.only_original オリジナルのProgramを持つLbeSystemだけを返すこと
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:40:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  202) Manage::ProfitSyncAgents::LbeSystem#valid? kintone_codeについての検証をしているとき kintone_code: "0000", expectation: true
       Failure/Error: let!(:lbe_system) { build(:manage_profit_sync_agents_lbe_system, kintone_code:, profit_sync_agent:, program:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:56:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  203) Manage::ProfitSyncAgents::LbeSystem#valid? kintone_codeについての検証をしているとき kintone_code: "", expectation: false
       Failure/Error: let!(:lbe_system) { build(:manage_profit_sync_agents_lbe_system, kintone_code:, profit_sync_agent:, program:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:56:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  204) Manage::ProfitSyncAgents::LbeSystem#valid? kintone_codeについての検証をしているとき kintone_code: nil, expectation: false
       Failure/Error: let!(:lbe_system) { build(:manage_profit_sync_agents_lbe_system, kintone_code:, profit_sync_agent:, program:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:56:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  205) Manage::ProfitSyncAgents::LbeSystem#valid? programの重複チェックについての検証をしているとき 重複あり エラーになること
       Failure/Error: let!(:lbe_system) { build(:manage_profit_sync_agents_lbe_system, kintone_code:, profit_sync_agent:, program:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:56:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  206) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_compensation, delegate_method: :total_compensation delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  207) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_food_expense, delegate_method: :total_food_expense delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  208) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_local_transport, delegate_method: :total_local_transport delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  209) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_extra_transport, delegate_method: :total_extra_transport delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  210) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_fieldwork_transport, delegate_method: :total_fieldwork_transport delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  211) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_fieldwork_other, delegate_method: :total_fieldwork_other delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  212) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_internet, delegate_method: :total_internet delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  213) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_charted_bus, delegate_method: :total_charted_bus delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  214) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_out_area, delegate_method: :total_out_area delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  215) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :program_name, delegate_method: :name delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  216) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :program_event_date, delegate_method: :event_date delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  217) Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :program_revenue_closure_at, delegate_method: :revenue_closure_at delegateできること
       Failure/Error: profit_sync_agent { Manage::ProfitSyncAgent.last || create(:manage_profit_sync_agent) }

       ActiveRecord::IrreversibleOrderError:
         Relation has no current order and table has no primary key to be used as default order
       # ./spec/factories/manage/profit_sync_agents/lbe_systems.rb:26:in `block (3 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute/dynamic.rb:16:in `block in to_proc'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluator.rb:76:in `block in define_attribute'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:59:in `get'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:99:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  218) Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "bbb", number_1: "111", number_2: "222", expected: true
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_ex_report_transfer_request, report_id: report_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb:52:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  219) Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "aaa", number_1: "111", number_2: "222", expected: false
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_ex_report_transfer_request, report_id: report_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb:52:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  220) Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "bbb", number_1: "111", number_2: "111", expected: false
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_ex_report_transfer_request, report_id: report_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb:52:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  221) Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "aaa", number_1: "111", number_2: "111", expected: false
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_ex_report_transfer_request, report_id: report_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb:52:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  222) Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest#kintone_code form_project_codeが存在するとき kintone_codeを返すこと
       Failure/Error: create(:manage_profit_sync_agents_money_forward_ex_report_transfer_request, form_project_code:)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb:73:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  223) Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "bbb", number_1: "111", number_2: "222", expected: true
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_expense, mf_id: mf_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb:58:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  224) Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "aaa", number_1: "111", number_2: "222", expected: false
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_expense, mf_id: mf_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb:58:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  225) Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "bbb", number_1: "111", number_2: "111", expected: false
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_expense, mf_id: mf_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb:58:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  226) Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "aaa", number_1: "111", number_2: "111", expected: false
       Failure/Error: let!(:new_money_forward) { build(:manage_profit_sync_agents_money_forward_expense, mf_id: mf_id_1, number: number_1, profit_sync_agent: profit_sync_agent) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_profit_sync_agents in model Manage::ProfitSyncAgent.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb:58:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  227) Manage::ProgramDirectCost#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みの場合 確定済みなので、だめ
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, is_revenue_finalized:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_direct_cost_spec.rb:35:in `block (5 levels) in <top (required)>'
       # ./spec/models/manage/program_direct_cost_spec.rb:34:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  228) Manage::ProgramDirectCost#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みでない場合 未確定なので、よし
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, is_revenue_finalized:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_direct_cost_spec.rb:35:in `block (5 levels) in <top (required)>'
       # ./spec/models/manage/program_direct_cost_spec.rb:34:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  229) Manage::ProgramDirectCost#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みになった場合 確定済みなので、だめ
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, is_revenue_finalized: false) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_direct_cost_spec.rb:51:in `block (5 levels) in <top (required)>'
       # ./spec/models/manage/program_direct_cost_spec.rb:50:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  230) Manage::ProgramDirectCost#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みにならなかった場合 未確定なので、よし
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, is_revenue_finalized: false) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_direct_cost_spec.rb:51:in `block (5 levels) in <top (required)>'
       # ./spec/models/manage/program_direct_cost_spec.rb:50:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  231) Manage::ProgramEmployee#valid? program, employeeの組み合わせは一意 違う組み合わせの場合 programが違う場合
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  232) Manage::ProgramEmployee#valid? program, employeeの組み合わせは一意 違う組み合わせの場合 employeeが違う場合
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  233) Manage::ProgramEmployee#valid? program, employeeの組み合わせは一意 同じ組み合わせの場合
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  234) Manage::ProgramEmployee#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みの場合 確定済みなので、だめ
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  235) Manage::ProgramEmployee#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みでない場合 未確定なので、よし
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  236) Manage::ProgramEmployee#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みになった場合 確定済みなので、だめ
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  237) Manage::ProgramEmployee#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みにならなかった場合 未確定なので、よし
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team:) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  238) Manage::ProgramEmployee.create
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team: team) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:96:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  239) Manage::ProgramEmployee#contoribution_ratio_for_calc contribution_ratioが5の場合
       Failure/Error: let!(:employee) { create(:manage_employee, :with_user, team: team) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_employee_spec.rb:108:in `block (3 levels) in <top (required)>'
       # ./spec/models/manage/program_employee_spec.rb:106:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  240) Manage::Program#valid? finalize_validation finalizeされている場合 だめ
       Failure/Error:
         create(:manage_program, :with_must_associations,
           is_revenue_finalized:,
           name: "初期値",
           earnings: 0,
           event_date: "2020-01-01",
           kintone_code: "9999",
           participant_count: 0,
           revenue_closure_at: "2020-01-01",
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:36:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  241) Manage::Program#valid? finalize_validation finalizeされていない場合 できる
       Failure/Error:
         create(:manage_program, :with_must_associations,
           is_revenue_finalized:,
           name: "初期値",
           earnings: 0,
           event_date: "2020-01-01",
           kintone_code: "9999",
           participant_count: 0,
           revenue_closure_at: "2020-01-01",
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:36:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  242) Manage::Program#unfinalize 他のカラムを修正していないとき finalizeを解除すること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, is_revenue_finalized: true) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:91:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  243) Manage::Program#unfinalize 他のカラムを修正しているとき finalizeを解除できないこと
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, is_revenue_finalized: true) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:91:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  244) Manage::Program.by_finalize_target 収益情報確定済みで、finalize処理されていないものが取得されること
       Failure/Error: create(:manage_program, :with_must_associations, id: 100, revenue_closure_at: "2023-09-01", is_revenue_finalized: false)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:125:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  245) Manage::Program.by_target_month 2023-09を指定したとき 202309が設定されたProgramのみが取得されること
       Failure/Error: create(:manage_program, :with_must_associations, id: 100, event_date: "2023-09-01")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:137:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  246) Manage::Program.by_target_month 2023-10を指定したとき 202310が設定されたProgramのみが取得されること
       Failure/Error: create(:manage_program, :with_must_associations, id: 100, event_date: "2023-09-01")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:137:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  247) Manage::Program.by_target_month 2023-11を指定したとき 事前データに存在しないため、Programが取得されないこと
       Failure/Error: create(:manage_program, :with_must_associations, id: 100, event_date: "2023-09-01")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:137:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  248) Manage::Program#cost 紐づく経費データが存在しないとき
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:175:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  249) Manage::Program#cost 紐づく経費データが存在するとき
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:175:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  250) Manage::Program#gross_profit 粗利を返すこと
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, earnings: 670000) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:193:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  251) Manage::Program#gross_profit_rate 粗利率を返すこと
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations, earnings: 670000) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:206:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  252) Manage::Program.order_by_gross_profit_per_participant description: :desc, expected: [10000, 1000, 500, 333] 参加者あたりの売上でソートされること
       Failure/Error: create(:manage_program, :with_must_associations, id: 10000, earnings: 10000, participant_count: 1)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:290:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  253) Manage::Program.order_by_gross_profit_per_participant description: :asc, expected: [333, 500, 1000, 10000] 参加者あたりの売上でソートされること
       Failure/Error: create(:manage_program, :with_must_associations, id: 10000, earnings: 10000, participant_count: 1)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/program_spec.rb:290:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  254) Manage::Snapshot::Agent.create
       Failure/Error: subject { create(:manage_snapshot_agent, item: item) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_snapshot_items in model Manage::Snapshot::Item.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/snapshot/agent_spec.rb:23:in `block (3 levels) in <top (required)>'
       # ./spec/models/manage/snapshot/agent_spec.rb:25:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  255) Manage::Snapshot::ProgramEmployee.create
       Failure/Error: let!(:team) { create(:manage_snapshot_team, item: item) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_snapshot_items in model Manage::Snapshot::Item.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/manage/snapshot/program_employee_spec.rb:31:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  256) Manage::Team.select_options_about_teams チームの選択肢が返ること
       Failure/Error:
         expect(subject).to match_array ([
           { value: 1, label: "開発部" },
           { value: 2, label: "営業部" },
           { value: 3, label: "総務部" },
         ])

         expected collection contained:  [{:label=>"開発部", :value=>1}, {:label=>"営業部", :value=>2}, {:label=>"総務部", :value=>3}]
         actual collection contained:    []
         the missing elements were:      [{:label=>"開発部", :value=>1}, {:label=>"営業部", :value=>2}, {:label=>"総務部", :value=>3}]
       # ./spec/models/manage/team_spec.rb:21:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  257) Master::SystemSetting.reset_seed! (本番データのとき) 各種データが作成されていること
       Got 1 failure and 1 other error from failure aggregation block.
       # ./spec/models/master/system_setting_spec.rb:47:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

       257.1) Failure/Error: expect(is_maintenance).to be_present
                expected `nil.present?` to be truthy, got false
              # ./spec/models/master/system_setting_spec.rb:50:in `block (5 levels) in <top (required)>'
              # ./spec/models/master/system_setting_spec.rb:47:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       257.2) Failure/Error: expect(is_maintenance.__send_value__).to eq "off"

              NoMethodError:
                undefined method `__send_value__' for nil:NilClass
              # ./spec/models/master/system_setting_spec.rb:51:in `block (5 levels) in <top (required)>'
              # ./spec/models/master/system_setting_spec.rb:47:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

  258) Master::SystemSetting.reset_seed! (テストデータのとき) テストファイルの設定をもとに、各種データが作成されていること
       Got 1 failure and 1 other error from failure aggregation block.
       # ./spec/models/master/system_setting_spec.rb:73:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

       258.1) Failure/Error: expect(is_foo).to be_present
                expected `nil.present?` to be truthy, got false
              # ./spec/models/master/system_setting_spec.rb:76:in `block (5 levels) in <top (required)>'
              # ./spec/models/master/system_setting_spec.rb:73:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       258.2) Failure/Error: expect(is_foo.__send_value__).to eq "on"

              NoMethodError:
                undefined method `__send_value__' for nil:NilClass
              # ./spec/models/master/system_setting_spec.rb:77:in `block (5 levels) in <top (required)>'
              # ./spec/models/master/system_setting_spec.rb:73:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

  259) Program#apply_default_expenses (正常系) 全員分の交通費申請がデフォルト値で上書きされること
       Got 0 failures and 2 other errors:

       259.1) Failure/Error: let!(:programs_join_leaders) { create_list(:program_join_leader, 3, program: program) }

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:99:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       259.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  260) Program#apply_default_expenses (異常系) (処理が失敗する場合) 全員分の更新が行われない
       Got 0 failures and 2 other errors:

       260.1) Failure/Error: let!(:programs_join_leaders) { create_list(:program_join_leader, 3, program: program) }

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:99:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       260.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  261) Program.frozen_to_apply_batch_targets データがあるとき 申請締切日が本日のプログラムだけが取得できること
       Failure/Error: expect(subject.pluck(:name)).to eq(["today"])

         expected: ["today"]
              got: []

         (compared using ==)
       # ./spec/models/program_spec.rb:167:in `block (5 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:166:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  262) Program.by_apply_deadline_is_tomorrow データがあるとき 申請締切日が明日のプログラムだけが取得できること
       Failure/Error: expect(subject.pluck(:name)).to eq(["tomorrow"])

         expected: ["tomorrow"]
              got: []

         (compared using ==)
       # ./spec/models/program_spec.rb:195:in `block (5 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:194:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  263) Program [自分に紐づく経費ついて集計する機能] #accepted_expenses 参加するリーダーがいないとき 空の配列が取得できること
       Failure/Error: is_expected.to eq Programs::JoinLeaders::Expense.none

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/models/program_spec.rb:239:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  264) Program [自分に紐づく経費ついて集計する機能] #accepted_expenses 参加するリーダーがいるとき 参加するリーダーの食費のうち、acceptedのものが取得できること
       Got 0 failures and 2 other errors:

       264.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:243:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       264.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  265) Program [自分に紐づく経費ついて集計する機能] #total_advance_payment 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:147:in `total_advance_payment'
       # ./spec/models/program_spec.rb:250:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:254:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  266) Program [自分に紐づく経費ついて集計する機能] #total_advance_payment 参加するリーダーがいるとき ステータスに関係なく、前払い謝礼金合計が取得できること
       Got 0 failures and 2 other errors:

       266.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:258:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       266.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  267) Program [自分に紐づく経費ついて集計する機能] #total_charted_bus 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:168:in `total_charted_bus'
       # ./spec/models/program_spec.rb:266:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:270:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  268) Program [自分に紐づく経費ついて集計する機能] #total_charted_bus 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
       Got 0 failures and 2 other errors:

       268.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:274:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       268.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  269) Program [自分に紐づく経費ついて集計する機能] #total_compensation 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:140:in `total_compensation'
       # ./spec/models/program_spec.rb:282:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:286:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  270) Program [自分に紐づく経費ついて集計する機能] #total_compensation 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
       Got 0 failures and 2 other errors:

       270.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:290:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       270.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  271) Program [自分に紐づく経費ついて集計する機能] #total_deduction 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:182:in `total_deduction'
       # ./spec/models/program_spec.rb:298:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:302:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  272) Program [自分に紐づく経費ついて集計する機能] #total_deduction 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
       Got 0 failures and 2 other errors:

       272.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:306:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       272.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  273) Program [自分に紐づく経費ついて集計する機能] #total_extra_time 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:189:in `total_extra_time'
       # ./spec/models/program_spec.rb:314:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:318:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  274) Program [自分に紐づく経費ついて集計する機能] #total_extra_time 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
       Got 0 failures and 2 other errors:

       274.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:322:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       274.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  275) Program [自分に紐づく経費ついて集計する機能] #total_food_expense 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:154:in `total_food_expense'
       # ./spec/models/program_spec.rb:330:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:334:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  276) Program [自分に紐づく経費ついて集計する機能] #total_food_expense 参加するリーダーがいるとき ステータスに関係なく、食費合計が取得できること
       Got 0 failures and 2 other errors:

       276.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:338:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       276.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  277) Program [自分に紐づく経費ついて集計する機能] #total_internet 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:161:in `total_internet'
       # ./spec/models/program_spec.rb:346:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:350:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  278) Program [自分に紐づく経費ついて集計する機能] #total_internet 参加するリーダーがいるとき ステータスに関係なく、インターネット使用料の合計が取得できること
       Got 0 failures and 2 other errors:

       278.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:354:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       278.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  279) Program [自分に紐づく経費ついて集計する機能] #total_out_area 参加するリーダーがいないとき 0が取得できること
       Failure/Error: return 0 if expenses.empty?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/program.rb:175:in `total_out_area'
       # ./spec/models/program_spec.rb:362:in `block (4 levels) in <top (required)>'
       # ./spec/models/program_spec.rb:366:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  280) Program [自分に紐づく経費ついて集計する機能] #total_out_area 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
       Got 0 failures and 2 other errors:

       280.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:370:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       280.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  281) Program [自分に紐づく経費ついて集計する機能] #total_leaders 参加するリーダーがいるとき 参加するリーダーの数が取得できること
       Got 0 failures and 2 other errors:

       281.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:383:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       281.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  282) Program [自分に紐づく経費ついて集計する機能] #total_transport_expense 参加するリーダーがいるとき 正しい値を返すこと
       Got 0 failures and 2 other errors:

       282.1) Failure/Error: pj_leaders = create_list(:program_join_leader, 6, program: program)

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:42:in `block (2 levels) in define_list_strategy_method'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `initialize'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `new'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:40:in `block in define_list_strategy_method'
              # ./spec/models/program_spec.rb:208:in `block (3 levels) in <top (required)>'
              # ./spec/models/program_spec.rb:415:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       282.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  283) Program.only_originals 複製元のみが取得できること
       Got 0 failures and 2 other errors:

       283.1) Failure/Error: let!(:copied_program)   { create(:program, original_program_id: original_program.id) }

              ActiveRecord::InvalidForeignKey:
                Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`programs`, CONSTRAINT `fk_rails_a68d8fabaa` FOREIGN KEY (`original_program_id`) REFERENCES `programs` (`id`))
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/program_spec.rb:532:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`programs`, CONSTRAINT `fk_rails_a68d8fabaa` FOREIGN KEY (`original_program_id`) REFERENCES `programs` (`id`))
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       283.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  284) Program#select_options_for_name_with_only_originals プログラムの名前とIDの配列が取得できること
       Failure/Error:
         expect(subject).to match_array(
           [
             { label: "プログラム1", value: 1 },
             { label: "プログラム2", value: 2 },
           ]
         )

         expected collection contained:  [{:label=>"プログラム1", :value=>1}, {:label=>"プログラム2", :value=>2}]
         actual collection contained:    []
         the missing elements were:      [{:label=>"プログラム1", :value=>1}, {:label=>"プログラム2", :value=>2}]
       # ./spec/models/program_spec.rb:545:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  285) Program プログラムが複製されているとき #original_program 複製元のプログラムが取得できること
       Got 0 failures and 2 other errors:

       285.1) Failure/Error: let!(:copied_program1)   { create(:program, original_program_id:) }

              ActiveRecord::InvalidForeignKey:
                Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`programs`, CONSTRAINT `fk_rails_a68d8fabaa` FOREIGN KEY (`original_program_id`) REFERENCES `programs` (`id`))
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/program_spec.rb:557:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`programs`, CONSTRAINT `fk_rails_a68d8fabaa` FOREIGN KEY (`original_program_id`) REFERENCES `programs` (`id`))
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       285.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  286) Program プログラムが複製されているとき #copied_programs 複製されたプログラムが取得できること
       Got 0 failures and 2 other errors:

       286.1) Failure/Error: let!(:copied_program1)   { create(:program, original_program_id:) }

              ActiveRecord::InvalidForeignKey:
                Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`programs`, CONSTRAINT `fk_rails_a68d8fabaa` FOREIGN KEY (`original_program_id`) REFERENCES `programs` (`id`))
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/program_spec.rb:557:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`programs`, CONSTRAINT `fk_rails_a68d8fabaa` FOREIGN KEY (`original_program_id`) REFERENCES `programs` (`id`))
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       286.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  287) Programs::JoinLeaders::Expense scope .accepted_within_n_months_since (nが6, dateが今月の初日のとき) 日付ではなく月単位でみたときに6ヶ月以内のプログラムのうち、承認済みの経費が取得できること
       Got 0 failures and 2 other errors:

       287.1) Failure/Error: create(:program_join_leader, program: programs[1]),

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/programs/join_leaders/expense_spec.rb:44:in `block (5 levels) in <top (required)>'
              # ./spec/models/programs/join_leaders/expense_spec.rb:50:in `block (5 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       287.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  288) Programs::JoinLeaders::Expense#find_or_build_transport_expenses_array (紐づくTransportExpenseについて、カテゴリが、localが５つ、extraが０こ、fieldworkが３つ、fieldwork_otherが６つあるとき) (検索orビルドの指定が５のとき) (検索orビルドの対象がlocalのとき) ５つの配列が返ってくること
       Failure/Error: expect(results).to match_array locals

         expected collection contained:  [#<Programs::JoinLeaders::TransportExpense id: 0, remarks: "Vitae atque libero ab.", fare: 7321, cate...ed_at: "2024-02-26 17:47:09.879695000 +0900", file: nil, original_filename: nil, no_receipt: false>]
         actual collection contained:    [#<Programs::JoinLeaders::TransportExpense id: nil, remarks: "", fare: 0, category: "local", order: 1...am_id: nil, created_at: nil, updated_at: nil, file: nil, original_filename: nil, no_receipt: false>]
         the missing elements were:      [#<Programs::JoinLeaders::TransportExpense id: 0, remarks: "Vitae atque libero ab.", fare: 7321, cate...ed_at: "2024-02-26 17:47:09.879695000 +0900", file: nil, original_filename: nil, no_receipt: false>]
         the extra elements were:        [#<Programs::JoinLeaders::TransportExpense id: nil, remarks: "", fare: 0, category: "local", order: 1...am_id: nil, created_at: nil, updated_at: nil, file: nil, original_filename: nil, no_receipt: false>]
       # ./spec/models/programs/join_leaders/expense_spec.rb:139:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  289) Programs::JoinLeaders::Expense#find_or_build_transport_expenses_array (紐づくTransportExpenseについて、カテゴリが、localが５つ、extraが０こ、fieldworkが３つ、fieldwork_otherが６つあるとき) (検索orビルドの指定が５のとき) (検索orビルドの対象がfieldworkのとき) ５つの配列のうち、３件は既存の配列、２件はビルドされたものが返ってくること
       Failure/Error: expect(results[1]).to eq fieldworks[0]

         expected: #<Programs::JoinLeaders::TransportExpense id: 0, remarks: "Ipsum dolorum nihil omnis.", fare: 6212, c...ted_at: "2024-02-26 17:47:09.998638000 +0900", file: nil, original_filename: nil, no_receipt: false>
              got: #<Programs::JoinLeaders::TransportExpense id: nil, remarks: "", fare: 0, category: "fieldwork", order...ram_id: nil, created_at: nil, updated_at: nil, file: nil, original_filename: nil, no_receipt: false>

         (compared using ==)

         Diff:

         @@ -1,14 +1,14 @@
         -#<Programs::JoinLeaders::TransportExpense:0x0000ffff859f35c8
         - id: 0,
         - remarks: "Ipsum dolorum nihil omnis.",
         - fare: 6212,
         +#<Programs::JoinLeaders::TransportExpense:0x0000ffff85a27e40
         + id: nil,
         + remarks: "",
         + fare: 0,
           category: "fieldwork",
           order: 2,
           program_join_leader_expense_id: 906,
         - leader_id: 0,
         - program_id: 4810,
         - created_at: Mon, 26 Feb 2024 17:47:09.998638000 JST +09:00,
         - updated_at: Mon, 26 Feb 2024 17:47:09.998638000 JST +09:00,
         + leader_id: nil,
         + program_id: nil,
         + created_at: nil,
         + updated_at: nil,
           file: nil,
           original_filename: nil,
           no_receipt: false>

       # ./spec/models/programs/join_leaders/expense_spec.rb:162:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  290) Programs::JoinLeaders::Expense#find_or_build_transport_expenses_array (紐づくTransportExpenseについて、カテゴリが、localが５つ、extraが０こ、fieldworkが３つ、fieldwork_otherが６つあるとき) (検索orビルドの指定が５のとき) (検索orビルドの対象がfieldwork_otherのとき) ６件中、５件までしか配列までしか返ってこないこと
       Failure/Error: expect(results).to match_array fieldwork_others[0..4]

         expected collection contained:  [#<Programs::JoinLeaders::TransportExpense id: 0, remarks: "Eum cupiditate iusto dolorem.", fare: 911...ed_at: "2024-02-26 17:47:10.073999000 +0900", file: nil, original_filename: nil, no_receipt: false>]
         actual collection contained:    [#<Programs::JoinLeaders::TransportExpense id: nil, remarks: "", fare: 0, category: "fieldwork_other"...am_id: nil, created_at: nil, updated_at: nil, file: nil, original_filename: nil, no_receipt: false>]
         the missing elements were:      [#<Programs::JoinLeaders::TransportExpense id: 0, remarks: "Eum cupiditate iusto dolorem.", fare: 911...ed_at: "2024-02-26 17:47:10.073999000 +0900", file: nil, original_filename: nil, no_receipt: false>]
         the extra elements were:        [#<Programs::JoinLeaders::TransportExpense id: nil, remarks: "", fare: 0, category: "fieldwork_other"...am_id: nil, created_at: nil, updated_at: nil, file: nil, original_filename: nil, no_receipt: false>]
       # ./spec/models/programs/join_leaders/expense_spec.rb:178:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  291) Programs::JoinLeaders::Expense [交通費へのリレーション] #transport_expenses 交通費データが全て取得できること
       Failure/Error: expect(results.size).to eq 8

         expected: 8
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:207:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  292) Programs::JoinLeaders::Expense [交通費へのリレーション] #local_transport_expenses 通常交通費データが並び順に取得できること
       Failure/Error: expect(results.size).to eq 2

         expected: 2
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:215:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  293) Programs::JoinLeaders::Expense [交通費へのリレーション] #extra_transport_expenses 例外交通費データが並び順に取得できること
       Failure/Error: expect(results.size).to eq 2

         expected: 2
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:227:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  294) Programs::JoinLeaders::Expense [交通費へのリレーション] #fieldwork_transport_expenses 現場交通費データが並び順に取得できること
       Failure/Error: expect(results.size).to eq 2

         expected: 2
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:239:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  295) Programs::JoinLeaders::Expense [交通費へのリレーション] #fieldwork_other_transport_expenses 現場その他交通費データが並び順に取得できること
       Failure/Error: expect(results.size).to eq 2

         expected: 2
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:251:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  296) Programs::JoinLeaders::Expense#total_expense_amount 経費の合計金額が返ること
       Failure/Error: expect(expense.total_expense_amount).to eq 24000

         expected: 24000
              got: 23000

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:286:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  297) Programs::JoinLeaders::Expense#transportation_total extraの交通費が存在するとき extraの交通費の合計を返すこと
       Failure/Error: is_expected.to eq 22222

         expected: 22222
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:355:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  298) Programs::JoinLeaders::Expense#transportation_total localとextraとfieldworkとfieldwork_otherの費用が存在するとき localとextraの交通費の合計を返すこと
       Failure/Error: is_expected.to eq 33333

         expected: 33333
              got: 11111

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:382:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  299) Programs::JoinLeaders::Expense#fieldwork_total fieldwork_otherの交通費が存在するとき fieldwork_otherの交通費の合計を返すこと
       Failure/Error: is_expected.to eq 22222

         expected: 22222
              got: 0

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:416:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  300) Programs::JoinLeaders::Expense#fieldwork_total localとextraとfieldworkとfieldwork_otherの費用が存在するとき fieldworkとfieldwork_otherの交通費の合計を返すこと
       Failure/Error: is_expected.to eq 33333

         expected: 33333
              got: 11111

         (compared using ==)
       # ./spec/models/programs/join_leaders/expense_spec.rb:443:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  301) Programs::JoinLeaders::TransportExpense#valid? (異常系) (orderの一意性制約について) (すでに、「同一経費、同一カテゴリ、同一順番」の交通経費費が登録されている場合) is expected to equal false
       Failure/Error: it { is_expected.to be false }

         expected false
              got true
       # ./spec/models/programs/join_leaders/transport_expense_spec.rb:80:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  302) Props::AiFeatures::ProgramInstruction#as_props Propsが返ること
       Failure/Error:
         create(:ai_features_program_instruction,
           id: 15,
           choice_content: "hello! How are you?",
           finish_reason: "stop",
           message_hearing: "hello! How are you?",
           message_system: "I am fine.",
           llm_model_name: "gpt-3.5-turbo",
           temperature: 0.7,
           usage_total_tokens: 0,
           user: user

       NoMethodError:
         undefined method `each' for nil:NilClass
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/decorator/new_constructor.rb:9:in `new'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/decorator.rb:16:in `send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/decorator.rb:12:in `method_missing'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/configuration.rb:23:in `block in initialize'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/ai_features/program_instruction_spec.rb:4:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  303) Props::LeaderPayments::BankTransfers::Traceability#as_props キャメルケースのJSON値が取得できること
       Failure/Error:
         create(:leader_payments_bank_transfer,
           id: 100,
           bank_number: "0001",
           branch_number: "001",
           account_type: "1",
           account_number: "1234567",
           account_name: "テスト太郎の銀行口座",
           amount: "100",
           completed_at: "2023-08-04 12:00:00",
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/leader_payments/bank_transfers/traceability_spec.rb:33:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  304) Props::LeaderPayments::Salaries::Staff#as_props Propsが取得できること
       Failure/Error:
         create(:leader_payments_salary,
           # 値は適当なので整合性はありません...
           id: 1200,
           advanced_compensation: 20000,
           caluculated_at: "2023/08/12 13:00:34",
           is_dependent_deduction: true,
           dependents_deduction_num: 2,
           total_compensation: 98000,
           total_expenses: 50000,
           total_extra_time_amount: 30000,

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/leader_payments/salaries/staff_spec.rb:38:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  305) Props::LeaderPayments::TargetTerms::Staff#as_props 関連データが全て存在するとき Propsが取得できること
       Failure/Error: let!(:salary) { create(:leader_payments_salary, target_term: target_term) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/leader_payments/target_terms/staff_spec.rb:19:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  306) Props::LeaderPayments::TargetTerms::Staff#as_props 関連データが全て存在しないとき Propsが取得できること
       Failure/Error: is_salaries_present: model.salaries.present?,

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # ./app/models/props/leader_payments/target_terms/staff.rb:26:in `merge_params'
       # ./app/models/props/leader_payments/target_terms/staff.rb:19:in `as_props'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/as_props.rb:18:in `as_props'
       # ./spec/models/props/leader_payments/target_terms/staff_spec.rb:16:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/leader_payments/target_terms/staff_spec.rb:45:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  307) Props::Leaders::PersonalInfo#as_props [プレーンなPropsで意図しない内容を出したくないため]NotImplementedError
       Got 0 failures and 2 other errors:

       307.1) Failure/Error: let!(:leaders_personal_info) { create(:leaders_personal_info) }

              ActiveRecord::InvalidForeignKey:
                Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/models/props/leaders/personal_info_spec.rb:45:in `block (3 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Cannot add or update a child row: a foreign key constraint fails (`lbe_test`.`leaders_personal_infos`, CONSTRAINT `fk_rails_e31cec15bb` FOREIGN KEY (`leader_id`) REFERENCES `leaders` (`id`))
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       307.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  308) Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo があるとき 銀行情報に紐づいているとき キャメルケースのJSON値が取得できること
       Failure/Error:
         create(:leader,
           id: 100,
           email: "ishigaki@example.com",
           name: "Ishigaki",
           bank_info: bank_info,
           is_active: true,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_bank_infos in model LeaderPayments::BankInfo.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:47:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  309) Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo があるとき 銀行情報に紐づいていないとき キャメルケースのJSON値が取得できること
       Failure/Error: _bank_info = model.bank_info || model.build_bank_info

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_bank_infos in model LeaderPayments::BankInfo.
       # ./app/models/props/leaders/staff_for_index.rb:65:in `bank_info_attributes'
       # ./app/models/props/leaders/staff_for_index.rb:53:in `as_props'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/as_props.rb:18:in `as_props'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:44:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:105:in `block (7 levels) in <top (required)>'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:103:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  310) Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo がないとき 銀行情報に紐づいているとき キャメルケースのJSON値が取得できること
       Failure/Error:
         create(:leader,
           id: 100,
           email: "ishigaki@example.com",
           name: "Ishigaki",
           bank_info: bank_info,
           is_active: true,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_bank_infos in model LeaderPayments::BankInfo.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:47:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  311) Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo がないとき 銀行情報に紐づいていないとき キャメルケースのJSON値が取得できること
       Failure/Error: _bank_info = model.bank_info || model.build_bank_info

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_bank_infos in model LeaderPayments::BankInfo.
       # ./app/models/props/leaders/staff_for_index.rb:65:in `bank_info_attributes'
       # ./app/models/props/leaders/staff_for_index.rb:53:in `as_props'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/as_props.rb:18:in `as_props'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:44:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:166:in `block (7 levels) in <top (required)>'
       # ./spec/models/props/leaders/staff_for_index_spec.rb:164:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  312) Props::Manage::Employee#as_props associationがあるとき Propsが返ること
       Failure/Error:
         create(:manage_employee,
           id: 15,
           name: "山田太郎",
           created_at: Time.zone.parse("2023-02-10 02:00:00"),
           updated_at: Time.zone.parse("2023-02-15 04:00:00"),
           user: user,
           team: team,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/employee_spec.rb:5:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  313) Props::Manage::ProgramDirectCost#as_props Propsが返ること
       Failure/Error: let!(:manage_program) { create(:manage_program, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/program_direct_cost_spec.rb:19:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/manage/program_direct_cost_spec.rb:16:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  314) Props::Manage::Program#as_props Propsが返ること
       Failure/Error:
         create(:manage_program,
           id: 15,
           name: "案件1",
           earnings: 1_400_000,
           kintone_code: "123456789",
           agent: agent,
           client: client,
           program: program
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/program_spec.rb:4:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  315) Props::Manage::Programs::Analytic#as_props Propsが返ること
       Failure/Error:
         create(:manage_program,
           id: 15,
           name: "案件1",
           earnings: 1_400_000,
           participant_count: 10,
           kintone_code: "123456789",
           event_date: Date.new(2023, 1, 10),
           revenue_closure_at: DateTime.new(2023, 1, 15),
           agent: agent,
           client: client,

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/programs/analytic_spec.rb:34:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  316) Props::Manage::Snapshot::Agent#as_props Propsが返ること
       Failure/Error:
         create(:manage_snapshot_agent,
           id: 15,
           name: "株式会社テスト",
           prefecture: "Tokyo",
           region: "Kanto",
           item: item,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_snapshot_items in model Manage::Snapshot::Item.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/snapshot/agent_spec.rb:4:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  317) Props::Manage::Snapshot::Client#as_props Propsが返ること
       Failure/Error:
         create(:manage_snapshot_client,
           id: 15,
           name: "福岡XX中学校",
           prefecture: "Fukuoka",
           region: "Kyushu",
           item: item,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_snapshot_items in model Manage::Snapshot::Item.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/snapshot/client_spec.rb:4:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  318) Props::Manage::Snapshot::Employee#as_props Propsが返ること
       Failure/Error: let!(:team) { create(:manage_snapshot_team, item: item) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_snapshot_items in model Manage::Snapshot::Item.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/snapshot/employee_spec.rb:16:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/manage/snapshot/employee_spec.rb:11:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  319) Props::Manage::Snapshot::Team#as_props Propsが返ること
       Failure/Error:
         create(:manage_snapshot_team,
           id: 15,
           name: "福岡チームA",
           created_at: Time.zone.parse("2023-02-10 02:00:00"),
           updated_at: Time.zone.parse("2023-02-15 04:00:00"),
           item: item,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_snapshot_items in model Manage::Snapshot::Item.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/props/manage/snapshot/team_spec.rb:4:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  320) Props::Programs::JoinLeaders::Expenses::WithTransport#as_props (交通費が各種2つずつ存在するとき) キャメルケースのJSON値され、交通費が全て5つずつ取得できること
       Got 20 failures from failure aggregation block.
       # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

       320.1) Failure/Error: expect(serialize[:localTransportExpensesTotal]).to eq 2500

                expected: 2500
                     got: 0

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:75:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.2) Failure/Error: expect(serialize[:localTransportExpenses][0][:fare]).to eq 1000

                expected: 1000
                     got: 0

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:77:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.3) Failure/Error: expect(serialize[:localTransportExpenses][0][:remarks]).to eq "localだよん1"

                expected: "localだよん1"
                     got: ""

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:78:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.4) Failure/Error: expect(serialize[:localTransportExpenses][1][:fare]).to eq 1500

                expected: 1500
                     got: 0

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:79:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.5) Failure/Error: expect(serialize[:localTransportExpenses][1][:remarks]).to eq "localだよん2"

                expected: "localだよん2"
                     got: ""

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:80:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.6) Failure/Error: expect(serialize[:extraTransportExpensesTotal]).to eq 4500

                expected: 4500
                     got: 2500

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:83:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.7) Failure/Error: expect(serialize[:extraTransportExpenses][0][:fare]).to eq 2000

                expected: 2000
                     got: 1000

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:85:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.8) Failure/Error: expect(serialize[:extraTransportExpenses][0][:remarks]).to eq "extraだよん1"

                expected: "extraだよん1"
                     got: "localだよん1"

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:86:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.9) Failure/Error: expect(serialize[:extraTransportExpenses][1][:fare]).to eq 2500

                expected: 2500
                     got: 1500

                (compared using ==)
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:87:in `block (5 levels) in <top (required)>'
              # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
              # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.10) Failure/Error: expect(serialize[:extraTransportExpenses][1][:remarks]).to eq "extraだよん2"

                 expected: "extraだよん2"
                      got: "localだよん2"

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:88:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.11) Failure/Error: expect(serialize[:fieldworkTransportExpensesTotal]).to eq 6500

                 expected: 6500
                      got: 4500

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:91:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.12) Failure/Error: expect(serialize[:fieldworkTransportExpenses][0][:fare]).to eq 3000

                 expected: 3000
                      got: 2000

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:93:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.13) Failure/Error: expect(serialize[:fieldworkTransportExpenses][0][:remarks]).to eq "fwだよん1"

                 expected: "fwだよん1"
                      got: "extraだよん1"

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:94:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.14) Failure/Error: expect(serialize[:fieldworkTransportExpenses][1][:fare]).to eq 3500

                 expected: 3500
                      got: 2500

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:95:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.15) Failure/Error: expect(serialize[:fieldworkTransportExpenses][1][:remarks]).to eq "fwだよん2"

                 expected: "fwだよん2"
                      got: "extraだよん2"

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:96:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.16) Failure/Error: expect(serialize[:fieldworkOtherTransportExpensesTotal]).to eq 8500

                 expected: 8500
                      got: 6500

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:99:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.17) Failure/Error: expect(serialize[:fieldworkOtherTransportExpenses][0][:fare]).to eq 4000

                 expected: 4000
                      got: 3000

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:101:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.18) Failure/Error: expect(serialize[:fieldworkOtherTransportExpenses][0][:remarks]).to eq "fwoだよん1"

                 expected: "fwoだよん1"
                      got: "fwだよん1"

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:102:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.19) Failure/Error: expect(serialize[:fieldworkOtherTransportExpenses][1][:fare]).to eq 4500

                 expected: 4500
                      got: 3500

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:103:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

       320.20) Failure/Error: expect(serialize[:fieldworkOtherTransportExpenses][1][:remarks]).to eq "fwoだよん2"

                 expected: "fwoだよん2"
                      got: "fwだよん2"

                 (compared using ==)
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:104:in `block (5 levels) in <top (required)>'
               # ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:71:in `block (4 levels) in <top (required)>'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
               # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
               # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'

  321) Props::Programs::Staff#as_props 標準ケース キャメルケースのJSON値が取得できること
       Failure/Error: return [] if model.leaders.blank?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/domains/programs/join_leaders.rb:34:in `call'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/domain_delegate.rb:52:in `block in domain_delegate'
       # ./lib/choron_support/props/attributes.rb:279:in `__build_props_attribute__'
       # ./lib/choron_support/props/attributes.rb:183:in `block in attributes'
       # ./lib/choron_support/props/attributes.rb:181:in `each'
       # ./lib/choron_support/props/attributes.rb:181:in `attributes'
       # ./app/models/props/programs/staff.rb:35:in `as_props'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/as_props.rb:18:in `as_props'
       # ./spec/models/props/programs/staff_spec.rb:34:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/programs/staff_spec.rb:57:in `block (5 levels) in <top (required)>'
       # ./spec/models/props/programs/staff_spec.rb:56:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  322) Props::Programs::Staff#as_props original_program_idがある場合 original_program_idが含まれること
       Failure/Error: return [] if model.leaders.blank?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/domains/programs/join_leaders.rb:34:in `call'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/domain_delegate.rb:52:in `block in domain_delegate'
       # ./lib/choron_support/props/attributes.rb:279:in `__build_props_attribute__'
       # ./lib/choron_support/props/attributes.rb:183:in `block in attributes'
       # ./lib/choron_support/props/attributes.rb:181:in `each'
       # ./lib/choron_support/props/attributes.rb:181:in `attributes'
       # ./app/models/props/programs/staff.rb:35:in `as_props'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/as_props.rb:18:in `as_props'
       # ./spec/models/props/programs/staff_spec.rb:34:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/programs/staff_spec.rb:96:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  323) Props::Programs::Staff#as_props copied_programsがある場合 copied_programsが含まれること
       Failure/Error: return [] if model.leaders.blank?

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./app/models/domains/programs/join_leaders.rb:34:in `call'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/domain_delegate.rb:52:in `block in domain_delegate'
       # ./lib/choron_support/props/attributes.rb:279:in `__build_props_attribute__'
       # ./lib/choron_support/props/attributes.rb:183:in `block in attributes'
       # ./lib/choron_support/props/attributes.rb:181:in `each'
       # ./lib/choron_support/props/attributes.rb:181:in `attributes'
       # ./app/models/props/programs/staff.rb:35:in `as_props'
       # /usr/local/bundle/gems/choron_support-0.1.8/lib/choron_support/as_props.rb:18:in `as_props'
       # ./spec/models/props/programs/staff_spec.rb:34:in `block (3 levels) in <top (required)>'
       # ./spec/models/props/programs/staff_spec.rb:106:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  324) Queries::Range#call 指定した範囲のレコードが取得できること
       Failure/Error: expect(users1.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/queries/range_spec.rb:13:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  325) Queries::SearchLikeWord#call 指定した範囲のレコードが取得できること
       Failure/Error: expect(users1.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/queries/search_like_word_spec.rb:13:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  326) ScheduledTasks::RepairDbConnection.task_run Service実行が正常終了したとき 正常終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RepairDbConnection.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:49:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  327) ScheduledTasks::RepairDbConnection.task_run Service実行が正常終了したとき Slackへの通知が送られていないこと
       Failure/Error: initialize_with { ScheduledTasks::RepairDbConnection.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:49:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  328) ScheduledTasks::RepairDbConnection.task_run Service実行が正常終了したとき 古いデータが削除されていること
       Failure/Error: initialize_with { ScheduledTasks::RepairDbConnection.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:49:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  329) ScheduledTasks::RepairDbConnection.task_run Service実行がエラーで終了したとき 失敗終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RepairDbConnection.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:49:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  330) ScheduledTasks::RepairDbConnection.task_run Service実行がエラーで終了したとき Slackへのエラー通知が送られていること
       Failure/Error: initialize_with { ScheduledTasks::RepairDbConnection.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:49:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  331) ScheduledTasks::RunHeartbeat.task_run 正常終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RunHeartbeat.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:53:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_heartbeat_spec.rb:29:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  332) ScheduledTasks::RunHeartbeat.task_run Slackへの通知が送られていないこと
       Failure/Error: initialize_with { ScheduledTasks::RunHeartbeat.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:53:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_heartbeat_spec.rb:29:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  333) ScheduledTasks::RunHeartbeat.task_run 古いデータが削除されていること
       Failure/Error: initialize_with { ScheduledTasks::RunHeartbeat.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:53:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_heartbeat_spec.rb:29:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  334) ScheduledTasks::RunNotifyRemindExpenseRequest.task_run 正常終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RunNotifyRemindExpenseRequest.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:65:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  335) ScheduledTasks::RunNotifyRemindExpenseRequest.task_run Slackへの通知が２通送られること
       Failure/Error: initialize_with { ScheduledTasks::RunNotifyRemindExpenseRequest.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:65:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  336) ScheduledTasks::RunNotifyRemindExpenseRequest.task_run 古いデータが削除されていること
       Failure/Error: initialize_with { ScheduledTasks::RunNotifyRemindExpenseRequest.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:65:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  337) ScheduledTasks::RunNotifyRemindExpenseRequest.task_run 本日分が失敗しているとき 再実行が正常終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RunNotifyRemindExpenseRequest.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:65:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  338) ScheduledTasks::RunProfitSyncAgent.task_run 正常終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RunProfitSyncAgent.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:61:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  339) ScheduledTasks::RunProfitSyncAgent.task_run Slackへの通知が２通送られること
       Failure/Error: initialize_with { ScheduledTasks::RunProfitSyncAgent.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:61:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  340) ScheduledTasks::RunProfitSyncAgent.task_run 古いデータが削除されていること
       Failure/Error: initialize_with { ScheduledTasks::RunProfitSyncAgent.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:61:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  341) ScheduledTasks::RunProfitSyncAgent.task_run 本日分が失敗しているとき 再実行が正常終了した結果が取得できること
       Failure/Error: initialize_with { ScheduledTasks::RunProfitSyncAgent.new }

       NoMethodError:
         undefined method `each' for nil:NilClass
       # ./spec/factories/scheduled_tasks.rb:61:in `block (4 levels) in <main>'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `instance_exec'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:51:in `build_class_instance'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:28:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  342) UserFeedBack.login_user userが設定されたデータのみ取得できること
       Failure/Error: expect(records.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/user_feed_back_spec.rb:23:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  343) UserFeedBack.before_login_user userがnilのデータのみ取得できること
       Failure/Error: expect(records.size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/models/user_feed_back_spec.rb:35:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  344) User.select_options_about_users チームの選択肢が返ること
       Failure/Error:
         expect(subject).to match_array ([
           { value: 1, label: "user01@example.com"},
           { value: 2, label: "user02@example.com"},
           { value: 3, label: "user03@example.com"},
         ])

         expected collection contained:  [{:label=>"user01@example.com", :value=>1}, {:label=>"user02@example.com", :value=>2}, {:label=>"user03@example.com", :value=>3}]
         actual collection contained:    []
         the missing elements were:      [{:label=>"user01@example.com", :value=>1}, {:label=>"user02@example.com", :value=>2}, {:label=>"user03@example.com", :value=>3}]
       # ./spec/models/user_spec.rb:80:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  345) Values::Manage::Analytics::Program#as_props Propsが取得できること
       Failure/Error: create(:manage_program, :with_must_associations)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/values/manage/analytics/program_spec.rb:5:in `block (3 levels) in <top (required)>'
       # ./spec/models/values/manage/analytics/program_spec.rb:3:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  346) Values::Manage::Analytics::Program#case 案件情報が分析できる内容を取得できること
       Failure/Error: create(:manage_program, client: client, agent: agent)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/values/manage/analytics/program_spec.rb:29:in `block (3 levels) in <top (required)>'
       # ./spec/models/values/manage/analytics/program_spec.rb:25:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  347) Values::Manage::Analytics::Program#data 案件に対して従業員の参加データ存在しないとき 空の配列が取得できること
       Failure/Error: create(:manage_program, client: client, agent: agent, earnings: 1000000)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/values/manage/analytics/program_spec.rb:48:in `block (3 levels) in <top (required)>'
       # ./spec/models/values/manage/analytics/program_spec.rb:44:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  348) Values::Manage::Analytics::Program#data 案件に複数の従業員が参加しているとき 分析用のデータ配列が取得できること
       Failure/Error: create(:manage_program, client: client, agent: agent, earnings: 1000000)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/values/manage/analytics/program_spec.rb:48:in `block (3 levels) in <top (required)>'
       # ./spec/models/values/manage/analytics/program_spec.rb:44:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  349) Values::Manage::Analytics::Programs#total 各種案件の集計データが取得できること
       Failure/Error: let!(:employee1) { create(:manage_employee, :with_user, name: "従業員1", team: team_a) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/values/manage/analytics/programs_spec.rb:13:in `block (2 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  350) Values::Manage::Analytics::Programs#data 各種案件の分析用データ一覧が取得できること
       Failure/Error: let!(:employee1) { create(:manage_employee, :with_user, name: "従業員1", team: team_a) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/models/values/manage/analytics/programs_spec.rb:13:in `block (2 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  351) Current::MypagesController PUT /current/mypage (email を更新するとき) データが更新されること
       Failure/Error: current_user.reload

       ActiveRecord::RecordNotFound:
         Couldn't find User with 'id'=0
       # /usr/local/bundle/gems/activestorage-7.0.4.2/lib/active_storage/attached/model.rb:237:in `reload'
       # ./spec/requests/current/mypages_controller_spec.rb:23:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  352) Current::MypagesController PUT /current/mypage (password を更新するとき) (古いパスワードが一致するとき) (確認用パスワードが一致するとき) データが更新されること
       Failure/Error: current_user.reload

       ActiveRecord::RecordNotFound:
         Couldn't find User with 'id'=0
       # /usr/local/bundle/gems/activestorage-7.0.4.2/lib/active_storage/attached/model.rb:237:in `reload'
       # ./spec/requests/current/mypages_controller_spec.rb:44:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  353) Current::MypagesController PUT /current/mypage (password を更新するとき) (古いパスワードが一致するとき) (確認用パスワードが一致しないとき) データが更新されないこと
       Failure/Error: current_user.reload

       ActiveRecord::RecordNotFound:
         Couldn't find User with 'id'=0
       # /usr/local/bundle/gems/activestorage-7.0.4.2/lib/active_storage/attached/model.rb:237:in `reload'
       # ./spec/requests/current/mypages_controller_spec.rb:54:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  354) Current::MypagesController PUT /current/mypage (password を更新するとき) (古いパスワードが一致しないとき) データが更新されないこと
       Failure/Error: current_user.reload

       ActiveRecord::RecordNotFound:
         Couldn't find User with 'id'=0
       # /usr/local/bundle/gems/activestorage-7.0.4.2/lib/active_storage/attached/model.rb:237:in `reload'
       # ./spec/requests/current/mypages_controller_spec.rb:65:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  355) Devises::Leaders::PasswordsController POST /leaders/password リーダーのパスワード再設定処理が行われ、メールが送信されること
       Failure/Error: is_expected.to eq 302

         expected: 302
              got: 200

         (compared using ==)
       # ./spec/requests/devises/leaders/passwords_controller_spec.rb:18:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  356) Devises::Leaders::PasswordsController PUT /leaders/password トークンが一致するとき 新しいパスワードが設定され、パスワードの状態が更新されること
       Failure/Error: is_expected.to eq 302

         expected: 302
              got: 200

         (compared using ==)
       # ./spec/requests/devises/leaders/passwords_controller_spec.rb:57:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  357) Devises::Leaders::PasswordsController PUT /leaders/password トークンが一致しないとき 新しいパスワードが設定されないこと
       Failure/Error: leader.reload

       ActiveRecord::RecordNotFound:
         Couldn't find Leader with 'id'=0
       # /usr/local/bundle/gems/activestorage-7.0.4.2/lib/active_storage/attached/model.rb:237:in `reload'
       # ./spec/requests/devises/leaders/passwords_controller_spec.rb:76:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  358) Devises::SessionsController POST /users/sign_in role: :general, expecteds: {:status=>302, :path=>"/"} (存在するメールアドレス+正しいパスワードでログインするとき) ログイン後のページにリダイレクトされること
       Failure/Error: is_expected.to eq expecteds[:status]

         expected: 302
              got: 200

         (compared using ==)
       # ./spec/requests/devises/sessions_controller_spec.rb:41:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  359) Devises::SessionsController POST /users/sign_in role: :super, expecteds: {:status=>302, :path=>"/staff/dashboard"} (存在するメールアドレス+正しいパスワードでログインするとき) ログイン後のページにリダイレクトされること
       Failure/Error: is_expected.to eq expecteds[:status]

         expected: 302
              got: 200

         (compared using ==)
       # ./spec/requests/devises/sessions_controller_spec.rb:41:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  360) Devises::SessionsController POST /users/sign_in role: :staff, expecteds: {:status=>302, :path=>"/staff/dashboard"} (存在するメールアドレス+正しいパスワードでログインするとき) ログイン後のページにリダイレクトされること
       Failure/Error: is_expected.to eq expecteds[:status]

         expected: 302
              got: 200

         (compared using ==)
       # ./spec/requests/devises/sessions_controller_spec.rb:41:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  361) Leader::Externals::Programs::AuthsController GET /leader/externals/programs/:program_id/auth プログラムが存在するとき アクセス用のキーが一致しないとき 認証エラー画面にリダイレクトされること
       Failure/Error: is_expected.to eq 302

         expected: 302
              got: 404

         (compared using ==)
       # ./spec/requests/leader/externals/programs/auths_controller_spec.rb:18:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  362) Leader::Externals::Programs::AuthsController GET /leader/externals/programs/:program_id/auth プログラムが存在するとき アクセス用のキーが一致するとき ログイン画面が表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/leader/externals/programs/auths_controller_spec.rb:26:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  363) Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき リーダーのメールアドレスに一致するリーダーが存在しないとき メールアドレスに誤りがあるエラーメッセージが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/leader/externals/programs/auths_controller_spec.rb:57:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  364) Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき リーダーが該当のプログラムに参加していないとき プログラムに参加していないことを促すエラーメッセージが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/leader/externals/programs/auths_controller_spec.rb:74:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  365) Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき リーダーのプログラム用パスワードが間違えているとき パスワードが間違えているエラーメッセージが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/leader/externals/programs/auths_controller_spec.rb:95:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  366) Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき 参加リーダーが正しいパスワードを入力したとき 認証が完了し、プログラム経費の編集画面へ遷移されること
       Failure/Error: is_expected.to eq 302

         expected: 302
              got: 404

         (compared using ==)
       # ./spec/requests/leader/externals/programs/auths_controller_spec.rb:116:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  367) Leader::Externals::Programs::ExpensesController GET /leader/externals/programs/:program_id/expenses ログインしているとき showページが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 302

         (compared using ==)
       # ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:20:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  368) Leader::Externals::Programs::ExpensesController GET /leader/externals/programs/:program_id/expenses/edit ログイン済のとき (まだ一度も経費申請をしていない場合) 経費申請画面が表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 302

         (compared using ==)
       # ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:53:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  369) Leader::Externals::Programs::ExpensesController GET /leader/externals/programs/:program_id/expenses/edit ログイン済のとき (すでに経費申請済みの場合) 未申請と同様に、経費申請画面が表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 302

         (compared using ==)
       # ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:88:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  370) Leader::Externals::Programs::ExpensesController PATCH /leader/externals/programs/:program_id/expenses ログイン済のとき (正常系) 正常に更新されたことを伝える
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 302

         (compared using ==)
       # ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:131:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  371) Leader::Externals::Programs::ExpensesController PATCH /leader/externals/programs/:program_id/expenses ログイン済のとき (異常系) エラーを伝える
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 302

         (compared using ==)
       # ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:140:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  372) Staff::AiFeatures::ProgramInstructionsController GET /staff/ai_features/program_instructions/new プロンプト入力画面が表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 500

         (compared using ==)
       # ./spec/requests/staff/ai_features/program_instructions_controller_spec.rb:21:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  373) Staff::AiFeatures::ProgramInstructionsController POST /staff/ai_features/program_instructions プロンプト入力画面が表示されるこ
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 500

         (compared using ==)
       # ./spec/requests/staff/ai_features/program_instructions_controller_spec.rb:30:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  374) Staff::Expenses::AcceptedStatusesController PUT /staff/expenses/accepted_statuses/:id/accept 経費申請が承認状態になること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/expenses/accepted_statuses_controller_spec.rb:10:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  375) Staff::Expenses::AcceptedStatusesController PUT /staff/expenses/accepted_statuses/:id/reject 経費申請が否認状態になり、否認理由も更新され、メールが送信されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/expenses/accepted_statuses_controller_spec.rb:26:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  376) Staff::Expenses::AcceptedStatusesController PUT /staff/expenses/accepted_statuses/:id/freeze_to_apply 経費申請が凍結状態になること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/expenses/accepted_statuses_controller_spec.rb:50:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  377) Staff::Expenses::CsvsController GET /staff/expenses/csv (event_monthが指定されていない場合) 現在日の月の経費情報がダウンロードできること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 500

         (compared using ==)
       # ./spec/requests/staff/expenses/csvs_controller_spec.rb:17:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  378) Staff::Expenses::CsvsController GET /staff/expenses/csv (event_monthが指定されている場合) 指定された月の経費情報がダウンロードできること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 500

         (compared using ==)
       # ./spec/requests/staff/expenses/csvs_controller_spec.rb:31:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  379) Staff::ExpensesController GET /staff/expenses 経費情報が表示されること
       Failure/Error: expect(props[:programsJoinLeadersExpenses].size).to eq 1

         expected: 1
              got: 0

         (compared using ==)
       # ./spec/requests/staff/expenses_controller_spec.rb:24:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  380) Staff::LeaderPayments::BankTransferCsvMetaInfosController GET /staff/leader_payments/bank_transfer_csv_meta_infos/:id/edit 編集画面が表示されること
       Failure/Error: let!(:bank_transfer_csv_meta_info) { create(:leader_payments_bank_transfer_csv_meta_info, transfer_date: "2023/09/15") }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/bank_transfer_csv_meta_infos_controller_spec.rb:7:in `block (3 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/bank_transfer_csv_meta_infos_controller_spec.rb:6:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  381) Staff::LeaderPayments::BankTransferCsvMetaInfosController PUT /staff/leader_payments/bank_transfer_csv_meta_infos/:id データが更新されて成功のレスポンスが返ること
       Failure/Error: let!(:bank_transfer_csv_meta_info) { create(:leader_payments_bank_transfer_csv_meta_info, transfer_date: "2023/07/14") }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/bank_transfer_csv_meta_infos_controller_spec.rb:21:in `block (3 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/bank_transfer_csv_meta_infos_controller_spec.rb:20:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  382) Staff::LeaderPayments::BankTransfers::BulkCompletesController PATCH /staff/leader_payments/bank_transfers/bulk_completes 指定した銀行振り込みデータが全て完了状態になっていること
       Failure/Error: let!(:bt1) { create(:leader_payments_bank_transfer, :uncompleted, target_term: target_term) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/bank_transfers/bulk_completes_controller_spec.rb:13:in `block (3 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/bank_transfers/bulk_completes_controller_spec.rb:8:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  383) Staff::LeaderPayments::BankTransfers::CompletesController PATCH /staff/leader_payments/bank_transfers/completes/:id 完了状態にするとき 指定した振込データが完了済になること
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, :uncompleted) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/bank_transfers/completes_controller_spec.rb:9:in `block (4 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/bank_transfers/completes_controller_spec.rb:6:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  384) Staff::LeaderPayments::BankTransfers::CompletesController PATCH /staff/leader_payments/bank_transfers/completes/:id 未完了状態にするとき 指定した振込データが未完了になること
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, :completed) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/bank_transfers/completes_controller_spec.rb:27:in `block (4 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/bank_transfers/completes_controller_spec.rb:6:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  385) Staff::LeaderPayments::TargetTerms::BankTransferTraceabilitiesController GET /staff/leader_payments/target_terms/:target_term_id/bank_transfer_traceability (データが揃っている場合) 対象期間に紐づく銀行振込データの生成元である給与や経費へのトレーサビリティが表示されること
       Failure/Error: let!(:bank_transfer) { create(:leader_payments_bank_transfer, target_term: target_term) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/bank_transfer_traceabilities_controller_spec.rb:17:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  386) Staff::LeaderPayments::TargetTerms::BankTransfersController GET /staff/leader_payments/target_terms/:target_term_id/bank_transfers 対象期間に紐づく銀行振込データの一覧が表示されること
       Failure/Error:
         create(:leader_payments_bank_transfer,
           target_term: target_term,
           amount: 1000,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/bank_transfers_controller_spec.rb:11:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  387) Staff::LeaderPayments::TargetTerms::CalcBankTransfersController POST /staff/leader_payments/target_terms/:target_term_id/calc_bank_transfers [Mockを利用したレスポンスの検証] 銀行振込データの作成が成功したとき 処理成功のレスポンスを返すこと
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/leader_payments/target_terms/calc_bank_transfers_spec.rb:16:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  388) Staff::LeaderPayments::TargetTerms::CalcBankTransfersController POST /staff/leader_payments/target_terms/:target_term_id/calc_bank_transfers [Mockを利用したレスポンスの検証] 銀行振込データの作成が失敗したとき 処理失敗のレスポンスとエラーメッセージを返すこと
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/leader_payments/target_terms/calc_bank_transfers_spec.rb:27:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  389) Staff::LeaderPayments::TargetTerms::CalcSalariesController POST /staff/leader_payments/target_terms/:target_term_id/calc_salaries 対象期間に紐づく給与を計算し、apiレスポンスを返すこと
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/leader_payments/target_terms/calc_salaries_controller_spec.rb:13:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  390) Staff::LeaderPayments::TargetTerms::ExportCsvsController GET /staff/leader_payments/target_terms/:target_term_id/export_csv 銀行振り込み依頼CSVが作成できたとき CSVがどの月のデータか分かる名前でダウンロードできること
       Failure/Error: let!(:target_csv_meta_info) { create(:leader_payments_bank_transfer_csv_meta_info, target_term: target_term, transfer_date: "2023/09/15") }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/export_csvs_controller_spec.rb:9:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  391) Staff::LeaderPayments::TargetTerms::ExportCsvsController GET /staff/leader_payments/target_terms/:target_term_id/export_csv 銀行振り込み依頼CSVが作成できなかったとき エラーメッセージが返ること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/leader_payments/target_terms/export_csvs_controller_spec.rb:58:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  392) Staff::LeaderPayments::TargetTerms::ExportYutyoBanksController GET /staff/leader_payments/target_terms/:target_term_id/export_yutyo_banks CSVの作成に成功するとき CSVデータがダウンロードされること
       Failure/Error: create(:leader_payments_bank_transfer, :yutyo_bank, target_term: target_term)

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/export_yutyo_banks_controller_spec.rb:10:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  393) Staff::LeaderPayments::TargetTerms::ExportYutyoBanksController GET /staff/leader_payments/target_terms/:target_term_id/export_yutyo_banks CSVの作成に失敗したとき 失敗のエラーメッセージがplainで返ること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/leader_payments/target_terms/export_yutyo_banks_controller_spec.rb:40:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  394) Staff::LeaderPayments::TargetTerms::PayslipsController GET /staff/leader_payments/target_terms/:target_term_id/payslips 対象の給与データが存在するとき CSVデータがダウンロードされること
       Failure/Error: create(:leader_payments_bank_transfer_csv_meta_info, target_term: _term, transfer_date: "2023/08/15")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/payslips_controller_spec.rb:14:in `block (3 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/target_terms/payslips_controller_spec.rb:11:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  395) Staff::LeaderPayments::TargetTerms::PayslipsController GET /staff/leader_payments/target_terms/:target_term_id/payslips 対象の給与データが存在しないとき 空のCSVデータがダウンロードされること
       Failure/Error: create(:leader_payments_bank_transfer_csv_meta_info, target_term: _term, transfer_date: "2023/08/15")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/payslips_controller_spec.rb:14:in `block (3 levels) in <top (required)>'
       # ./spec/requests/staff/leader_payments/target_terms/payslips_controller_spec.rb:11:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  396) Staff::LeaderPayments::TargetTerms::SalariesController GET /staff/leader_payments/target_terms/:target_term_id/salaries 対象期間に紐づく給与情報の一覧が表示されること
       Failure/Error:
         create(:leader_payments_salary,
           target_term: target_term,
           net_payment: 1000,
           total_expenses: 400,
           total_compensation: 700,
           advanced_compensation: 200,
           total_deduction_amount: 0,
           total_extra_time_amount: 0,
           withholding_tax: 100,
         )

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table leader_payments_target_terms in model LeaderPayments::TargetTerm.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/leader_payments/target_terms/salaries_controller_spec.rb:10:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  397) Staff::LeaderPayments::TargetTermsController GET /staff/leader_payments/target_terms 給与情報の一覧が表示されること
       Failure/Error: expect(props[:targetTerms].size).to eq 3

         expected: 3
              got: 0

         (compared using ==)
       # ./spec/requests/staff/leader_payments/target_terms_controller_spec.rb:14:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  398) Staff::LeadersController GET /staff/leaders リーダー一覧が表示されること
       Failure/Error: expect(props[:leaders].size).to eq 3

         expected: 3
              got: 0

         (compared using ==)
       # ./spec/requests/staff/leaders_controller_spec.rb:16:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  399) Staff::Manage::Analytics::ProgramsController GET /staff/manage/analytics/programs/:id 案件詳細画面が表示されること
       Failure/Error: let!(:manage_program) { create(:manage_program, agent: agent, client: client) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_clients in model Manage::Client.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/manage/analytics/programs_controller_spec.rb:23:in `block (3 levels) in <top (required)>'
       # ./spec/requests/staff/manage/analytics/programs_controller_spec.rb:22:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  400) Staff::Manage::EmployeesController GET /staff/manage/employees employee一覧が表示されること
       Failure/Error: let!(:employee) { create(:manage_employee, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/manage/employees_controller_spec.rb:7:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  401) Staff::Manage::EmployeesController GET /staff/manage/employees/new employee作成フォームが表示されること
       Failure/Error: let!(:employee) { build(:manage_employee, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/build.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/manage/employees_controller_spec.rb:20:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  402) Staff::Manage::EmployeesController POST /staff/manage/employees employeeが作成されること
       Failure/Error: expect { is_expected.to eq 200 }.to change { Manage::Employee.count }.by(1)
         expected `Manage::Employee.count` to have changed by 1, but was changed by 0
       # ./spec/requests/staff/manage/employees_controller_spec.rb:38:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  403) Staff::Manage::EmployeesController GET /staff/manage/employees/:id/edit employee修正フォームが表示されること
       Failure/Error: let!(:employee) { create(:manage_employee, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/manage/employees_controller_spec.rb:44:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  404) Staff::Manage::EmployeesController PUT /staff/manage/employees/:id employeeが更新されること
       Failure/Error: let!(:employee) { create(:manage_employee, :with_must_associations) }

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `public_send'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:16:in `block (2 levels) in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `each'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:15:in `block in object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/attribute_assigner.rb:14:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:13:in `object'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
       # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
       # ./spec/requests/staff/manage/employees_controller_spec.rb:58:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  405) Staff::Manage::TeamsController POST /staff/manage/teams teamが作成されること
       Failure/Error: expect { is_expected.to eq 200 }.to change { Manage::Team.count }.by(1)
         expected `Manage::Team.count` to have changed by 1, but was changed by 0
       # ./spec/requests/staff/manage/teams_controller_spec.rb:36:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  406) Staff::Manage::TeamsController GET /staff/manage/teams/:id/edit team修正フォームが表示されること
       Failure/Error: is_expected.to eq 200

       AbstractController::ActionNotFound:
         The action 'show' could not be found for Staff::Manage::TeamsController
       # /usr/local/bundle/gems/rack-attack-6.6.1/lib/rack/attack.rb:127:in `call'
       # /usr/local/bundle/gems/warden-1.2.9/lib/warden/manager.rb:36:in `block in call'
       # /usr/local/bundle/gems/warden-1.2.9/lib/warden/manager.rb:34:in `catch'
       # /usr/local/bundle/gems/warden-1.2.9/lib/warden/manager.rb:34:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/tempfile_reaper.rb:15:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/etag.rb:27:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/conditional_get.rb:27:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/head.rb:12:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/session/abstract/id.rb:266:in `context'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/session/abstract/id.rb:260:in `call'
       # /usr/local/bundle/gems/rails_semantic_logger-4.11.0/lib/rails_semantic_logger/rack/logger.rb:43:in `call_app'
       # /usr/local/bundle/gems/rails_semantic_logger-4.11.0/lib/rails_semantic_logger/rack/logger.rb:28:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/method_override.rb:24:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/runtime.rb:22:in `call'
       # /usr/local/bundle/gems/rack-2.2.6.2/lib/rack/sendfile.rb:110:in `call'
       # /usr/local/bundle/gems/railties-7.0.4.2/lib/rails/engine.rb:530:in `call'
       # /usr/local/bundle/gems/rack-test-2.0.2/lib/rack/test.rb:358:in `process_request'
       # /usr/local/bundle/gems/rack-test-2.0.2/lib/rack/test.rb:155:in `request'
       # /usr/local/bundle/gems/rspec-request_describer-0.3.2/lib/rspec/request_describer.rb:27:in `block (2 levels) in included'
       # /usr/local/bundle/gems/rspec-request_describer-0.3.2/lib/rspec/request_describer.rb:23:in `block (2 levels) in included'
       # ./spec/requests/staff/manage/teams_controller_spec.rb:45:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  407) Staff::Manage::TeamsController PUT /staff/manage/teams/:id teamが更新されること
       Failure/Error: expect { is_expected.to eq 200 }.to change { Manage::Team.find(team.id).name }.from(team.name).to("updated")

       ActiveRecord::UnknownPrimaryKey:
         Unknown primary key for table manage_teams in model Manage::Team.
       # ./spec/requests/staff/manage/teams_controller_spec.rb:60:in `block (4 levels) in <top (required)>'
       # ./spec/requests/staff/manage/teams_controller_spec.rb:60:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  408) Staff::Programs::ExpensesStatusesController PUT /staff/programs/:program_id/expenses_statuses/freeze 全ての経費データが申請不可状態に変更されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/expenses_statuses_controller_spec.rb:14:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  409) Staff::Programs::ExpensesStatusesController PUT /staff/programs/:program_id/expenses_statuses/accept 全ての経費データが承認状態に変更されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/expenses_statuses_controller_spec.rb:33:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  410) Staff::Programs::Kintones::RecruitmentInformationsController GET /staff/programs/:program_id/kintones/recruitment_information kintone_program_idが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/kintones/recruitment_informations_spec.rb:18:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  411) Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/close ユーザがスタッフのとき （正常系）まだ確定していない場合 収益情報の確定日時が設定されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:12:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  412) Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/close ユーザがスタッフのとき （異常系）すでに確定している場合 収益情報の確定日時が変更されないこと
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:21:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  413) Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/open ユーザがスーパーユーザのとき （正常系）まだ確定していない場合 revenue_openが呼ばれて、trueとして返ること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:40:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  414) Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/open ユーザがスーパーユーザでないとき 権限エラーになること
       Failure/Error: is_expected.to eq 403

         expected: 403
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:63:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  415) Staff::ProgramsController GET /staff/programs/:id Kintoneから情報が取得できるとき プログラム情報が表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs_controller_spec.rb:40:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  416) Staff::ProgramsController GET /staff/programs/:id Kintoneから情報が取得できないとき プログラム情報が表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs_controller_spec.rb:69:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  417) Staff::ProgramsController GET /staff/programs/new プログラム作成フォームが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 500

         (compared using ==)
       # ./spec/requests/staff/programs_controller_spec.rb:85:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  418) Staff::ProgramsController GET /staff/programs/:id/edit プログラム修正フォームが表示されること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs_controller_spec.rb:99:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  419) Staff::ProgramsController PUT /staff/programs/:id/apply_default_expenses (データの更新が成功するとき) 処理成功の結果が返ること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs_controller_spec.rb:151:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  420) Staff::ProgramsController PUT /staff/programs/:id/apply_default_expenses (データの更新が失敗するとき) 処理失敗の結果が返ること
       Failure/Error: is_expected.to eq 200

         expected: 200
              got: 404

         (compared using ==)
       # ./spec/requests/staff/programs_controller_spec.rb:162:in `block (4 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  421) Staff::StaffsController GET /staff/staffs スタッフ一覧が表示されること
       Failure/Error: expect(props[:staffs].size).to eq 3

         expected: 3
              got: 0

         (compared using ==)
       # ./spec/requests/staff/staffs_controller_spec.rb:18:in `block (3 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # -e:1:in `<main>'

  422) Staff::StaffsController POST /staff/staffs [正常系] (スーパユーザを作成するとき) スタッフデータが作成されること
       Failure/Error: expect(created_user.is_super?).to eq true

       NoMethodError:
         undefined method `is_super?' for nil:NilClass
       # ./spec/requests/staff/staffs_controller_spec.rb:54:in `block (5 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  423) Staff::StaffsController POST /staff/staffs [正常系] (スタッフユーザを作成するとき) (スタッフ管理者を作成するとき) スタッフデータが作成されること
       Failure/Error: expect(created_user.is_super?).to eq false

       NoMethodError:
         undefined method `is_super?' for nil:NilClass
       # ./spec/requests/staff/staffs_controller_spec.rb:79:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  424) Staff::StaffsController POST /staff/staffs [正常系] (スタッフユーザを作成するとき) (スタッフメンバーを作成するとき) スタッフデータが作成されること
       Failure/Error: expect(created_user.is_super?).to eq false

       NoMethodError:
         undefined method `is_super?' for nil:NilClass
       # ./spec/requests/staff/staffs_controller_spec.rb:103:in `block (6 levels) in <top (required)>'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
       # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/command_wrapper.rb:38:in `call'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:221:in `block in serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `fork'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:185:in `serve'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:148:in `block in run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `loop'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application.rb:142:in `run'
       # /usr/local/bundle/gems/spring-4.1.1/lib/spring/application/boot.rb:19:in `<top (required)>'
       # -e:1:in `<main>'

  425) Programs::NotifyRemindExpenseRequestService 明日が締め切りのProgramが２件、もっと先の締め切りが１件あるとき それぞれに、申請を行っているGLと、申請を行っていないGLがいるとき 申請を行っていないGLたちに、プログラム毎にメールを送ること
       Got 0 failures and 2 other errors:

       425.1) Failure/Error: let!(:pl_a_2) { create(:program_join_leader, program: program_a, leader: gl_2) }

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/services/programs/notify_remind_expense_request_service_spec.rb:23:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       425.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

  426) Programs::NotifyRemindExpenseRequestService 明日が締め切りのProgramが２件、もっと先の締め切りが１件あるとき それぞれに、申請を行っているGLと、申請を行っていないGLがいるとき 途中になにか異常があったとき falseを返すこと
       Got 0 failures and 2 other errors:

       426.1) Failure/Error: let!(:pl_a_2) { create(:program_join_leader, program: program_a, leader: gl_2) }

              ActiveRecord::RecordNotUnique:
                Mysql2::Error: Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/evaluation.rb:18:in `create'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:12:in `block in result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy/create.rb:9:in `result'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory.rb:43:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:29:in `block in run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/factory_runner.rb:28:in `run'
              # /usr/local/bundle/gems/factory_bot-6.2.1/lib/factory_bot/strategy_syntax_method_registrar.rb:28:in `block in define_singular_strategy_method'
              # ./spec/services/programs/notify_remind_expense_request_service_spec.rb:23:in `block (4 levels) in <top (required)>'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   Duplicate entry '0-0' for key 'programs_join_leaders.index_programs_join_leaders_on_program_id_and_leader_id'
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

       426.2) Failure/Error: _query(sql, @query_options.merge(options))

              ActiveRecord::StatementInvalid:
                Mysql2::Error: SAVEPOINT active_record_1 does not exist
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'
              # /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `load'
              # /usr/local/bundle/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'
              # -e:1:in `<main>'
              # ------------------
              # --- Caused by: ---
              # Mysql2::Error:
              #   SAVEPOINT active_record_1 does not exist
              #   /usr/local/bundle/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'

Finished in 19.53 seconds (files took 1.4 seconds to load)
1503 examples, 426 failures, 40 pending

Failed examples:

rspec ./spec/forms/staff/nowsta/compensations/form_spec.rb:77 # Staff::Nowsta::Compensations::Form#import ファイルが渡されているとき 該当するデータが全て存在するとき さらに、一部のemail(ishigaki)がUserとしても存在するとき、 trueが返るが、ishigakiのデータの謝礼金はCSVの値で更新されない
rspec ./spec/forms/staff/nowsta/compensations/form_spec.rb:110 # Staff::Nowsta::Compensations::Form#import ファイルが渡されているとき 該当するデータが一部だけ存在するとき trueが返り、各データの謝礼金がCSVの値で更新されるが、更新されなかったデータの警告が取得できること
rspec ./spec/forms/staff/programs/form_spec.rb:12 # Staff::Programs::Form#options プログラムデータ作成時に表示するoption一覧が取得できること
rspec ./spec/forms/staff/programs/form_spec.rb:60 # Staff::Programs::Form#create (正常にデータが作成されるとき) (参加するリーダー情報がパラメータでのみ渡されているとき) それぞれのデータが作成されること
rspec ./spec/forms/staff/programs/form_spec.rb:112 # Staff::Programs::Form#create (正常にデータが作成されるとき) (参加するリーダー情報がCSVで渡されているとき) 参加するリーダーのデータが作成されること
rspec ./spec/forms/staff/programs/form_spec.rb:143 # Staff::Programs::Form#create (データが作成されないとき) (CSVに存在しないメールアドレスが複数あるとき) データが作成されず、存在しないメールアドレスのエラーメッセージをまとめて取得できること
rspec ./spec/forms/staff/programs/form_spec.rb:196 # Staff::Programs::Form#update (正常にデータが更新されるとき) (参加するリーダー情報がパラメータでのみ渡されているとき) それぞれのデータが更新されること
rspec ./spec/forms/staff/programs/form_spec.rb:252 # Staff::Programs::Form#update (正常にデータが更新されるとき) (参加するリーダー情報がCSVで渡されているとき) 参加するリーダーのデータが作成されること
rspec ./spec/forms/staff/programs/form_spec.rb:286 # Staff::Programs::Form#update (データが更新されないとき) (CSVに存在しないメールアドレスが複数あるとき) データが作成されず、存在しないメールアドレスのエラーメッセージをまとめて取得できること
rspec ./spec/forms/staff/programs/form_spec.rb:312 # Staff::Programs::Form#update (データが更新されないとき) (kintone_program_idが重複しているとき) データの更新ができること
rspec ./spec/lib/lbe/nowsta/private/collection_spec.rb:66 # Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (正常系)プログラムが１つだけであり、メールアドレスが重複するとき 重複を取り除いたメールアドレスのリストが返ること
rspec ./spec/lib/lbe/nowsta/private/collection_spec.rb:85 # Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (正常系)User（スタッフ）として登録のあるメールアドレスが存在するとき Userとして登録のあるメールアドレスを省いたリストが返ること
rspec ./spec/lib/lbe/nowsta/private/collection_spec.rb:91 # Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (正常系)User（スタッフ）として登録のあるメールアドレスが存在するとき 同メールアドレスがLeaderとしても登録されている場合 同上
rspec ./spec/lib/lbe/nowsta/private/collection_spec.rb:128 # Lbe::Nowsta::Private::Collection#extract_email_for_bulk_registration_to_a_program (異常系)Leaderとして登録のないメールアドレスが存在するとき 例外のメッセージが正しいこと
rspec ./spec/mailers/leader_mailer_spec.rb:97 # LeaderMailer#notify_receiving_expense_request 交通費がある場合 リーダーにメールが送信されること
rspec ./spec/models/ai_features/program_instruction_spec.rb:88 # AiFeatures::ProgramInstruction#call_azure_open_ai 正常系 message_hearingが設定されているとき 値がセットされること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:48 # Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] 振込先に対応した文字コードで生成されていること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:56 # Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] メタ行が作成されること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:76 # Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] 振り込み行が作成されること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:95 # Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] チェックサム行が作成されること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:114 # Domains::LeaderPayments::BankTransfers::BuildBankCsv#call [各行のテスト] 最終行が作成されること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_bank_csv_spec.rb:179 # Domains::LeaderPayments::BankTransfers::BuildBankCsv#call 想定通りのデータが揃っているとき 各振り込みデータをもとに銀行振り込みCSVが作成されること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:51 # Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call [各行のテスト] 振込先に対応した文字コードで生成されていること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:59 # Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call [各行のテスト] ヘッダー行が作成されること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:72 # Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call [各行のテスト] 行データが作成されていること
rspec ./spec/models/domains/leader_payments/bank_transfers/build_yutyo_bank_csv_spec.rb:146 # Domains::LeaderPayments::BankTransfers::BuildYutyoBankCsv#call 想定通りのデータが揃っているとき 各振り込みデータをもとに銀行振り込みCSVが作成されること
rspec ./spec/models/domains/leader_payments/salaries/combine_expenses_spec.rb:75 # Domains::LeaderPayments::Salaries::CombineExpenses#call 経費データを統合したHashが取得できること
rspec ./spec/models/domains/leader_payments/salaries/separate_expenses_spec.rb:77 # Domains::LeaderPayments::Salaries::SeparateExpenses#call 統合した経費データを分離したHashが取得できること
rspec ./spec/models/domains/leader_payments/salaries/totalize_spec.rb:60 # Domains::LeaderPayments::Salaries::Totalize#call 全てのデータに金額が入っているとき 給与の合計計算結果が取得されること
rspec ./spec/models/domains/leader_payments/salaries/totalize_spec.rb:100 # Domains::LeaderPayments::Salaries::Totalize#call 全てのデータに金額が入っているとき 値がnilのデータが混ざっているとき エラーが起きずに給与の合計計算結果が取得されること
rspec ./spec/models/domains/leader_payments/target_terms/create_bank_transfers_spec.rb:57 # Domains::LeaderPayments::TargetTerms::CreateBankTransfers#call [正常系] (対象期間に、３人のリーダーが１件ずつ給与を持ち、うち２人が共通の銀行口座を持っている場合) 既存の未完了データのみが削除され、３件の銀行振込データと、１件の銀行振込メタデータが作成されること
rspec ./spec/models/domains/leader_payments/target_terms/create_bank_transfers_spec.rb:133 # Domains::LeaderPayments::TargetTerms::CreateBankTransfers#call [異常系] トランザクション中に例外が発生したとき 失敗の結果が返り、エラー情報が取得できること
rspec ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:70 # Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#generate_body その期間に給与データが存在しないとき リーダーの行がないCSVが生成されること
rspec ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:100 # Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#generate_body その期間に給与データが存在するとき 区切り文字付きの数値でCSVが生成されること
rspec ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:211 # Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#build_leader_row 給与データが計算されていない状態のとき エラーが起きず各値が0の結果が取得できること
rspec ./spec/models/domains/leader_payments/target_terms/create_payslip_csv_spec.rb:284 # Domains::LeaderPayments::TargetTerms::CreatePayslipCsv Domains::LeaderPayments::TargetTerms::CreatePayslipCsv::PrivateGenerator#build_leader_row 給与データが計算されているとき 各値が計算されたの結果が取得できること
rspec ./spec/models/domains/leader_payments/target_terms/create_salaries_spec.rb:105 # Domains::LeaderPayments::TargetTerms::CreateSalaries#call (正常系) (対象期間の最終日から6ヶ月以内のAcceptedなExpenseが存在する場合) リーダー毎に、給与と中間テーブルが作成されること
rspec ./spec/models/domains/leader_payments/target_terms/create_salaries_spec.rb:170 # Domains::LeaderPayments::TargetTerms::CreateSalaries#call 保存中にエラーが発生したとき エラーの結果が返ること
rspec ./spec/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries_spec.rb:33 # Domains::LeaderPayments::TargetTerms::DestroyUncompletedSalaries#call [正常系] 振り込みが未完了もしくは振り込みデータがないSalaryデータだけが削除されること
rspec ./spec/models/domains/leader_payments/target_terms/destroy_uncompleted_salaries_spec.rb:71 # Domains::LeaderPayments::TargetTerms::DestroyUncompletedSalaries#call [異常系] トランザクション中にエラーが発生したとき 処理失敗の結果が返ること
rspec ./spec/models/domains/leaders/import_csv_spec.rb:59 # Domains::Leaders::ImportCsv#call parserが指定されていないとき (正常系) (一部のメールアドレスが、Userとして登録されている状況) (一部のメールアドレスが、すでにLeaderとして登録されている状況) 正常に処理が完了すること
rspec ./spec/models/domains/leaders/import_csv_spec.rb:138 # Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） (６件中、４件の不正なレコードが含まれているとき) 戻り値に不正なレコードが含まれていること
rspec ./spec/models/domains/leaders/import_csv_spec.rb:143 # Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） (６件中、４件の不正なレコードが含まれているとき) 不正なレコード以外は登録されること
rspec ./spec/models/domains/leaders/import_csv_spec.rb:152 # Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (すべてのemailが存在しないとき) すべて新規に作成され、認証メールが飛ばずに、パスワード等の初期値が設定されていること
rspec ./spec/models/domains/leaders/import_csv_spec.rb:186 # Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (すべてのemailが存在しないとき) 戻り値に不正なレコードが含まれていないこと
rspec ./spec/models/domains/leaders/import_csv_spec.rb:203 # Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (一部のemailが存在するとき) 既存のemailの内容に関しては、CSV値で渡された値のみが更新されること
rspec ./spec/models/domains/leaders/import_csv_spec.rb:239 # Domains::Leaders::ImportCsv#call paraserが deprecated_parser のとき （正常系） （不正なレコードが含まれていないとき） (一部のemailがUserとして存在するとき) Userとして存在するemailは、更新されないこと
rspec ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:34 # Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が１つだけある場合) (案件が締め処理済みのとき) (管理案件がすでにFinalize済みの場合) 変化しないこと
rspec ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:41 # Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が１つだけある場合) (案件が締め処理済みのとき) (Finalize済みでない場合) 管理案件の売上を確定します
rspec ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:53 # Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が１つだけある場合) (案件がまだ締め処理されていないとき) (Finalize済みでない場合) 締め処理されていないものは、当然Finalizeしないので、変化しないこと
rspec ./spec/models/domains/manage/profit_sync_agents/finalize_spec.rb:77 # Domains::Manage::ProfitSyncAgents::Finalize#call (正常系) (案件と管理案件が複数ある場合) (案件が締め処理済みのとき) (Finalize済みでない場合) 管理案件の売上を確定します
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/fetch_spec.rb:43 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::Fetch#call スプレッドシートから取得できたデータで、レコードが作成・更新されること
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:40 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch insert処理になるレコードのとき 保存が成功するとき trueが返り、レコードがDBに作成されていること
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:53 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch insert処理になるレコードのとき 保存が失敗するとき falseが返り、エラー情報が入っていること
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:107 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch update処理になるレコードのとき 保存が成功するとき DBの値が更新されていること
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:145 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_by_fetch update処理になるレコードのとき 保存が失敗するとき falseが返り、エラー情報が入っていること
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:168 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_all_by_fetch 全てのデータがUpsertに成功するとき 処理成功の結果が取得できること
rspec ./spec/models/domains/manage/profit_sync_agents/google_sheet_credits/upsert_by_fetch_spec.rb:187 # Domains::Manage::ProfitSyncAgents::GoogleSheetCredits::UpsertByFetch#upsert_all_by_fetch 一部のデータがUpsertに失敗するとき 処理失敗の結果が取得できること
rspec ./spec/models/domains/manage/profit_sync_agents/kintones/fetch_spec.rb:51 # Domains::Manage::ProfitSyncAgents::Kintones::Fetch#call 対象案件が1件のとき 未取得のとき キントーン情報が新規に登録されていること
rspec ./spec/models/domains/manage/profit_sync_agents/kintones/fetch_spec.rb:78 # Domains::Manage::ProfitSyncAgents::Kintones::Fetch#call 対象案件が1件のとき 取得済のとき キントーン情報が更新されていること
rspec ./spec/models/domains/manage/profit_sync_agents/kintones/fetch_spec.rb:124 # Domains::Manage::ProfitSyncAgents::Kintones::Fetch#call 対象案件が3件で、1件は取得済のとき それぞれのデータの保存・更新処理が呼び出されていること
rspec ./spec/models/domains/manage/profit_sync_agents/lbe_systems/fetch_spec.rb:43 # Domains::Manage::ProfitSyncAgents::LbeSystems::Fetch#call fetch済みの案件があるとき kintone_idの入っている案件を取得(update)すること
rspec ./spec/models/domains/manage/profit_sync_agents/lbe_systems/fetch_spec.rb:67 # Domains::Manage::ProfitSyncAgents::LbeSystems::Fetch#call プログラムのkintone_codeが変わったとき 更新されること
rspec ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:65 # Domains::Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequests::Fetch 新規作成と更新処理 #call APIクライアントから戻ってきた振込依頼書データを使って、既存のものは更新、新規のものは作成すること
rspec ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:125 # Domains::Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequests::Fetch 取得内容の確認のテスト #call approvedの場合 取得内容が正しいこと
rspec ./spec/models/domains/manage/profit_sync_agents/money_forward_ex_report_transfer_requests/fetch_spec.rb:171 # Domains::Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequests::Fetch 取得内容の確認のテスト #call unsubmittedの場合 取得したものには、nullが入っていることがあるが、空白にして保存しておけること
rspec ./spec/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch_spec.rb:71 # Domains::Manage::ProfitSyncAgents::MoneyForwardExpenses::Fetch 新規作成と更新処理 #call APIクライアントから戻ってきたExpensesについて、既存のものは更新、新規のものは作成する
rspec ./spec/models/domains/manage/profit_sync_agents/money_forward_expenses/fetch_spec.rb:133 # Domains::Manage::ProfitSyncAgents::MoneyForwardExpenses::Fetch 取得内容の確認のテスト #call 取得内容が正しいこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_agent_spec.rb:24 # Domains::Manage::ProfitSyncAgents::SyncAgent#call 【開発中】draft Agentがないとき 【開発中】ダミーデータを入れること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_agent_spec.rb:36 # Domains::Manage::ProfitSyncAgents::SyncAgent#call 【開発中】draft Agentがあるとき 【開発中】ダミーデータが増えないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_client_spec.rb:24 # Domains::Manage::ProfitSyncAgents::SyncClient#call 【開発中】draft Clientがないとき 【開発中】ダミーデータを入れること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_client_spec.rb:34 # Domains::Manage::ProfitSyncAgents::SyncClient#call 【開発中】draft Clientがあるとき 【開発中】ダミーデータが増えないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_employee_spec.rb:26 # Domains::Manage::ProfitSyncAgents::SyncEmployee#call 【開発中】draft Employeeがないとき 【開発中】ダミーデータを入れること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_employee_spec.rb:38 # Domains::Manage::ProfitSyncAgents::SyncEmployee#call 【開発中】draft Employeeがあるとき 【開発中】ダミーデータが増えないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_contribution_level_spec.rb:24 # Domains::Manage::ProfitSyncAgents::SyncProgramContributionLevel#call 【開発中】draft ダミー貢献度がないとき 【開発中】ダミーデータを入れること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_contribution_level_spec.rb:36 # Domains::Manage::ProfitSyncAgents::SyncProgramContributionLevel#call 【開発中】draft ダミー貢献度があるとき 【開発中】ダミーデータが増えないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_credit_spec.rb:40 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostCredit#call [未同期のクレジットカードデータ] フェッチされていたデータから売上原価が作成されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_credit_spec.rb:101 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostCredit#call [同期済のクレジットカードデータ] 対象の売上原価が更新されること
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb[1:1:1:1:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call 振込依頼書のステータス status: "approved", expected: 1 approvedのものだけが同期対象になること
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb[1:1:1:2:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call 振込依頼書のステータス status: "unsubmitted", expected: 0 approvedのものだけが同期対象になること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb:71 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call [未同期の振込依頼書] fetchされていたデータから売上原価が作成されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_mf_transfer_request_spec.rb:134 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCostMfTransferRequest#call [同期済の振込依頼] 対象の売上原価が更新されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:46 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき 親であるManage::Programがfinalize処理されたときの挙動について 新規作成 作成されないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:55 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき 親であるManage::Programがfinalize処理されたときの挙動について 既存更新 更新されないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:66 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system スタブ化したテストの、スタブを解除したとき メソッドに反応すること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:112 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 存在していた売上原価は更新され、存在していなかった売上原価は作成されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:136 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 更新内容の確認 内容が更新されること(例としてGL謝礼金を使います)
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:151 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GL謝礼金が更新されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:164 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GL食費が正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:171 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLローカル交通費が正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:178 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLその他交通費が正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:185 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLフィールドワーク交通費が正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:192 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLフィールドワークその他が正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:199 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLインターネットが正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:206 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GLチャーターバスが正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:213 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 通常ケース 各項目が更新されることの確認 GL地域外交通費が正しい値になっていること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:245 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき 既存の売上原価レコードの元になったLbEシステム案件のkintone_codeが変更されたとき 既存の売上原価レコードのひも付き先の案件が変わること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:277 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_lbe_system Lbeシステムが存在するとき その同期対象の案件と、そのコピー案件に対して、複数のLbeSystemが該当するとき １つのManage::Programに対して、勘定科目名が同じ売上原価が２つずつ作成されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:316 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期内容の確認 同期対象の項目が全て同期されていること
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb[1:1:1:3:1:2:1:1:1:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "8999", expected: true 経費科目コードが9000~9999のときは、同期されないこと
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb[1:1:1:3:1:2:1:1:2:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "9000", expected: false 経費科目コードが9000~9999のときは、同期されないこと
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb[1:1:1:3:1:2:1:1:3:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "9999", expected: false 経費科目コードが9000~9999のときは、同期されないこと
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb[1:1:1:3:1:2:1:1:4:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "10000", expected: true 経費科目コードが9000~9999のときは、同期されないこと
rspec './spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb[1:1:1:3:1:2:1:1:5:1]' # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致するとき 経費科目コードが以下の場合のとき item_code: "", expected: true 経費科目コードが9000~9999のときは、同期されないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:367 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 同期対象案件のkintone_codeと合致しないとき 同期されないこと
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:390 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき テスト前提の確認
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:406 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき project_codeが変更されたとき LbEシステムの案件に、kintone_codeを登録していなかったとき 既存のMF経費明細のひも付き先プロジェクトが変わったと認識するが、ひも付き先を特別な管理案件に変更すること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:418 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき project_codeが変更されたとき LbEシステムの案件に、kintone_codeを登録していたとき 既存のMF経費明細のひも付き先プロジェクトが変わったと認識し、管理案件を変更すること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:430 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき by_money_forward MoneyForwardの経費が存在するとき 同期条件の確認 既存の売上原価があるとき mf_idが変更されたとき mf_idが異なれば、別のMF経費明細と認識されるため、新規の売上原価が作成されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:457 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき MoneyForwardの振込依頼書が存在するとき 同期対象案件のkintone_codeと合致する振込依頼書の経費が、売上原価として計上されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_direct_cost_spec.rb:479 # Domains::Manage::ProfitSyncAgents::SyncProgramDirectCost#call 同期対象案件が１つあるとき Creditの経費が存在するとき 同期対象案件のkintone_codeと合致するCreditの経費が、売上原価として計上されること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:44 # Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了していない場合 新規に作成される場合 作成される
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:59 # Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了していない場合 既存のデータがある場合 更新される
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:73 # Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了している場合 新規に作成される場合 作成されない
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:91 # Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call Manage::Programのfinalize処理の影響確認 finalize処理が完了している場合 既存のデータがある場合 更新されない
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_employee_spec.rb:155 # Domains::Manage::ProfitSyncAgents::SyncProgramEmployee#call １つの案件に、２人の従業員・貢献度が紐づく場合 従業員・貢献度と、案件が関連すること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_spec.rb:73 # Domains::Manage::ProfitSyncAgents::SyncProgram#call 更新対象のテスト 対象案件が4件で、うち既存データが2件のとき 既存の１件は更新され、残りの２件は新規作成される、finalizeされたものは更新されない
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_spec.rb:108 # Domains::Manage::ProfitSyncAgents::SyncProgram#call 更新対象のテスト original_programを持つ、つまり、複製されたプログラムであるとき original_programだけが作成され、copied_programは無視される
rspec ./spec/models/domains/manage/profit_sync_agents/sync_program_spec.rb:146 # Domains::Manage::ProfitSyncAgents::SyncProgram#call 内容のテスト 対象の案件が１つのとき 正しくデータが作成される
rspec ./spec/models/domains/manage/profit_sync_agents/sync_team_spec.rb:24 # Domains::Manage::ProfitSyncAgents::SyncTeam#call 【開発中】draft Teamがないとき 【開発中】ダミーデータを入れること
rspec ./spec/models/domains/manage/profit_sync_agents/sync_team_spec.rb:34 # Domains::Manage::ProfitSyncAgents::SyncTeam#call 【開発中】draft Teamがあるとき 【開発中】ダミーデータが増えないこと
rspec ./spec/models/domains/programs/all_expenses_frozen_to_apply_batch_spec.rb:46 # Domains::Programs::AllExpensesFrozenToApplyBatch (正常系) 検索結果に対して、all_expenses_frozen_to_applyが呼ばれること
rspec ./spec/models/domains/programs/all_expenses_frozen_to_apply_batch_spec.rb:63 # Domains::Programs::AllExpensesFrozenToApplyBatch (異常系) all_expenses_frozen_to_apply が失敗するProgramが含まれている場合 それらProgramのログが出力されて、処理としてはfalseを返すこと
rspec ./spec/models/domains/programs/manage_expenses_status_spec.rb:47 # Domains::Programs::ManageExpensesStatus#frozen_to_apply (処理が成功するとき) 全ての経費データが申請不可状態に変更されること
rspec ./spec/models/domains/programs/manage_expenses_status_spec.rb:70 # Domains::Programs::ManageExpensesStatus#frozen_to_apply (処理が失敗するとき) falseが返ること
rspec ./spec/models/domains/programs/manage_expenses_status_spec.rb:90 # Domains::Programs::ManageExpensesStatus#accept (処理が成功するとき) 全ての経費データが承認状態に変更されること
rspec ./spec/models/domains/programs/manage_expenses_status_spec.rb:113 # Domains::Programs::ManageExpensesStatus#accept (処理が失敗するとき) falseが返ること
rspec ./spec/models/domains/programs/output_csv_spec.rb:135 # Domains::Programs::OutputCsv#call (プログラムが存在するとき) CSVが取得できること
rspec ./spec/models/domains/programs/output_csv_spec.rb:201 # Domains::Programs::OutputCsv#build_row (経費申請が承認済で全ての経費が登録されているとき) 全ての値が入力されたCSVのデータを返すこと
rspec ./spec/models/domains/programs/output_kintone_csv_spec.rb:87 # Domains::Programs::OutputKintoneCsv#call (プログラムが存在するとき) 内容のあるCSVが取得できること
rspec ./spec/models/domains/programs/revenue_open_spec.rb:45 # Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされていないとき) trueが返ること
rspec ./spec/models/domains/programs/revenue_open_spec.rb:49 # Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされていないとき) 解除すべき収益情報の確定日時がnilになり、finalie処理も解錠されること
rspec ./spec/models/domains/programs/revenue_open_spec.rb:62 # Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされているとき) trueが返ること
rspec ./spec/models/domains/programs/revenue_open_spec.rb:66 # Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (正常系) (管理案件のfinalize処理がされているとき) 解除すべき収益情報の確定日時がnilになり、finalie処理も解錠されること
rspec ./spec/models/domains/programs/revenue_open_spec.rb:82 # Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (異常系) (処理が途中で失敗するとき) （ロールバックされることで）１つもデータが変わらないこと
rspec ./spec/models/domains/programs/revenue_open_spec.rb:89 # Domains::Programs::RevenueOpen#call (収益情報が確定されているとき) (異常系) (処理が途中で失敗するとき) falseが返し、エラーメッセージが返ること
rspec ./spec/models/domains/programs/revenue_open_spec.rb:105 # Domains::Programs::RevenueOpen#call (収益情報が確定されていないとき) 変更されていないこと
rspec ./spec/models/image_spec.rb:41 # Image [restriction] .public_images 公開画像だけが取得できること
rspec ./spec/models/image_spec.rb:49 # Image [restriction] .only_upload_user アップロードした人だけが見れる画像が取得できること
rspec ./spec/models/image_spec.rb:57 # Image [restriction] .only_super_user スーパーユーザだけが見れる画像が取得できること
rspec ./spec/models/leader_payments/bank_info_spec.rb:30 # LeaderPayments::BankInfo#valid? 重複がある場合 is expected to equal false
rspec ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:40 # LeaderPayments::BankTransferCsvMetaInfo#valid? csv_row1_stringsは、12列の文字列をカンマ区切りで連結した文字列であるとき
rspec ./spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb:47 # LeaderPayments::BankTransferCsvMetaInfo#valid? csv_row1_stringsは、12列の文字列をカンマ区切りで連結した文字列でないとき
rspec './spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb[1:3:1:1]' # LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-01-01", expected_date: "101"
rspec './spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb[1:3:2:1]' # LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-01-21", expected_date: "121"
rspec './spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb[1:3:3:1]' # LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-12-01", expected_date: "1201"
rspec './spec/models/leader_payments/bank_transfer_csv_meta_info_spec.rb[1:3:4:1]' # LeaderPayments::BankTransferCsvMetaInfo#row1 transfer_date: "2023-12-15", expected_date: "1215"
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:33 # LeaderPayments::BankTransfer.completed 完了したデータだけが取得できること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:44 # LeaderPayments::BankTransfer.uncompleted 未完了のデータだけが取得できること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:61 # LeaderPayments::BankTransfer#valid? completed_at, completed_userがnilの場合
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:84 # LeaderPayments::BankTransfer#complete! 振り込みが未完了のとき 時刻の指定がないとき 現在時刻で完了になること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:94 # LeaderPayments::BankTransfer#complete! 振り込みが未完了のとき 時刻の指定があるとき 指定した時刻で完了になること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:105 # LeaderPayments::BankTransfer#complete! 振り込みが未完了のとき ユーザが存在しないとき ActiveRecord::RecordInvalidが発生すること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:116 # LeaderPayments::BankTransfer#complete! 振り込みが完了済のとき force オプションを付けていないとき 更新がされないこと
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:127 # LeaderPayments::BankTransfer#complete! 振り込みが完了済のとき force オプションが付いているとき 完了状態が更新されること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:142 # LeaderPayments::BankTransfer#uncomplete! 未完了状態になること
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:7:1:1]' # LeaderPayments::BankTransfer#completed? params: {:completed_at=>nil, :completed_user=>nil}, expected: false
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:7:2:1]' # LeaderPayments::BankTransfer#completed? params: {:completed_at=>nil, :completed_user=>user}, expected: false
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:7:3:1]' # LeaderPayments::BankTransfer#completed? params: {:completed_at=>"2023/10/15", :completed_user=>nil}, expected: true
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:7:4:1]' # LeaderPayments::BankTransfer#completed? params: {:completed_at=>"2023/10/15", :completed_user=>user}, expected: true
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:8:1:1]' # LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>nil, :completed_user=>nil}, expected: true
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:8:2:1]' # LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>nil, :completed_user=>user}, expected: true
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:8:3:1]' # LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>"2023/10/15", :completed_user=>nil}, expected: false
rspec './spec/models/leader_payments/bank_transfer_spec.rb[1:8:4:1]' # LeaderPayments::BankTransfer#uncompleted? params: {:completed_at=>"2023/10/15", :completed_user=>user}, expected: false
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:190 # LeaderPayments::BankTransfer#created_metadata JSONが正しい仕様で入力されているとき JSONがHashで取得できること
rspec ./spec/models/leader_payments/bank_transfer_spec.rb:203 # LeaderPayments::BankTransfer#created_metadata JSONが形式ではない値で入力されているとき 空ハッシュが取得されること
rspec ./spec/models/leader_payments/salary_expense_relation_spec.rb:32 # LeaderPayments::SalaryExpenseRelation#valid? expenseが重複している場合 エラーになること
rspec ./spec/models/leader_payments/salary_expense_relation_spec.rb:40 # LeaderPayments::SalaryExpenseRelation#valid? expenseが重複していない場合 エラーにならないこと
rspec ./spec/models/leader_payments/salary_spec.rb:46 # LeaderPayments::Salary#set_net_payment_from_self 振込額が計算され、自身に設定されること
rspec ./spec/models/leader_payments/salary_spec.rb:81 # LeaderPayments::Salary#set_and_build_combine_expenses (正常系) それぞれの合計値が更新され、経費データの紐付け情報もビルドされていること
rspec ./spec/models/leader_payments/salary_spec.rb:100 # LeaderPayments::Salary#set_withholding_tax_from_self 源泉徴収の控除があるとき 控除ありの源泉徴収額が計算されて設定されること
rspec ./spec/models/leader_payments/salary_spec.rb:115 # LeaderPayments::Salary#set_withholding_tax_from_self 源泉徴収の控除がないとき 源泉徴収額が計算されて設定されること
rspec './spec/models/leader_payments/salary_spec.rb[1:4:1:1]' # LeaderPayments::Salary#gross_payment total_compensation: 120000, total_extra_time_amount: 5000, total_deduction_amount: 3000, total_expenses: 10000, expected: 132000
rspec './spec/models/leader_payments/salary_spec.rb[1:4:2:1]' # LeaderPayments::Salary#gross_payment total_compensation: 7000, total_extra_time_amount: 0, total_deduction_amount: 9000, total_expenses: 0, expected: -2000
rspec './spec/models/leader_payments/salary_spec.rb[1:4:3:1]' # LeaderPayments::Salary#gross_payment total_compensation: 0, total_extra_time_amount: 0, total_deduction_amount: 0, total_expenses: 0, expected: 0
rspec './spec/models/leader_payments/salary_spec.rb[1:5:1:1]' # LeaderPayments::Salary#source_amount_for_withholding_tax total_compensation: 10000, total_extra_time_amount: 1000, total_deduction_amount: 2000, total_expenses: 5000, expected: 9000
rspec './spec/models/leader_payments/salary_spec.rb[1:5:2:1]' # LeaderPayments::Salary#source_amount_for_withholding_tax total_compensation: 0, total_extra_time_amount: 0, total_deduction_amount: 2000, total_expenses: 3000, expected: -2000
rspec './spec/models/leader_payments/salary_spec.rb[1:6:1:1]' # LeaderPayments::Salary#whole_payment total_compensation: 10000, total_expenses: 1000, total_extra_time_amount: 2000, expected: 13000
rspec './spec/models/leader_payments/salary_spec.rb[1:6:2:1]' # LeaderPayments::Salary#whole_payment total_compensation: 30000, total_expenses: 0, total_extra_time_amount: 2000, expected: 32000
rspec './spec/models/leader_payments/salary_spec.rb[1:6:3:1]' # LeaderPayments::Salary#whole_payment total_compensation: 0, total_expenses: 0, total_extra_time_amount: 0, expected: 0
rspec './spec/models/leader_payments/salary_spec.rb[1:7:1:1]' # LeaderPayments::Salary#take_away_payment advanced_compensation: 7000, withholding_tax: 130, total_deduction_amount: 1000, expected: 8130
rspec './spec/models/leader_payments/salary_spec.rb[1:7:2:1]' # LeaderPayments::Salary#take_away_payment advanced_compensation: 10000, withholding_tax: 0, total_deduction_amount: 2000, expected: 12000
rspec './spec/models/leader_payments/salary_spec.rb[1:7:3:1]' # LeaderPayments::Salary#take_away_payment advanced_compensation: 0, withholding_tax: 0, total_deduction_amount: 0, expected: 0
rspec ./spec/models/leader_payments/target_term_spec.rb:29 # LeaderPayments::TargetTerm#valid? first_dateが重複する場合 エラーになること
rspec ./spec/models/leader_payments/target_term_spec.rb:110 # LeaderPayments::TargetTerm#aggregate_expenses_by_leader リーダー毎に、経費を集計したものが返ること
rspec ./spec/models/leader_payments/target_term_spec.rb:124 # LeaderPayments::TargetTerm#programs 対象期間に紐づく経費が存在する場合 対象期間に紐づく経費のプログラムの一覧が返ること
rspec ./spec/models/leader_payments/target_term_spec.rb:129 # LeaderPayments::TargetTerm#programs 対象期間に紐づく経費が存在しない場合 空の配列が返ること
rspec ./spec/models/leader_spec.rb:85 # Leader.by_visa_expiration_date ビザの有効期限日がdateの人を取得する
rspec ./spec/models/leader_spec.rb:103 # Leader.by_graduated_date ビザの有効期限日がdateの人を取得する
rspec ./spec/models/leader_spec.rb:115 # Leader.active is_activeがtrueの人を取得する
rspec ./spec/models/leader_spec.rb:127 # Leader.select_options_for_email_with_active is_activeがtrueの人をemailをラベルとした、{ label:, value: }が返ってくること
rspec ./spec/models/manage/profit_sync_agent_spec.rb:36 # Manage::ProfitSyncAgent 準Singleton(シングルトン) .instance レコードがあるとき 常に同じIDのインスタンスを返すこと
rspec ./spec/models/manage/profit_sync_agent_spec.rb:44 # Manage::ProfitSyncAgent 準Singleton(シングルトン) #save 既存のデータがないとき is expected to change `Manage::ProfitSyncAgent.count` by 1
rspec ./spec/models/manage/profit_sync_agent_spec.rb:48 # Manage::ProfitSyncAgent 準Singleton(シングルトン) #save 既存のデータがあるとき エラーになること
rspec ./spec/models/manage/profit_sync_agent_spec.rb:82 # Manage::ProfitSyncAgent 同期処理 #run (正常系) fetchとsync, finalizeを呼び出し、最終更新日時を更新すること
rspec ./spec/models/manage/profit_sync_agent_spec.rb:132 # Manage::ProfitSyncAgent#target_kintone_codes LbeSystem(案件)がある場合 LbeSystem(案件)のkintone_codeを返すこと
rspec ./spec/models/manage/profit_sync_agent_spec.rb:137 # Manage::ProfitSyncAgent#target_kintone_codes LbeSystem(案件)がない場合 空配列を返すこと
rspec ./spec/models/manage/profit_sync_agent_spec.rb:149 # Manage::ProfitSyncAgent#target_programs LbeSystem(案件)がある場合 LbeSystem(案件)を返すこと
rspec ./spec/models/manage/profit_sync_agent_spec.rb:154 # Manage::ProfitSyncAgent#target_programs LbeSystem(案件)がない場合 空配列を返すこと
rspec ./spec/models/manage/profit_sync_agents/kintone_spec.rb:60 # Manage::ProfitSyncAgents::Kintone#get_fetched_charge_and_ratio 配列が返る
rspec ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:48 # Manage::ProfitSyncAgents::LbeSystem.only_original オリジナルのProgramを持つLbeSystemだけを返すこと
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:2:1:1:1]' # Manage::ProfitSyncAgents::LbeSystem#valid? kintone_codeについての検証をしているとき kintone_code: "0000", expectation: true
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:2:1:2:1]' # Manage::ProfitSyncAgents::LbeSystem#valid? kintone_codeについての検証をしているとき kintone_code: "", expectation: false
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:2:1:3:1]' # Manage::ProfitSyncAgents::LbeSystem#valid? kintone_codeについての検証をしているとき kintone_code: nil, expectation: false
rspec ./spec/models/manage/profit_sync_agents/lbe_system_spec.rb:77 # Manage::ProfitSyncAgents::LbeSystem#valid? programの重複チェックについての検証をしているとき 重複あり エラーになること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:1:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_compensation, delegate_method: :total_compensation delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:2:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_food_expense, delegate_method: :total_food_expense delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:3:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_local_transport, delegate_method: :total_local_transport delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:4:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_extra_transport, delegate_method: :total_extra_transport delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:5:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_fieldwork_transport, delegate_method: :total_fieldwork_transport delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:6:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_fieldwork_other, delegate_method: :total_fieldwork_other delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:7:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_internet, delegate_method: :total_internet delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:8:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_charted_bus, delegate_method: :total_charted_bus delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:9:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :total_out_area, delegate_method: :total_out_area delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:10:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :program_name, delegate_method: :name delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:11:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :program_event_date, delegate_method: :event_date delegateできること
rspec './spec/models/manage/profit_sync_agents/lbe_system_spec.rb[1:4:1:12:1]' # Manage::ProfitSyncAgents::LbeSystem delegate lbe_systemが、programを参照しているとき call_method: :program_revenue_closure_at, delegate_method: :revenue_closure_at delegateできること
rspec './spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb[1:2:1:1:1]' # Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "bbb", number_1: "111", number_2: "222", expected: true
rspec './spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb[1:2:1:2:1]' # Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "aaa", number_1: "111", number_2: "222", expected: false
rspec './spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb[1:2:1:3:1]' # Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "bbb", number_1: "111", number_2: "111", expected: false
rspec './spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb[1:2:1:4:1]' # Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest 一意制約 #valid? report_id_1: "aaa", report_id_2: "aaa", number_1: "111", number_2: "111", expected: false
rspec ./spec/models/manage/profit_sync_agents/money_forward_ex_report_transfer_request_spec.rb:77 # Manage::ProfitSyncAgents::MoneyForwardExReportTransferRequest#kintone_code form_project_codeが存在するとき kintone_codeを返すこと
rspec './spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb[1:2:1:1:1]' # Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "bbb", number_1: "111", number_2: "222", expected: true
rspec './spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb[1:2:1:2:1]' # Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "aaa", number_1: "111", number_2: "222", expected: false
rspec './spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb[1:2:1:3:1]' # Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "bbb", number_1: "111", number_2: "111", expected: false
rspec './spec/models/manage/profit_sync_agents/money_forward_expense_spec.rb[1:2:1:4:1]' # Manage::ProfitSyncAgents::MoneyForwardExpense 一意制約 #valid? mf_id_1: "aaa", mf_id_2: "aaa", number_1: "111", number_2: "111", expected: false
rspec ./spec/models/manage/program_direct_cost_spec.rb:38 # Manage::ProgramDirectCost#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みの場合 確定済みなので、だめ
rspec ./spec/models/manage/program_direct_cost_spec.rb:44 # Manage::ProgramDirectCost#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みでない場合 未確定なので、よし
rspec ./spec/models/manage/program_direct_cost_spec.rb:56 # Manage::ProgramDirectCost#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みになった場合 確定済みなので、だめ
rspec ./spec/models/manage/program_direct_cost_spec.rb:61 # Manage::ProgramDirectCost#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みにならなかった場合 未確定なので、よし
rspec ./spec/models/manage/program_employee_spec.rb:41 # Manage::ProgramEmployee#valid? program, employeeの組み合わせは一意 違う組み合わせの場合 programが違う場合
rspec ./spec/models/manage/program_employee_spec.rb:46 # Manage::ProgramEmployee#valid? program, employeeの組み合わせは一意 違う組み合わせの場合 employeeが違う場合
rspec ./spec/models/manage/program_employee_spec.rb:51 # Manage::ProgramEmployee#valid? program, employeeの組み合わせは一意 同じ組み合わせの場合
rspec ./spec/models/manage/program_employee_spec.rb:61 # Manage::ProgramEmployee#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みの場合 確定済みなので、だめ
rspec ./spec/models/manage/program_employee_spec.rb:67 # Manage::ProgramEmployee#valid? finalize_validation 新規作成の場合 親であるManage::Programが収益確定済みでない場合 未確定なので、よし
rspec ./spec/models/manage/program_employee_spec.rb:79 # Manage::ProgramEmployee#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みになった場合 確定済みなので、だめ
rspec ./spec/models/manage/program_employee_spec.rb:84 # Manage::ProgramEmployee#valid? finalize_validation 更新の場合 親であるManage::Programが収益確定済みにならなかった場合 未確定なので、よし
rspec ./spec/models/manage/program_employee_spec.rb:101 # Manage::ProgramEmployee.create
rspec ./spec/models/manage/program_employee_spec.rb:113 # Manage::ProgramEmployee#contoribution_ratio_for_calc contribution_ratioが5の場合
rspec ./spec/models/manage/program_spec.rb:63 # Manage::Program#valid? finalize_validation finalizeされている場合 だめ
rspec ./spec/models/manage/program_spec.rb:82 # Manage::Program#valid? finalize_validation finalizeされていない場合 できる
rspec ./spec/models/manage/program_spec.rb:93 # Manage::Program#unfinalize 他のカラムを修正していないとき finalizeを解除すること
rspec ./spec/models/manage/program_spec.rb:102 # Manage::Program#unfinalize 他のカラムを修正しているとき finalizeを解除できないこと
rspec ./spec/models/manage/program_spec.rb:130 # Manage::Program.by_finalize_target 収益情報確定済みで、finalize処理されていないものが取得されること
rspec ./spec/models/manage/program_spec.rb:144 # Manage::Program.by_target_month 2023-09を指定したとき 202309が設定されたProgramのみが取得されること
rspec ./spec/models/manage/program_spec.rb:153 # Manage::Program.by_target_month 2023-10を指定したとき 202310が設定されたProgramのみが取得されること
rspec ./spec/models/manage/program_spec.rb:163 # Manage::Program.by_target_month 2023-11を指定したとき 事前データに存在しないため、Programが取得されないこと
rspec ./spec/models/manage/program_spec.rb:177 # Manage::Program#cost 紐づく経費データが存在しないとき
rspec ./spec/models/manage/program_spec.rb:188 # Manage::Program#cost 紐づく経費データが存在するとき
rspec ./spec/models/manage/program_spec.rb:200 # Manage::Program#gross_profit 粗利を返すこと
rspec ./spec/models/manage/program_spec.rb:213 # Manage::Program#gross_profit_rate 粗利率を返すこと
rspec './spec/models/manage/program_spec.rb[1:11:1:1]' # Manage::Program.order_by_gross_profit_per_participant description: :desc, expected: [10000, 1000, 500, 333] 参加者あたりの売上でソートされること
rspec './spec/models/manage/program_spec.rb[1:11:2:1]' # Manage::Program.order_by_gross_profit_per_participant description: :asc, expected: [333, 500, 1000, 10000] 参加者あたりの売上でソートされること
rspec ./spec/models/manage/snapshot/agent_spec.rb:25 # Manage::Snapshot::Agent.create
rspec ./spec/models/manage/snapshot/program_employee_spec.rb:38 # Manage::Snapshot::ProgramEmployee.create
rspec ./spec/models/manage/team_spec.rb:20 # Manage::Team.select_options_about_teams チームの選択肢が返ること
rspec ./spec/models/master/system_setting_spec.rb:44 # Master::SystemSetting.reset_seed! (本番データのとき) 各種データが作成されていること
rspec ./spec/models/master/system_setting_spec.rb:70 # Master::SystemSetting.reset_seed! (テストデータのとき) テストファイルの設定をもとに、各種データが作成されていること
rspec ./spec/models/program_spec.rb:108 # Program#apply_default_expenses (正常系) 全員分の交通費申請がデフォルト値で上書きされること
rspec ./spec/models/program_spec.rb:131 # Program#apply_default_expenses (異常系) (処理が失敗する場合) 全員分の更新が行われない
rspec ./spec/models/program_spec.rb:165 # Program.frozen_to_apply_batch_targets データがあるとき 申請締切日が本日のプログラムだけが取得できること
rspec ./spec/models/program_spec.rb:193 # Program.by_apply_deadline_is_tomorrow データがあるとき 申請締切日が明日のプログラムだけが取得できること
rspec ./spec/models/program_spec.rb:238 # Program [自分に紐づく経費ついて集計する機能] #accepted_expenses 参加するリーダーがいないとき 空の配列が取得できること
rspec ./spec/models/program_spec.rb:244 # Program [自分に紐づく経費ついて集計する機能] #accepted_expenses 参加するリーダーがいるとき 参加するリーダーの食費のうち、acceptedのものが取得できること
rspec ./spec/models/program_spec.rb:253 # Program [自分に紐づく経費ついて集計する機能] #total_advance_payment 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:259 # Program [自分に紐づく経費ついて集計する機能] #total_advance_payment 参加するリーダーがいるとき ステータスに関係なく、前払い謝礼金合計が取得できること
rspec ./spec/models/program_spec.rb:269 # Program [自分に紐づく経費ついて集計する機能] #total_charted_bus 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:275 # Program [自分に紐づく経費ついて集計する機能] #total_charted_bus 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
rspec ./spec/models/program_spec.rb:285 # Program [自分に紐づく経費ついて集計する機能] #total_compensation 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:291 # Program [自分に紐づく経費ついて集計する機能] #total_compensation 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
rspec ./spec/models/program_spec.rb:301 # Program [自分に紐づく経費ついて集計する機能] #total_deduction 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:307 # Program [自分に紐づく経費ついて集計する機能] #total_deduction 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
rspec ./spec/models/program_spec.rb:317 # Program [自分に紐づく経費ついて集計する機能] #total_extra_time 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:323 # Program [自分に紐づく経費ついて集計する機能] #total_extra_time 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
rspec ./spec/models/program_spec.rb:333 # Program [自分に紐づく経費ついて集計する機能] #total_food_expense 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:339 # Program [自分に紐づく経費ついて集計する機能] #total_food_expense 参加するリーダーがいるとき ステータスに関係なく、食費合計が取得できること
rspec ./spec/models/program_spec.rb:349 # Program [自分に紐づく経費ついて集計する機能] #total_internet 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:355 # Program [自分に紐づく経費ついて集計する機能] #total_internet 参加するリーダーがいるとき ステータスに関係なく、インターネット使用料の合計が取得できること
rspec ./spec/models/program_spec.rb:365 # Program [自分に紐づく経費ついて集計する機能] #total_out_area 参加するリーダーがいないとき 0が取得できること
rspec ./spec/models/program_spec.rb:371 # Program [自分に紐づく経費ついて集計する機能] #total_out_area 参加するリーダーがいるとき ステータスに関係なく、謝礼金合計が取得できること
rspec ./spec/models/program_spec.rb:384 # Program [自分に紐づく経費ついて集計する機能] #total_leaders 参加するリーダーがいるとき 参加するリーダーの数が取得できること
rspec ./spec/models/program_spec.rb:459 # Program [自分に紐づく経費ついて集計する機能] #total_transport_expense 参加するリーダーがいるとき 正しい値を返すこと
rspec ./spec/models/program_spec.rb:533 # Program.only_originals 複製元のみが取得できること
rspec ./spec/models/program_spec.rb:544 # Program#select_options_for_name_with_only_originals プログラムの名前とIDの配列が取得できること
rspec ./spec/models/program_spec.rb:560 # Program プログラムが複製されているとき #original_program 複製元のプログラムが取得できること
rspec ./spec/models/program_spec.rb:565 # Program プログラムが複製されているとき #copied_programs 複製されたプログラムが取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:59 # Programs::JoinLeaders::Expense scope .accepted_within_n_months_since (nが6, dateが今月の初日のとき) 日付ではなく月単位でみたときに6ヶ月以内のプログラムのうち、承認済みの経費が取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:136 # Programs::JoinLeaders::Expense#find_or_build_transport_expenses_array (紐づくTransportExpenseについて、カテゴリが、localが５つ、extraが０こ、fieldworkが３つ、fieldwork_otherが６つあるとき) (検索orビルドの指定が５のとき) (検索orビルドの対象がlocalのとき) ５つの配列が返ってくること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:157 # Programs::JoinLeaders::Expense#find_or_build_transport_expenses_array (紐づくTransportExpenseについて、カテゴリが、localが５つ、extraが０こ、fieldworkが３つ、fieldwork_otherが６つあるとき) (検索orビルドの指定が５のとき) (検索orビルドの対象がfieldworkのとき) ５つの配列のうち、３件は既存の配列、２件はビルドされたものが返ってくること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:175 # Programs::JoinLeaders::Expense#find_or_build_transport_expenses_array (紐づくTransportExpenseについて、カテゴリが、localが５つ、extraが０こ、fieldworkが３つ、fieldwork_otherが６つあるとき) (検索orビルドの指定が５のとき) (検索orビルドの対象がfieldwork_otherのとき) ６件中、５件までしか配列までしか返ってこないこと
rspec ./spec/models/programs/join_leaders/expense_spec.rb:204 # Programs::JoinLeaders::Expense [交通費へのリレーション] #transport_expenses 交通費データが全て取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:212 # Programs::JoinLeaders::Expense [交通費へのリレーション] #local_transport_expenses 通常交通費データが並び順に取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:224 # Programs::JoinLeaders::Expense [交通費へのリレーション] #extra_transport_expenses 例外交通費データが並び順に取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:236 # Programs::JoinLeaders::Expense [交通費へのリレーション] #fieldwork_transport_expenses 現場交通費データが並び順に取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:248 # Programs::JoinLeaders::Expense [交通費へのリレーション] #fieldwork_other_transport_expenses 現場その他交通費データが並び順に取得できること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:284 # Programs::JoinLeaders::Expense#total_expense_amount 経費の合計金額が返ること
rspec ./spec/models/programs/join_leaders/expense_spec.rb:354 # Programs::JoinLeaders::Expense#transportation_total extraの交通費が存在するとき extraの交通費の合計を返すこと
rspec ./spec/models/programs/join_leaders/expense_spec.rb:381 # Programs::JoinLeaders::Expense#transportation_total localとextraとfieldworkとfieldwork_otherの費用が存在するとき localとextraの交通費の合計を返すこと
rspec ./spec/models/programs/join_leaders/expense_spec.rb:415 # Programs::JoinLeaders::Expense#fieldwork_total fieldwork_otherの交通費が存在するとき fieldwork_otherの交通費の合計を返すこと
rspec ./spec/models/programs/join_leaders/expense_spec.rb:442 # Programs::JoinLeaders::Expense#fieldwork_total localとextraとfieldworkとfieldwork_otherの費用が存在するとき fieldworkとfieldwork_otherの交通費の合計を返すこと
rspec ./spec/models/programs/join_leaders/transport_expense_spec.rb:80 # Programs::JoinLeaders::TransportExpense#valid? (異常系) (orderの一意性制約について) (すでに、「同一経費、同一カテゴリ、同一順番」の交通経費費が登録されている場合) is expected to equal false
rspec ./spec/models/props/ai_features/program_instruction_spec.rb:17 # Props::AiFeatures::ProgramInstruction#as_props Propsが返ること
rspec ./spec/models/props/leader_payments/bank_transfers/traceability_spec.rb:63 # Props::LeaderPayments::BankTransfers::Traceability#as_props キャメルケースのJSON値が取得できること
rspec ./spec/models/props/leader_payments/salaries/staff_spec.rb:56 # Props::LeaderPayments::Salaries::Staff#as_props Propsが取得できること
rspec ./spec/models/props/leader_payments/target_terms/staff_spec.rb:23 # Props::LeaderPayments::TargetTerms::Staff#as_props 関連データが全て存在するとき Propsが取得できること
rspec ./spec/models/props/leader_payments/target_terms/staff_spec.rb:44 # Props::LeaderPayments::TargetTerms::Staff#as_props 関連データが全て存在しないとき Propsが取得できること
rspec ./spec/models/props/leaders/personal_info_spec.rb:46 # Props::Leaders::PersonalInfo#as_props [プレーンなPropsで意図しない内容を出したくないため]NotImplementedError
rspec ./spec/models/props/leaders/staff_for_index_spec.rb:77 # Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo があるとき 銀行情報に紐づいているとき キャメルケースのJSON値が取得できること
rspec ./spec/models/props/leaders/staff_for_index_spec.rb:102 # Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo があるとき 銀行情報に紐づいていないとき キャメルケースのJSON値が取得できること
rspec ./spec/models/props/leaders/staff_for_index_spec.rb:139 # Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo がないとき 銀行情報に紐づいているとき キャメルケースのJSON値が取得できること
rspec ./spec/models/props/leaders/staff_for_index_spec.rb:163 # Props::Leaders::StaffForIndex#as_props Leaderがあるとき Leaders::PersonalInfo がないとき 銀行情報に紐づいていないとき キャメルケースのJSON値が取得できること
rspec ./spec/models/props/manage/employee_spec.rb:16 # Props::Manage::Employee#as_props associationがあるとき Propsが返ること
rspec ./spec/models/props/manage/program_direct_cost_spec.rb:21 # Props::Manage::ProgramDirectCost#as_props Propsが返ること
rspec ./spec/models/props/manage/program_spec.rb:17 # Props::Manage::Program#as_props Propsが返ること
rspec ./spec/models/props/manage/programs/analytic_spec.rb:54 # Props::Manage::Programs::Analytic#as_props Propsが返ること
rspec ./spec/models/props/manage/snapshot/agent_spec.rb:13 # Props::Manage::Snapshot::Agent#as_props Propsが返ること
rspec ./spec/models/props/manage/snapshot/client_spec.rb:13 # Props::Manage::Snapshot::Client#as_props Propsが返ること
rspec ./spec/models/props/manage/snapshot/employee_spec.rb:17 # Props::Manage::Snapshot::Employee#as_props Propsが返ること
rspec ./spec/models/props/manage/snapshot/team_spec.rb:13 # Props::Manage::Snapshot::Team#as_props Propsが返ること
rspec ./spec/models/props/programs/join_leaders/expenses/with_transport_spec.rb:70 # Props::Programs::JoinLeaders::Expenses::WithTransport#as_props (交通費が各種2つずつ存在するとき) キャメルケースのJSON値され、交通費が全て5つずつ取得できること
rspec ./spec/models/props/programs/staff_spec.rb:55 # Props::Programs::Staff#as_props 標準ケース キャメルケースのJSON値が取得できること
rspec ./spec/models/props/programs/staff_spec.rb:95 # Props::Programs::Staff#as_props original_program_idがある場合 original_program_idが含まれること
rspec ./spec/models/props/programs/staff_spec.rb:105 # Props::Programs::Staff#as_props copied_programsがある場合 copied_programsが含まれること
rspec ./spec/models/queries/range_spec.rb:10 # Queries::Range#call 指定した範囲のレコードが取得できること
rspec ./spec/models/queries/search_like_word_spec.rb:10 # Queries::SearchLikeWord#call 指定した範囲のレコードが取得できること
rspec ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:40 # ScheduledTasks::RepairDbConnection.task_run Service実行が正常終了したとき 正常終了した結果が取得できること
rspec ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:66 # ScheduledTasks::RepairDbConnection.task_run Service実行が正常終了したとき Slackへの通知が送られていないこと
rspec ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:73 # ScheduledTasks::RepairDbConnection.task_run Service実行が正常終了したとき 古いデータが削除されていること
rspec ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:86 # ScheduledTasks::RepairDbConnection.task_run Service実行がエラーで終了したとき 失敗終了した結果が取得できること
rspec ./spec/models/scheduled_tasks/repair_db_connection_spec.rb:112 # ScheduledTasks::RepairDbConnection.task_run Service実行がエラーで終了したとき Slackへのエラー通知が送られていること
rspec ./spec/models/scheduled_tasks/run_heartbeat_spec.rb:35 # ScheduledTasks::RunHeartbeat.task_run 正常終了した結果が取得できること
rspec ./spec/models/scheduled_tasks/run_heartbeat_spec.rb:62 # ScheduledTasks::RunHeartbeat.task_run Slackへの通知が送られていないこと
rspec ./spec/models/scheduled_tasks/run_heartbeat_spec.rb:69 # ScheduledTasks::RunHeartbeat.task_run 古いデータが削除されていること
rspec ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:38 # ScheduledTasks::RunNotifyRemindExpenseRequest.task_run 正常終了した結果が取得できること
rspec ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:65 # ScheduledTasks::RunNotifyRemindExpenseRequest.task_run Slackへの通知が２通送られること
rspec ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:72 # ScheduledTasks::RunNotifyRemindExpenseRequest.task_run 古いデータが削除されていること
rspec ./spec/models/scheduled_tasks/run_notify_remind_expense_request_spec.rb:86 # ScheduledTasks::RunNotifyRemindExpenseRequest.task_run 本日分が失敗しているとき 再実行が正常終了した結果が取得できること
rspec ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:38 # ScheduledTasks::RunProfitSyncAgent.task_run 正常終了した結果が取得できること
rspec ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:65 # ScheduledTasks::RunProfitSyncAgent.task_run Slackへの通知が２通送られること
rspec ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:72 # ScheduledTasks::RunProfitSyncAgent.task_run 古いデータが削除されていること
rspec ./spec/models/scheduled_tasks/run_profit_sync_agent_spec.rb:86 # ScheduledTasks::RunProfitSyncAgent.task_run 本日分が失敗しているとき 再実行が正常終了した結果が取得できること
rspec ./spec/models/user_feed_back_spec.rb:22 # UserFeedBack.login_user userが設定されたデータのみ取得できること
rspec ./spec/models/user_feed_back_spec.rb:34 # UserFeedBack.before_login_user userがnilのデータのみ取得できること
rspec ./spec/models/user_spec.rb:79 # User.select_options_about_users チームの選択肢が返ること
rspec ./spec/models/values/manage/analytics/program_spec.rb:8 # Values::Manage::Analytics::Program#as_props Propsが取得できること
rspec ./spec/models/values/manage/analytics/program_spec.rb:32 # Values::Manage::Analytics::Program#case 案件情報が分析できる内容を取得できること
rspec ./spec/models/values/manage/analytics/program_spec.rb:52 # Values::Manage::Analytics::Program#data 案件に対して従業員の参加データ存在しないとき 空の配列が取得できること
rspec ./spec/models/values/manage/analytics/program_spec.rb:81 # Values::Manage::Analytics::Program#data 案件に複数の従業員が参加しているとき 分析用のデータ配列が取得できること
rspec ./spec/models/values/manage/analytics/programs_spec.rb:26 # Values::Manage::Analytics::Programs#total 各種案件の集計データが取得できること
rspec ./spec/models/values/manage/analytics/programs_spec.rb:56 # Values::Manage::Analytics::Programs#data 各種案件の分析用データ一覧が取得できること
rspec ./spec/requests/current/mypages_controller_spec.rb:20 # Current::MypagesController PUT /current/mypage (email を更新するとき) データが更新されること
rspec ./spec/requests/current/mypages_controller_spec.rb:40 # Current::MypagesController PUT /current/mypage (password を更新するとき) (古いパスワードが一致するとき) (確認用パスワードが一致するとき) データが更新されること
rspec ./spec/requests/current/mypages_controller_spec.rb:50 # Current::MypagesController PUT /current/mypage (password を更新するとき) (古いパスワードが一致するとき) (確認用パスワードが一致しないとき) データが更新されないこと
rspec ./spec/requests/current/mypages_controller_spec.rb:62 # Current::MypagesController PUT /current/mypage (password を更新するとき) (古いパスワードが一致しないとき) データが更新されないこと
rspec ./spec/requests/devises/leaders/passwords_controller_spec.rb:14 # Devises::Leaders::PasswordsController POST /leaders/password リーダーのパスワード再設定処理が行われ、メールが送信されること
rspec ./spec/requests/devises/leaders/passwords_controller_spec.rb:56 # Devises::Leaders::PasswordsController PUT /leaders/password トークンが一致するとき 新しいパスワードが設定され、パスワードの状態が更新されること
rspec ./spec/requests/devises/leaders/passwords_controller_spec.rb:71 # Devises::Leaders::PasswordsController PUT /leaders/password トークンが一致しないとき 新しいパスワードが設定されないこと
rspec './spec/requests/devises/sessions_controller_spec.rb[1:2:1:3:1]' # Devises::SessionsController POST /users/sign_in role: :general, expecteds: {:status=>302, :path=>"/"} (存在するメールアドレス+正しいパスワードでログインするとき) ログイン後のページにリダイレクトされること
rspec './spec/requests/devises/sessions_controller_spec.rb[1:2:2:3:1]' # Devises::SessionsController POST /users/sign_in role: :super, expecteds: {:status=>302, :path=>"/staff/dashboard"} (存在するメールアドレス+正しいパスワードでログインするとき) ログイン後のページにリダイレクトされること
rspec './spec/requests/devises/sessions_controller_spec.rb[1:2:3:3:1]' # Devises::SessionsController POST /users/sign_in role: :staff, expecteds: {:status=>302, :path=>"/staff/dashboard"} (存在するメールアドレス+正しいパスワードでログインするとき) ログイン後のページにリダイレクトされること
rspec ./spec/requests/leader/externals/programs/auths_controller_spec.rb:17 # Leader::Externals::Programs::AuthsController GET /leader/externals/programs/:program_id/auth プログラムが存在するとき アクセス用のキーが一致しないとき 認証エラー画面にリダイレクトされること
rspec ./spec/requests/leader/externals/programs/auths_controller_spec.rb:25 # Leader::Externals::Programs::AuthsController GET /leader/externals/programs/:program_id/auth プログラムが存在するとき アクセス用のキーが一致するとき ログイン画面が表示されること
rspec ./spec/requests/leader/externals/programs/auths_controller_spec.rb:56 # Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき リーダーのメールアドレスに一致するリーダーが存在しないとき メールアドレスに誤りがあるエラーメッセージが表示されること
rspec ./spec/requests/leader/externals/programs/auths_controller_spec.rb:73 # Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき リーダーが該当のプログラムに参加していないとき プログラムに参加していないことを促すエラーメッセージが表示されること
rspec ./spec/requests/leader/externals/programs/auths_controller_spec.rb:94 # Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき リーダーのプログラム用パスワードが間違えているとき パスワードが間違えているエラーメッセージが表示されること
rspec ./spec/requests/leader/externals/programs/auths_controller_spec.rb:115 # Leader::Externals::Programs::AuthsController POST /leader/externals/programs/:program_id/auth プログラムが存在するとき 参加リーダーが正しいパスワードを入力したとき 認証が完了し、プログラム経費の編集画面へ遷移されること
rspec ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:19 # Leader::Externals::Programs::ExpensesController GET /leader/externals/programs/:program_id/expenses ログインしているとき showページが表示されること
rspec ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:52 # Leader::Externals::Programs::ExpensesController GET /leader/externals/programs/:program_id/expenses/edit ログイン済のとき (まだ一度も経費申請をしていない場合) 経費申請画面が表示されること
rspec ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:87 # Leader::Externals::Programs::ExpensesController GET /leader/externals/programs/:program_id/expenses/edit ログイン済のとき (すでに経費申請済みの場合) 未申請と同様に、経費申請画面が表示されること
rspec ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:130 # Leader::Externals::Programs::ExpensesController PATCH /leader/externals/programs/:program_id/expenses ログイン済のとき (正常系) 正常に更新されたことを伝える
rspec ./spec/requests/leader/externals/programs/expenses_controller_spec.rb:139 # Leader::Externals::Programs::ExpensesController PATCH /leader/externals/programs/:program_id/expenses ログイン済のとき (異常系) エラーを伝える
rspec ./spec/requests/staff/ai_features/program_instructions_controller_spec.rb:20 # Staff::AiFeatures::ProgramInstructionsController GET /staff/ai_features/program_instructions/new プロンプト入力画面が表示されること
rspec ./spec/requests/staff/ai_features/program_instructions_controller_spec.rb:29 # Staff::AiFeatures::ProgramInstructionsController POST /staff/ai_features/program_instructions プロンプト入力画面が表示されるこ
rspec ./spec/requests/staff/expenses/accepted_statuses_controller_spec.rb:9 # Staff::Expenses::AcceptedStatusesController PUT /staff/expenses/accepted_statuses/:id/accept 経費申請が承認状態になること
rspec ./spec/requests/staff/expenses/accepted_statuses_controller_spec.rb:25 # Staff::Expenses::AcceptedStatusesController PUT /staff/expenses/accepted_statuses/:id/reject 経費申請が否認状態になり、否認理由も更新され、メールが送信されること
rspec ./spec/requests/staff/expenses/accepted_statuses_controller_spec.rb:49 # Staff::Expenses::AcceptedStatusesController PUT /staff/expenses/accepted_statuses/:id/freeze_to_apply 経費申請が凍結状態になること
rspec ./spec/requests/staff/expenses/csvs_controller_spec.rb:13 # Staff::Expenses::CsvsController GET /staff/expenses/csv (event_monthが指定されていない場合) 現在日の月の経費情報がダウンロードできること
rspec ./spec/requests/staff/expenses/csvs_controller_spec.rb:28 # Staff::Expenses::CsvsController GET /staff/expenses/csv (event_monthが指定されている場合) 指定された月の経費情報がダウンロードできること
rspec ./spec/requests/staff/expenses_controller_spec.rb:18 # Staff::ExpensesController GET /staff/expenses 経費情報が表示されること
rspec ./spec/requests/staff/leader_payments/bank_transfer_csv_meta_infos_controller_spec.rb:9 # Staff::LeaderPayments::BankTransferCsvMetaInfosController GET /staff/leader_payments/bank_transfer_csv_meta_infos/:id/edit 編集画面が表示されること
rspec ./spec/requests/staff/leader_payments/bank_transfer_csv_meta_infos_controller_spec.rb:30 # Staff::LeaderPayments::BankTransferCsvMetaInfosController PUT /staff/leader_payments/bank_transfer_csv_meta_infos/:id データが更新されて成功のレスポンスが返ること
rspec ./spec/requests/staff/leader_payments/bank_transfers/bulk_completes_controller_spec.rb:25 # Staff::LeaderPayments::BankTransfers::BulkCompletesController PATCH /staff/leader_payments/bank_transfers/bulk_completes 指定した銀行振り込みデータが全て完了状態になっていること
rspec ./spec/requests/staff/leader_payments/bank_transfers/completes_controller_spec.rb:15 # Staff::LeaderPayments::BankTransfers::CompletesController PATCH /staff/leader_payments/bank_transfers/completes/:id 完了状態にするとき 指定した振込データが完了済になること
rspec ./spec/requests/staff/leader_payments/bank_transfers/completes_controller_spec.rb:28 # Staff::LeaderPayments::BankTransfers::CompletesController PATCH /staff/leader_payments/bank_transfers/completes/:id 未完了状態にするとき 指定した振込データが未完了になること
rspec ./spec/requests/staff/leader_payments/target_terms/bank_transfer_traceabilities_controller_spec.rb:71 # Staff::LeaderPayments::TargetTerms::BankTransferTraceabilitiesController GET /staff/leader_payments/target_terms/:target_term_id/bank_transfer_traceability (データが揃っている場合) 対象期間に紐づく銀行振込データの生成元である給与や経費へのトレーサビリティが表示されること
rspec ./spec/requests/staff/leader_payments/target_terms/bank_transfers_controller_spec.rb:27 # Staff::LeaderPayments::TargetTerms::BankTransfersController GET /staff/leader_payments/target_terms/:target_term_id/bank_transfers 対象期間に紐づく銀行振込データの一覧が表示されること
rspec ./spec/requests/staff/leader_payments/target_terms/calc_bank_transfers_spec.rb:15 # Staff::LeaderPayments::TargetTerms::CalcBankTransfersController POST /staff/leader_payments/target_terms/:target_term_id/calc_bank_transfers [Mockを利用したレスポンスの検証] 銀行振込データの作成が成功したとき 処理成功のレスポンスを返すこと
rspec ./spec/requests/staff/leader_payments/target_terms/calc_bank_transfers_spec.rb:26 # Staff::LeaderPayments::TargetTerms::CalcBankTransfersController POST /staff/leader_payments/target_terms/:target_term_id/calc_bank_transfers [Mockを利用したレスポンスの検証] 銀行振込データの作成が失敗したとき 処理失敗のレスポンスとエラーメッセージを返すこと
rspec ./spec/requests/staff/leader_payments/target_terms/calc_salaries_controller_spec.rb:8 # Staff::LeaderPayments::TargetTerms::CalcSalariesController POST /staff/leader_payments/target_terms/:target_term_id/calc_salaries 対象期間に紐づく給与を計算し、apiレスポンスを返すこと
rspec ./spec/requests/staff/leader_payments/target_terms/export_csvs_controller_spec.rb:18 # Staff::LeaderPayments::TargetTerms::ExportCsvsController GET /staff/leader_payments/target_terms/:target_term_id/export_csv 銀行振り込み依頼CSVが作成できたとき CSVがどの月のデータか分かる名前でダウンロードできること
rspec ./spec/requests/staff/leader_payments/target_terms/export_csvs_controller_spec.rb:57 # Staff::LeaderPayments::TargetTerms::ExportCsvsController GET /staff/leader_payments/target_terms/:target_term_id/export_csv 銀行振り込み依頼CSVが作成できなかったとき エラーメッセージが返ること
rspec ./spec/requests/staff/leader_payments/target_terms/export_yutyo_banks_controller_spec.rb:14 # Staff::LeaderPayments::TargetTerms::ExportYutyoBanksController GET /staff/leader_payments/target_terms/:target_term_id/export_yutyo_banks CSVの作成に成功するとき CSVデータがダウンロードされること
rspec ./spec/requests/staff/leader_payments/target_terms/export_yutyo_banks_controller_spec.rb:39 # Staff::LeaderPayments::TargetTerms::ExportYutyoBanksController GET /staff/leader_payments/target_terms/:target_term_id/export_yutyo_banks CSVの作成に失敗したとき 失敗のエラーメッセージがplainで返ること
rspec ./spec/requests/staff/leader_payments/target_terms/payslips_controller_spec.rb:72 # Staff::LeaderPayments::TargetTerms::PayslipsController GET /staff/leader_payments/target_terms/:target_term_id/payslips 対象の給与データが存在するとき CSVデータがダウンロードされること
rspec ./spec/requests/staff/leader_payments/target_terms/payslips_controller_spec.rb:162 # Staff::LeaderPayments::TargetTerms::PayslipsController GET /staff/leader_payments/target_terms/:target_term_id/payslips 対象の給与データが存在しないとき 空のCSVデータがダウンロードされること
rspec ./spec/requests/staff/leader_payments/target_terms/salaries_controller_spec.rb:43 # Staff::LeaderPayments::TargetTerms::SalariesController GET /staff/leader_payments/target_terms/:target_term_id/salaries 対象期間に紐づく給与情報の一覧が表示されること
rspec ./spec/requests/staff/leader_payments/target_terms_controller_spec.rb:9 # Staff::LeaderPayments::TargetTermsController GET /staff/leader_payments/target_terms 給与情報の一覧が表示されること
rspec ./spec/requests/staff/leaders_controller_spec.rb:9 # Staff::LeadersController GET /staff/leaders リーダー一覧が表示されること
rspec ./spec/requests/staff/manage/analytics/programs_controller_spec.rb:27 # Staff::Manage::Analytics::ProgramsController GET /staff/manage/analytics/programs/:id 案件詳細画面が表示されること
rspec ./spec/requests/staff/manage/employees_controller_spec.rb:8 # Staff::Manage::EmployeesController GET /staff/manage/employees employee一覧が表示されること
rspec ./spec/requests/staff/manage/employees_controller_spec.rb:21 # Staff::Manage::EmployeesController GET /staff/manage/employees/new employee作成フォームが表示されること
rspec ./spec/requests/staff/manage/employees_controller_spec.rb:37 # Staff::Manage::EmployeesController POST /staff/manage/employees employeeが作成されること
rspec ./spec/requests/staff/manage/employees_controller_spec.rb:46 # Staff::Manage::EmployeesController GET /staff/manage/employees/:id/edit employee修正フォームが表示されること
rspec ./spec/requests/staff/manage/employees_controller_spec.rb:61 # Staff::Manage::EmployeesController PUT /staff/manage/employees/:id employeeが更新されること
rspec ./spec/requests/staff/manage/teams_controller_spec.rb:35 # Staff::Manage::TeamsController POST /staff/manage/teams teamが作成されること
rspec ./spec/requests/staff/manage/teams_controller_spec.rb:44 # Staff::Manage::TeamsController GET /staff/manage/teams/:id/edit team修正フォームが表示されること
rspec ./spec/requests/staff/manage/teams_controller_spec.rb:59 # Staff::Manage::TeamsController PUT /staff/manage/teams/:id teamが更新されること
rspec ./spec/requests/staff/programs/expenses_statuses_controller_spec.rb:13 # Staff::Programs::ExpensesStatusesController PUT /staff/programs/:program_id/expenses_statuses/freeze 全ての経費データが申請不可状態に変更されること
rspec ./spec/requests/staff/programs/expenses_statuses_controller_spec.rb:32 # Staff::Programs::ExpensesStatusesController PUT /staff/programs/:program_id/expenses_statuses/accept 全ての経費データが承認状態に変更されること
rspec ./spec/requests/staff/programs/kintones/recruitment_informations_spec.rb:17 # Staff::Programs::Kintones::RecruitmentInformationsController GET /staff/programs/:program_id/kintones/recruitment_information kintone_program_idが表示されること
rspec ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:11 # Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/close ユーザがスタッフのとき （正常系）まだ確定していない場合 収益情報の確定日時が設定されること
rspec ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:20 # Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/close ユーザがスタッフのとき （異常系）すでに確定している場合 収益情報の確定日時が変更されないこと
rspec ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:37 # Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/open ユーザがスーパーユーザのとき （正常系）まだ確定していない場合 revenue_openが呼ばれて、trueとして返ること
rspec ./spec/requests/staff/programs/revenue_closures_controller_spec.rb:62 # Staff::Programs::RevenueClosuresController PUT /staff/programs/:program_id/revenue_closures/open ユーザがスーパーユーザでないとき 権限エラーになること
rspec ./spec/requests/staff/programs_controller_spec.rb:39 # Staff::ProgramsController GET /staff/programs/:id Kintoneから情報が取得できるとき プログラム情報が表示されること
rspec ./spec/requests/staff/programs_controller_spec.rb:68 # Staff::ProgramsController GET /staff/programs/:id Kintoneから情報が取得できないとき プログラム情報が表示されること
rspec ./spec/requests/staff/programs_controller_spec.rb:84 # Staff::ProgramsController GET /staff/programs/new プログラム作成フォームが表示されること
rspec ./spec/requests/staff/programs_controller_spec.rb:98 # Staff::ProgramsController GET /staff/programs/:id/edit プログラム修正フォームが表示されること
rspec ./spec/requests/staff/programs_controller_spec.rb:150 # Staff::ProgramsController PUT /staff/programs/:id/apply_default_expenses (データの更新が成功するとき) 処理成功の結果が返ること
rspec ./spec/requests/staff/programs_controller_spec.rb:161 # Staff::ProgramsController PUT /staff/programs/:id/apply_default_expenses (データの更新が失敗するとき) 処理失敗の結果が返ること
rspec ./spec/requests/staff/staffs_controller_spec.rb:11 # Staff::StaffsController GET /staff/staffs スタッフ一覧が表示されること
rspec ./spec/requests/staff/staffs_controller_spec.rb:46 # Staff::StaffsController POST /staff/staffs [正常系] (スーパユーザを作成するとき) スタッフデータが作成されること
rspec ./spec/requests/staff/staffs_controller_spec.rb:72 # Staff::StaffsController POST /staff/staffs [正常系] (スタッフユーザを作成するとき) (スタッフ管理者を作成するとき) スタッフデータが作成されること
rspec ./spec/requests/staff/staffs_controller_spec.rb:96 # Staff::StaffsController POST /staff/staffs [正常系] (スタッフユーザを作成するとき) (スタッフメンバーを作成するとき) スタッフデータが作成されること
rspec ./spec/services/programs/notify_remind_expense_request_service_spec.rb:66 # Programs::NotifyRemindExpenseRequestService 明日が締め切りのProgramが２件、もっと先の締め切りが１件あるとき それぞれに、申請を行っているGLと、申請を行っていないGLがいるとき 申請を行っていないGLたちに、プログラム毎にメールを送ること
rspec ./spec/services/programs/notify_remind_expense_request_service_spec.rb:82 # Programs::NotifyRemindExpenseRequestService 明日が締め切りのProgramが２件、もっと先の締め切りが１件あるとき それぞれに、申請を行っているGLと、申請を行っていないGLがいるとき 途中になにか異常があったとき falseを返すこと

Coverage report generated for RSpec to /app/coverage. 2380 / 3387 LOC (70.27%) covered.
Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
```

